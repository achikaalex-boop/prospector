import{z as dt,B as Je,f as it,m as D,c as $,o as z,A as ct,e as u,s as Qe,b as ee,r as me,l as le,t as te,R as pt,C as at,y as ft,k as Ve,P as Ye,W as ht,D as ge,n as $e,j as S,E as Se,w as V,a as se,d as Le,F as qe,G as Xe,H as mt,g as re,I as gt,h as et,J as tt,K as bt,L as Ne,q as Be,u as L,M as vt,N as yt}from"./index-Dh6sIx4Y.js";import{a as De}from"./index-B9ygI19o.js";import{s as ye}from"./index-CZ4CAEJ2.js";import{s as kt,a as he}from"./index-DSWzrQQG.js";import{b as wt,c as Ct,d as St,a as xt,s as Te}from"./index-WAQcJUEV.js";import{s as Et}from"./index-Cas_ztGz.js";var Ue={exports:{}};var Ft=Ue.exports,nt;function _t(){return nt||(nt=1,(function(e,a){((r,d)=>{e.exports=d()})(Ft,function r(){var d=typeof self<"u"?self:typeof window<"u"?window:d!==void 0?d:{},b,s=!d.document&&!!d.postMessage,I=d.IS_PAPA_WORKER||!1,B={},G=0,f={};function T(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(i){var l=be(i);l.chunkSize=parseInt(l.chunkSize),i.step||i.chunk||(l.chunkSize=null),this._handle=new Ce(l),(this._handle.streamer=this)._config=l}).call(this,n),this.parseChunk=function(i,l){var h=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<h){let t=this._config.newline;t||(o=this._config.quoteChar||'"',t=this._handle.guessLineEndings(i,o)),i=[...i.split(t).slice(h)].join(t)}this.isFirstChunk&&P(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(i))!==void 0&&(i=o),this.isFirstChunk=!1,this._halted=!1;var h=this._partialLine+i,o=(this._partialLine="",this._handle.parse(h,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(i=o.meta.cursor,h=(this._finished||(this._partialLine=h.substring(i-this._baseIndex),this._baseIndex=i),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),I)d.postMessage({results:o,workerId:f.WORKER_ID,finished:h});else if(P(this._config.chunk)&&!l){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!h||!P(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(i){P(this._config.error)?this._config.error(i):I&&this._config.error&&d.postMessage({workerId:f.WORKER_ID,error:i,finished:!1})}}function oe(n){var i;(n=n||{}).chunkSize||(n.chunkSize=f.RemoteChunkSize),T.call(this,n),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(l){this._input=l,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),s||(i.onload=X(this._chunkLoaded,this),i.onerror=X(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var l,h=this._config.downloadRequestHeaders;for(l in h)i.setRequestHeader(l,h[l])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,i.setRequestHeader("Range","bytes="+this._start+"-"+o));try{i.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}s&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize||i.responseText.length,this._finished=!this._config.chunkSize||this._start>=(l=>(l=l.getResponseHeader("Content-Range"))!==null?parseInt(l.substring(l.lastIndexOf("/")+1)):-1)(i),this.parseChunk(i.responseText)))},this._chunkError=function(l){l=i.statusText||l,this._sendError(new Error(l))}}function ke(n){(n=n||{}).chunkSize||(n.chunkSize=f.LocalChunkSize),T.call(this,n);var i,l,h=typeof FileReader<"u";this.stream=function(o){this._input=o,l=o.slice||o.webkitSlice||o.mozSlice,h?((i=new FileReader).onload=X(this._chunkLoaded,this),i.onerror=X(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,t=(this._config.chunkSize&&(t=Math.min(this._start+this._config.chunkSize,this._input.size),o=l.call(o,this._start,t)),i.readAsText(o,this._config.encoding));h||this._chunkLoaded({target:{result:t}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(i.error)}}function we(n){var i;T.call(this,n=n||{}),this.stream=function(l){return i=l,this._nextChunk()},this._nextChunk=function(){var l,h;if(!this._finished)return l=this._config.chunkSize,i=l?(h=i.substring(0,l),i.substring(l)):(h=i,""),this._finished=!i,this.parseChunk(h)}}function v(n){T.call(this,n=n||{});var i=[],l=!0,h=!1;this.pause=function(){T.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){T.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){h&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):l=!0},this._streamData=X(function(o){try{i.push(typeof o=="string"?o:o.toString(this._config.encoding)),l&&(l=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(t){this._streamError(t)}},this),this._streamError=X(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=X(function(){this._streamCleanUp(),h=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Ce(n){var i,l,h,o,t=Math.pow(2,53),m=-t,x=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,c=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,p=this,E=0,y=0,Q=!1,w=!1,F=[],g={data:[],errors:[],meta:{}};function H(_){return n.skipEmptyLines==="greedy"?_.join("").trim()==="":_.length===1&&_[0].length===0}function q(){if(g&&h&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+f.DefaultDelimiter+"'"),h=!1),n.skipEmptyLines&&(g.data=g.data.filter(function(k){return!H(k)})),J()){let k=function(j,W){P(n.transformHeader)&&(j=n.transformHeader(j,W)),F.push(j)};if(g)if(Array.isArray(g.data[0])){for(var _=0;J()&&_<g.data.length;_++)g.data[_].forEach(k);g.data.splice(0,1)}else g.data.forEach(k)}function R(k,j){for(var W=n.header?{}:[],O=0;O<k.length;O++){var U=O,A=k[O],A=((ae,C)=>(M=>(n.dynamicTypingFunction&&n.dynamicTyping[M]===void 0&&(n.dynamicTyping[M]=n.dynamicTypingFunction(M)),(n.dynamicTyping[M]||n.dynamicTyping)===!0))(ae)?C==="true"||C==="TRUE"||C!=="false"&&C!=="FALSE"&&((M=>{if(x.test(M)&&(M=parseFloat(M),m<M&&M<t))return 1})(C)?parseFloat(C):c.test(C)?new Date(C):C===""?null:C):C)(U=n.header?O>=F.length?"__parsed_extra":F[O]:U,A=n.transform?n.transform(A,U):A);U==="__parsed_extra"?(W[U]=W[U]||[],W[U].push(A)):W[U]=A}return n.header&&(O>F.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+F.length+" fields but parsed "+O,y+j):O<F.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+F.length+" fields but parsed "+O,y+j)),W}var N;g&&(n.header||n.dynamicTyping||n.transform)&&(N=1,!g.data.length||Array.isArray(g.data[0])?(g.data=g.data.map(R),N=g.data.length):g.data=R(g.data,0),n.header&&g.meta&&(g.meta.fields=F),y+=N)}function J(){return n.header&&F.length===0}function ne(_,R,N,k){_={type:_,code:R,message:N},k!==void 0&&(_.row=k),g.errors.push(_)}P(n.step)&&(o=n.step,n.step=function(_){g=_,J()?q():(q(),g.data.length!==0&&(E+=_.data.length,n.preview&&E>n.preview?l.abort():(g.data=g.data[0],o(g,p))))}),this.parse=function(_,R,N){var k=n.quoteChar||'"',k=(n.newline||(n.newline=this.guessLineEndings(_,k)),h=!1,n.delimiter?P(n.delimiter)&&(n.delimiter=n.delimiter(_),g.meta.delimiter=n.delimiter):((k=((j,W,O,U,A)=>{var ae,C,M,ve;A=A||[",","	","|",";",f.RECORD_SEP,f.UNIT_SEP];for(var xe=0;xe<A.length;xe++){for(var ue,Ae=A[xe],Z=0,de=0,K=0,Y=(M=void 0,new Fe({comments:U,delimiter:Ae,newline:W,preview:10}).parse(j)),fe=0;fe<Y.data.length;fe++)O&&H(Y.data[fe])?K++:(ue=Y.data[fe].length,de+=ue,M===void 0?M=ue:0<ue&&(Z+=Math.abs(ue-M),M=ue));0<Y.data.length&&(de/=Y.data.length-K),(C===void 0||Z<=C)&&(ve===void 0||ve<de)&&1.99<de&&(C=Z,ae=Ae,ve=de)}return{successful:!!(n.delimiter=ae),bestDelimiter:ae}})(_,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=k.bestDelimiter:(h=!0,n.delimiter=f.DefaultDelimiter),g.meta.delimiter=n.delimiter),be(n));return n.preview&&n.header&&k.preview++,i=_,l=new Fe(k),g=l.parse(i,R,N),q(),Q?{meta:{paused:!0}}:g||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,l.abort(),i=P(n.chunk)?"":i.substring(l.getCharIndex())},this.resume=function(){p.streamer._halted?(Q=!1,p.streamer.parseChunk(i,!0)):setTimeout(p.resume,3)},this.aborted=function(){return w},this.abort=function(){w=!0,l.abort(),g.meta.aborted=!0,P(n.complete)&&n.complete(g),i=""},this.guessLineEndings=function(j,k){j=j.substring(0,1048576);var k=new RegExp(ie(k)+"([^]*?)"+ie(k),"gm"),N=(j=j.replace(k,"")).split("\r"),k=j.split(`
`),j=1<k.length&&k[0].length<N[0].length;if(N.length===1||j)return`
`;for(var W=0,O=0;O<N.length;O++)N[O][0]===`
`&&W++;return W>=N.length/2?`\r
`:"\r"}}function ie(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Fe(n){var i=(n=n||{}).delimiter,l=n.newline,h=n.comments,o=n.step,t=n.preview,m=n.fastMode,x=null,c=!1,p=n.quoteChar==null?'"':n.quoteChar,E=p;if(n.escapeChar!==void 0&&(E=n.escapeChar),(typeof i!="string"||-1<f.BAD_DELIMITERS.indexOf(i))&&(i=","),h===i)throw new Error("Comment character same as delimiter");h===!0?h="#":(typeof h!="string"||-1<f.BAD_DELIMITERS.indexOf(h))&&(h=!1),l!==`
`&&l!=="\r"&&l!==`\r
`&&(l=`
`);var y=0,Q=!1;this.parse=function(w,F,g){if(typeof w!="string")throw new Error("Input must be a string");var H=w.length,q=i.length,J=l.length,ne=h.length,_=P(o),R=[],N=[],k=[],j=y=0;if(!w)return Z();if(m||m!==!1&&w.indexOf(p)===-1){for(var W=w.split(l),O=0;O<W.length;O++){if(k=W[O],y+=k.length,O!==W.length-1)y+=l.length;else if(g)return Z();if(!h||k.substring(0,ne)!==h){if(_){if(R=[],ve(k.split(i)),de(),Q)return Z()}else ve(k.split(i));if(t&&t<=O)return R=R.slice(0,t),Z(!0)}}return Z()}for(var U=w.indexOf(i,y),A=w.indexOf(l,y),ae=new RegExp(ie(E)+ie(p),"g"),C=w.indexOf(p,y);;)if(w[y]===p)for(C=y,y++;;){if((C=w.indexOf(p,C+1))===-1)return g||N.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:R.length,index:y}),ue();if(C===H-1)return ue(w.substring(y,C).replace(ae,p));if(p===E&&w[C+1]===E)C++;else if(p===E||C===0||w[C-1]!==E){U!==-1&&U<C+1&&(U=w.indexOf(i,C+1));var M=xe((A=A!==-1&&A<C+1?w.indexOf(l,C+1):A)===-1?U:Math.min(U,A));if(w.substr(C+1+M,q)===i){k.push(w.substring(y,C).replace(ae,p)),w[y=C+1+M+q]!==p&&(C=w.indexOf(p,y)),U=w.indexOf(i,y),A=w.indexOf(l,y);break}if(M=xe(A),w.substring(C+1+M,C+1+M+J)===l){if(k.push(w.substring(y,C).replace(ae,p)),Ae(C+1+M+J),U=w.indexOf(i,y),C=w.indexOf(p,y),_&&(de(),Q))return Z();if(t&&R.length>=t)return Z(!0);break}N.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:R.length,index:y}),C++}}else if(h&&k.length===0&&w.substring(y,y+ne)===h){if(A===-1)return Z();y=A+J,A=w.indexOf(l,y),U=w.indexOf(i,y)}else if(U!==-1&&(U<A||A===-1))k.push(w.substring(y,U)),y=U+q,U=w.indexOf(i,y);else{if(A===-1)break;if(k.push(w.substring(y,A)),Ae(A+J),_&&(de(),Q))return Z();if(t&&R.length>=t)return Z(!0)}return ue();function ve(K){R.push(K),j=y}function xe(K){var Y=0;return Y=K!==-1&&(K=w.substring(C+1,K))&&K.trim()===""?K.length:Y}function ue(K){return g||(K===void 0&&(K=w.substring(y)),k.push(K),y=H,ve(k),_&&de()),Z()}function Ae(K){y=K,ve(k),k=[],A=w.indexOf(l,y)}function Z(K){if(n.header&&!F&&R.length&&!c){var Y=R[0],fe=Object.create(null),Me=new Set(Y);let Ze=!1;for(let Ee=0;Ee<Y.length;Ee++){let ce=Y[Ee];if(fe[ce=P(n.transformHeader)?n.transformHeader(ce,Ee):ce]){let Ie,Ge=fe[ce];for(;Ie=ce+"_"+Ge,Ge++,Me.has(Ie););Me.add(Ie),Y[Ee]=Ie,fe[ce]++,Ze=!0,(x=x===null?{}:x)[Ie]=ce}else fe[ce]=1,Y[Ee]=ce;Me.add(ce)}Ze&&console.warn("Duplicate headers found and renamed."),c=!0}return{data:R,errors:N,meta:{delimiter:i,linebreak:l,aborted:Q,truncated:!!K,cursor:j+(F||0),renamedHeaders:x}}}function de(){o(Z()),R=[],N=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return y}}function _e(n){var i=n.data,l=B[i.workerId],h=!1;if(i.error)l.userError(i.error,i.file);else if(i.results&&i.results.data){var o={abort:function(){h=!0,Re(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:pe,resume:pe};if(P(l.userStep)){for(var t=0;t<i.results.data.length&&(l.userStep({data:i.results.data[t],errors:i.results.errors,meta:i.results.meta},o),!h);t++);delete i.results}else P(l.userChunk)&&(l.userChunk(i.results,o,i.file),delete i.results)}i.finished&&!h&&Re(i.workerId,i.results)}function Re(n,i){var l=B[n];P(l.userComplete)&&l.userComplete(i),l.terminate(),delete B[n]}function pe(){throw new Error("Not implemented.")}function be(n){if(typeof n!="object"||n===null)return n;var i,l=Array.isArray(n)?[]:{};for(i in n)l[i]=be(n[i]);return l}function X(n,i){return function(){n.apply(i,arguments)}}function P(n){return typeof n=="function"}return f.parse=function(n,i){var l=(i=i||{}).dynamicTyping||!1;if(P(l)&&(i.dynamicTypingFunction=l,l={}),i.dynamicTyping=l,i.transform=!!P(i.transform)&&i.transform,!i.worker||!f.WORKERS_SUPPORTED)return l=null,f.NODE_STREAM_INPUT,typeof n=="string"?(n=(h=>h.charCodeAt(0)!==65279?h:h.slice(1))(n),l=new(i.download?oe:we)(i)):n.readable===!0&&P(n.read)&&P(n.on)?l=new v(i):(d.File&&n instanceof File||n instanceof Object)&&(l=new ke(i)),l.stream(n);(l=(()=>{var h;return!!f.WORKERS_SUPPORTED&&(h=(()=>{var o=d.URL||d.webkitURL||null,t=r.toString();return f.BLOB_URL||(f.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",t,")();"],{type:"text/javascript"})))})(),(h=new d.Worker(h)).onmessage=_e,h.id=G++,B[h.id]=h)})()).userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=P(i.step),i.chunk=P(i.chunk),i.complete=P(i.complete),i.error=P(i.error),delete i.worker,l.postMessage({input:n,config:i,workerId:l.id})},f.unparse=function(n,i){var l=!1,h=!0,o=",",t=`\r
`,m='"',x=m+m,c=!1,p=null,E=!1,y=((()=>{if(typeof i=="object"){if(typeof i.delimiter!="string"||f.BAD_DELIMITERS.filter(function(F){return i.delimiter.indexOf(F)!==-1}).length||(o=i.delimiter),typeof i.quotes!="boolean"&&typeof i.quotes!="function"&&!Array.isArray(i.quotes)||(l=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(c=i.skipEmptyLines),typeof i.newline=="string"&&(t=i.newline),typeof i.quoteChar=="string"&&(m=i.quoteChar),typeof i.header=="boolean"&&(h=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");p=i.columns}i.escapeChar!==void 0&&(x=i.escapeChar+m),i.escapeFormulae instanceof RegExp?E=i.escapeFormulae:typeof i.escapeFormulae=="boolean"&&i.escapeFormulae&&(E=/^[=+\-@\t\r].*$/)}})(),new RegExp(ie(m),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return Q(null,n,c);if(typeof n[0]=="object")return Q(p||Object.keys(n[0]),n,c)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||p),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),Q(n.fields||[],n.data||[],c);throw new Error("Unable to serialize unrecognized input");function Q(F,g,H){var q="",J=(typeof F=="string"&&(F=JSON.parse(F)),typeof g=="string"&&(g=JSON.parse(g)),Array.isArray(F)&&0<F.length),ne=!Array.isArray(g[0]);if(J&&h){for(var _=0;_<F.length;_++)0<_&&(q+=o),q+=w(F[_],_);0<g.length&&(q+=t)}for(var R=0;R<g.length;R++){var N=(J?F:g[R]).length,k=!1,j=J?Object.keys(g[R]).length===0:g[R].length===0;if(H&&!J&&(k=H==="greedy"?g[R].join("").trim()==="":g[R].length===1&&g[R][0].length===0),H==="greedy"&&J){for(var W=[],O=0;O<N;O++){var U=ne?F[O]:O;W.push(g[R][U])}k=W.join("").trim()===""}if(!k){for(var A=0;A<N;A++){0<A&&!j&&(q+=o);var ae=J&&ne?F[A]:A;q+=w(g[R][ae],A)}R<g.length-1&&(!H||0<N&&!j)&&(q+=t)}}return q}function w(F,g){var H,q;return F==null?"":F.constructor===Date?JSON.stringify(F).slice(1,25):(q=!1,E&&typeof F=="string"&&E.test(F)&&(F="'"+F,q=!0),H=F.toString().replace(y,x),(q=q||l===!0||typeof l=="function"&&l(F,g)||Array.isArray(l)&&l[g]||((J,ne)=>{for(var _=0;_<ne.length;_++)if(-1<J.indexOf(ne[_]))return!0;return!1})(H,f.BAD_DELIMITERS)||-1<H.indexOf(o)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?m+H+m:H)}},f.RECORD_SEP="",f.UNIT_SEP="",f.BYTE_ORDER_MARK="\uFEFF",f.BAD_DELIMITERS=["\r",`
`,'"',f.BYTE_ORDER_MARK],f.WORKERS_SUPPORTED=!s&&!!d.Worker,f.NODE_STREAM_INPUT=1,f.LocalChunkSize=10485760,f.RemoteChunkSize=5242880,f.DefaultDelimiter=",",f.Parser=Fe,f.ParserHandle=Ce,f.NetworkStreamer=oe,f.FileStreamer=ke,f.StringStreamer=we,f.ReadableStreamStreamer=v,d.jQuery&&((b=d.jQuery).fn.parse=function(n){var i=n.config||{},l=[];return this.each(function(t){if(!(b(this).prop("tagName").toUpperCase()==="INPUT"&&b(this).attr("type").toLowerCase()==="file"&&d.FileReader)||!this.files||this.files.length===0)return!0;for(var m=0;m<this.files.length;m++)l.push({file:this.files[m],inputElem:this,instanceConfig:b.extend({},i)})}),h(),this;function h(){if(l.length===0)P(n.complete)&&n.complete();else{var t,m,x,c,p=l[0];if(P(n.before)){var E=n.before(p.file,p.inputElem);if(typeof E=="object"){if(E.action==="abort")return t="AbortError",m=p.file,x=p.inputElem,c=E.reason,void(P(n.error)&&n.error({name:t},m,x,c));if(E.action==="skip")return void o();typeof E.config=="object"&&(p.instanceConfig=b.extend(p.instanceConfig,E.config))}else if(E==="skip")return void o()}var y=p.instanceConfig.complete;p.instanceConfig.complete=function(Q){P(y)&&y(Q,p.file,p.inputElem),o()},f.parse(p.file,p.instanceConfig)}}function o(){l.splice(0,1),h()}}),I&&(d.onmessage=function(n){n=n.data,f.WORKER_ID===void 0&&n&&(f.WORKER_ID=n.workerId),typeof n.input=="string"?d.postMessage({workerId:f.WORKER_ID,results:f.parse(n.input,n.config),finished:!0}):(d.File&&n.input instanceof File||n.input instanceof Object)&&(n=f.parse(n.input,n.config))&&d.postMessage({workerId:f.WORKER_ID,results:n,finished:!0})}),(oe.prototype=Object.create(T.prototype)).constructor=oe,(ke.prototype=Object.create(T.prototype)).constructor=ke,(we.prototype=Object.create(we.prototype)).constructor=we,(v.prototype=Object.create(T.prototype)).constructor=v,f})})(Ue)),Ue.exports}var At=_t();const It=dt(At);var Bt=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,Lt={root:function(a){var r=a.instance,d=a.props;return["p-textarea p-component",{"p-filled":r.$filled,"p-textarea-resizable ":d.autoResize,"p-textarea-sm p-inputfield-sm":d.size==="small","p-textarea-lg p-inputfield-lg":d.size==="large","p-invalid":r.$invalid,"p-variant-filled":r.$variant==="filled","p-textarea-fluid":r.$fluid}]}},zt=Je.extend({name:"textarea",style:Bt,classes:Lt}),Rt={name:"BaseTextarea",extends:kt,props:{autoResize:Boolean},style:zt,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function ze(e){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ze(e)}function Dt(e,a,r){return(a=Tt(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Tt(e){var a=Pt(e,"string");return ze(a)=="symbol"?a:a+""}function Pt(e,a){if(ze(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var d=r.call(e,a);if(ze(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var He={name:"Textarea",extends:Rt,inheritAttrs:!1,observer:null,mounted:function(){var a=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){a.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var a=this.$el.style.height,r=parseInt(a)||0,d=this.$el.scrollHeight,b=!r||d>r,s=r&&d<r;s?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):b&&(this.$el.style.height="".concat(d,"px"))}},onInput:function(a){this.autoResize&&this.resize(),this.writeValue(a.target.value,a)}},computed:{attrs:function(){return D(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return it(Dt({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Ot=["value","name","disabled","aria-invalid","data-p"];function Ut(e,a,r,d,b,s){return z(),$("textarea",D({class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.invalid||void 0,"data-p":s.dataP,onInput:a[0]||(a[0]=function(){return s.onInput&&s.onInput.apply(s,arguments)})},s.attrs),null,16,Ot)}He.render=Ut;var Pe={name:"Dropdown",extends:wt,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},rt={name:"UploadIcon",extends:ct};function Vt(e){return $t(e)||jt(e)||Nt(e)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(e,a){if(e){if(typeof e=="string")return We(e,a);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,a):void 0}}function jt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $t(e){if(Array.isArray(e))return We(e)}function We(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,d=Array(a);r<a;r++)d[r]=e[r];return d}function qt(e,a,r,d,b,s){return z(),$("svg",D({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Vt(a[0]||(a[0]=[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z",fill:"currentColor"},null,-1)])),16)}rt.render=qt;var Ht=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,Wt={root:function(a){var r=a.instance;return["p-progressbar p-component",{"p-progressbar-determinate":r.determinate,"p-progressbar-indeterminate":r.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},Kt=Je.extend({name:"progressbar",style:Ht,classes:Wt}),Jt={name:"BaseProgressBar",extends:Qe,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:Kt,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},st={name:"ProgressBar",extends:Jt,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return it({determinate:this.determinate,indeterminate:this.indeterminate})}}},Qt=["aria-valuenow","data-p"],Zt=["data-p"],Gt=["data-p"],Yt=["data-p"];function Xt(e,a,r,d,b,s){return z(),$("div",D({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":s.dataP},e.ptmi("root")),[s.determinate?(z(),$("div",D({key:0,class:e.cx("value"),style:s.progressStyle,"data-p":s.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(z(),$("div",D({key:0,class:e.cx("label"),"data-p":s.dataP},e.ptm("label")),[me(e.$slots,"default",{},function(){return[le(te(e.value+"%"),1)]})],16,Gt)):ee("",!0)],16,Zt)):s.indeterminate?(z(),$("div",D({key:1,class:e.cx("value"),"data-p":s.dataP},e.ptm("value")),null,16,Yt)):ee("",!0)],16,Qt)}st.render=Xt;var en=`
    .p-fileupload input[type='file'] {
        display: none;
    }

    .p-fileupload-advanced {
        border: 1px solid dt('fileupload.border.color');
        border-radius: dt('fileupload.border.radius');
        background: dt('fileupload.background');
        color: dt('fileupload.color');
    }

    .p-fileupload-header {
        display: flex;
        align-items: center;
        padding: dt('fileupload.header.padding');
        background: dt('fileupload.header.background');
        color: dt('fileupload.header.color');
        border-style: solid;
        border-width: dt('fileupload.header.border.width');
        border-color: dt('fileupload.header.border.color');
        border-radius: dt('fileupload.header.border.radius');
        gap: dt('fileupload.header.gap');
    }

    .p-fileupload-content {
        border: 1px solid transparent;
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.content.gap');
        transition: border-color dt('fileupload.transition.duration');
        padding: dt('fileupload.content.padding');
    }

    .p-fileupload-content .p-progressbar {
        width: 100%;
        height: dt('fileupload.progressbar.height');
    }

    .p-fileupload-file-list {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.filelist.gap');
    }

    .p-fileupload-file {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding: dt('fileupload.file.padding');
        border-block-end: 1px solid dt('fileupload.file.border.color');
        gap: dt('fileupload.file.gap');
    }

    .p-fileupload-file:last-child {
        border-block-end: 0;
    }

    .p-fileupload-file-info {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.file.info.gap');
    }

    .p-fileupload-file-thumbnail {
        flex-shrink: 0;
    }

    .p-fileupload-file-actions {
        margin-inline-start: auto;
    }

    .p-fileupload-highlight {
        border: 1px dashed dt('fileupload.content.highlight.border.color');
    }

    .p-fileupload-basic .p-message {
        margin-block-end: dt('fileupload.basic.gap');
    }

    .p-fileupload-basic-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: dt('fileupload.basic.gap');
    }
`,tn={root:function(a){var r=a.props;return["p-fileupload p-fileupload-".concat(r.mode," p-component")]},header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button",basicContent:"p-fileupload-basic-content"},nn=Je.extend({name:"fileupload",style:en,classes:tn}),an={name:"BaseFileUpload",extends:Qe,props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:void 0},uploadIcon:{type:String,default:void 0},cancelIcon:{type:String,default:void 0},style:null,class:null,chooseButtonProps:{type:null,default:null},uploadButtonProps:{type:Object,default:function(){return{severity:"secondary"}}},cancelButtonProps:{type:Object,default:function(){return{severity:"secondary"}}}},style:nn,provide:function(){return{$pcFileUpload:this,$parentInstance:this}}},lt={name:"FileContent",hostName:"FileUpload",extends:Qe,emits:["remove"],props:{files:{type:Array,default:function(){return[]}},badgeSeverity:{type:String,default:"warn"},badgeValue:{type:String,default:null},previewWidth:{type:Number,default:50},templates:{type:null,default:null}},methods:{formatSize:function(a){var r,d=1024,b=3,s=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(s[0]);var I=Math.floor(Math.log(a)/Math.log(d)),B=parseFloat((a/Math.pow(d,I)).toFixed(b));return"".concat(B," ").concat(s[I])}},components:{Button:Ve,Badge:ft,TimesIcon:at}},rn=["alt","src","width"];function sn(e,a,r,d,b,s){var I=ge("Badge"),B=ge("TimesIcon"),G=ge("Button");return z(!0),$(qe,null,$e(r.files,function(f,T){return z(),$("div",D({key:f.name+f.type+f.size,class:e.cx("file")},{ref_for:!0},e.ptm("file")),[u("img",D({role:"presentation",class:e.cx("fileThumbnail"),alt:f.name,src:f.objectURL,width:r.previewWidth},{ref_for:!0},e.ptm("fileThumbnail")),null,16,rn),u("div",D({class:e.cx("fileInfo")},{ref_for:!0},e.ptm("fileInfo")),[u("div",D({class:e.cx("fileName")},{ref_for:!0},e.ptm("fileName")),te(f.name),17),u("span",D({class:e.cx("fileSize")},{ref_for:!0},e.ptm("fileSize")),te(s.formatSize(f.size)),17)],16),S(I,{value:r.badgeValue,class:Se(e.cx("pcFileBadge")),severity:r.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcFileBadge")},null,8,["value","class","severity","unstyled","pt"]),u("div",D({class:e.cx("fileActions")},{ref_for:!0},e.ptm("fileActions")),[S(G,{onClick:function(ke){return e.$emit("remove",T)},text:"",rounded:"",severity:"danger",class:Se(e.cx("pcFileRemoveButton")),unstyled:e.unstyled,pt:e.ptm("pcFileRemoveButton")},{icon:V(function(oe){return[r.templates.fileremoveicon?(z(),se(Le(r.templates.fileremoveicon),{key:0,class:Se(oe.class),file:f,index:T},null,8,["class","file","index"])):(z(),se(B,D({key:1,class:oe.class,"aria-hidden":"true"},{ref_for:!0},e.ptm("pcFileRemoveButton").icon),null,16,["class"]))]}),_:2},1032,["onClick","class","unstyled","pt"])],16)],16)}),128)}lt.render=sn;function je(e){return un(e)||on(e)||ot(e)||ln()}function ln(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function un(e){if(Array.isArray(e))return Ke(e)}function Oe(e,a){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ot(e))||a){r&&(e=r);var d=0,b=function(){};return{s:b,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(f){throw f},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,I=!0,B=!1;return{s:function(){r=r.call(e)},n:function(){var f=r.next();return I=f.done,f},e:function(f){B=!0,s=f},f:function(){try{I||r.return==null||r.return()}finally{if(B)throw s}}}}function ot(e,a){if(e){if(typeof e=="string")return Ke(e,a);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,a):void 0}}function Ke(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,d=Array(a);r<a;r++)d[r]=e[r];return d}var ut={name:"FileUpload",extends:an,inheritAttrs:!1,emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove","remove-uploaded-file"],duplicateIEEvent:!1,data:function(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null,uploadedFiles:[]}},methods:{upload:function(){this.hasFiles&&this.uploader()},onBasicUploaderClick:function(a){a.button===0&&this.$refs.fileInput.click()},onFileSelect:function(a){if(a.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.isBasic&&this.hasFiles&&(this.files=[]),this.messages=[],this.files=this.files||[];var r=a.dataTransfer?a.dataTransfer.files:a.target.files,d=Oe(r),b;try{for(d.s();!(b=d.n()).done;){var s=b.value;!this.isFileSelected(s)&&!this.isFileLimitExceeded()&&this.validate(s)&&(this.isImage(s)&&(s.objectURL=window.URL.createObjectURL(s)),this.files.push(s))}}catch(I){d.e(I)}finally{d.f()}this.$emit("select",{originalEvent:a,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.uploader(),a.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose:function(){this.$refs.fileInput.click()},uploader:function(){var a=this;if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{var r=new XMLHttpRequest,d=new FormData;this.$emit("before-upload",{xhr:r,formData:d});var b=Oe(this.files),s;try{for(b.s();!(s=b.n()).done;){var I=s.value;d.append(this.name,I,I.name)}}catch(B){b.e(B)}finally{b.f()}r.upload.addEventListener("progress",function(B){B.lengthComputable&&(a.progress=Math.round(B.loaded*100/B.total)),a.$emit("progress",{originalEvent:B,progress:a.progress})}),r.onreadystatechange=function(){if(r.readyState===4){if(a.progress=0,r.status>=200&&r.status<300){var B;a.fileLimit&&(a.uploadedFileCount+=a.files.length),a.$emit("upload",{xhr:r,files:a.files}),(B=a.uploadedFiles).push.apply(B,je(a.files))}else a.$emit("error",{xhr:r,files:a.files});a.clear()}},this.url&&(r.open("POST",this.url,!0),this.$emit("before-send",{xhr:r,formData:d}),r.withCredentials=this.withCredentials,r.send(d))}},clear:function(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus:function(){this.focused=!0},onBlur:function(){this.focused=!1},isFileSelected:function(a){if(this.files&&this.files.length){var r=Oe(this.files),d;try{for(r.s();!(d=r.n()).done;){var b=d.value;if(b.name+b.type+b.size===a.name+a.type+a.size)return!0}}catch(s){r.e(s)}finally{r.f()}}return!1},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},validate:function(a){return this.accept&&!this.isFileTypeValid(a)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",a.name).replace("{1}",this.accept)),!1):this.maxFileSize&&a.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",a.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid:function(a){var r=this.accept.split(",").map(function(B){return B.trim()}),d=Oe(r),b;try{for(d.s();!(b=d.n()).done;){var s=b.value,I=this.isWildcard(s)?this.getTypeClass(a.type)===this.getTypeClass(s):a.type==s||this.getFileExtension(a).toLowerCase()===s.toLowerCase();if(I)return!0}}catch(B){d.e(B)}finally{d.f()}return!1},getTypeClass:function(a){return a.substring(0,a.indexOf("/"))},isWildcard:function(a){return a.indexOf("*")!==-1},getFileExtension:function(a){return"."+a.name.split(".").pop()},isImage:function(a){return/^image\//.test(a.type)},onDragEnter:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(a.stopPropagation(),a.preventDefault())},onDragOver:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(!this.isUnstyled&&ht(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!0),a.stopPropagation(),a.preventDefault())},onDragLeave:function(){this.disabled||(!this.isUnstyled&&Ye(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1))},onDrop:function(a){if(!this.disabled){!this.isUnstyled&&Ye(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1),a.stopPropagation(),a.preventDefault();var r=a.dataTransfer?a.dataTransfer.files:a.target.files,d=this.multiple||r&&r.length===1;d&&this.onFileSelect(a)}},remove:function(a){this.clearInputElement();var r=this.files.splice(a,1)[0];this.files=je(this.files),this.$emit("remove",{file:r,files:this.files})},removeUploadedFile:function(a){var r=this.uploadedFiles.splice(a,1)[0];this.uploadedFiles=je(this.uploadedFiles),this.$emit("remove-uploaded-file",{file:r,files:this.uploadedFiles})},clearInputElement:function(){this.$refs.fileInput.value=""},clearIEInput:function(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize:function(a){var r,d=1024,b=3,s=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(s[0]);var I=Math.floor(Math.log(a)/Math.log(d)),B=parseFloat((a/Math.pow(d,I)).toFixed(b));return"".concat(B," ").concat(s[I])},isFileLimitExceeded:function(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit:function(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose:function(){this.messages=null}},computed:{isAdvanced:function(){return this.mode==="advanced"},isBasic:function(){return this.mode==="basic"},chooseButtonClass:function(){return[this.cx("pcChooseButton"),this.class]},basicFileChosenLabel:function(){var a;if(this.auto)return this.chooseButtonLabel;if(this.hasFiles){var r;return this.files&&this.files.length===1?this.files[0].name:(r=this.$primevue.config.locale)===null||r===void 0||(r=r.fileChosenMessage)===null||r===void 0?void 0:r.replace("{0}",this.files.length)}return((a=this.$primevue.config.locale)===null||a===void 0?void 0:a.noFileChosenMessage)||""},hasFiles:function(){return this.files&&this.files.length>0},hasUploadedFiles:function(){return this.uploadedFiles&&this.uploadedFiles.length>0},chooseDisabled:function(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled:function(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled:function(){return this.disabled||!this.hasFiles},chooseButtonLabel:function(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel:function(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel:function(){return this.cancelLabel||this.$primevue.config.locale.cancel},completedLabel:function(){return this.$primevue.config.locale.completed},pendingLabel:function(){return this.$primevue.config.locale.pending}},components:{Button:Ve,ProgressBar:st,Message:Et,FileContent:lt,PlusIcon:Ct,UploadIcon:rt,TimesIcon:at},directives:{ripple:pt}},dn=["multiple","accept","disabled"],cn=["accept","disabled","multiple"];function pn(e,a,r,d,b,s){var I=ge("Button"),B=ge("ProgressBar"),G=ge("Message"),f=ge("FileContent");return s.isAdvanced?(z(),$("div",D({key:0,class:e.cx("root")},e.ptmi("root")),[u("input",D({ref:"fileInput",type:"file",onChange:a[0]||(a[0]=function(){return s.onFileSelect&&s.onFileSelect.apply(s,arguments)}),multiple:e.multiple,accept:e.accept,disabled:s.chooseDisabled},e.ptm("input")),null,16,dn),u("div",D({class:e.cx("header")},e.ptm("header")),[me(e.$slots,"header",{files:b.files,uploadedFiles:b.uploadedFiles,chooseCallback:s.choose,uploadCallback:s.uploader,clearCallback:s.clear},function(){return[S(I,D({label:s.chooseButtonLabel,class:s.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onClick:s.choose,onKeydown:Xe(s.choose,["enter"]),onFocus:s.onFocus,onBlur:s.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:V(function(T){return[me(e.$slots,"chooseicon",{},function(){return[(z(),se(Le(e.chooseIcon?"span":"PlusIcon"),D({class:[T.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onClick","onKeydown","onFocus","onBlur","pt"]),e.showUploadButton?(z(),se(I,D({key:0,class:e.cx("pcUploadButton"),label:s.uploadButtonLabel,onClick:s.uploader,disabled:s.uploadDisabled,unstyled:e.unstyled},e.uploadButtonProps,{pt:e.ptm("pcUploadButton")}),{icon:V(function(T){return[me(e.$slots,"uploadicon",{},function(){return[(z(),se(Le(e.uploadIcon?"span":"UploadIcon"),D({class:[T.class,e.uploadIcon],"aria-hidden":"true"},e.ptm("pcUploadButton").icon,{"data-pc-section":"uploadbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ee("",!0),e.showCancelButton?(z(),se(I,D({key:1,class:e.cx("pcCancelButton"),label:s.cancelButtonLabel,onClick:s.clear,disabled:s.cancelDisabled,unstyled:e.unstyled},e.cancelButtonProps,{pt:e.ptm("pcCancelButton")}),{icon:V(function(T){return[me(e.$slots,"cancelicon",{},function(){return[(z(),se(Le(e.cancelIcon?"span":"TimesIcon"),D({class:[T.class,e.cancelIcon],"aria-hidden":"true"},e.ptm("pcCancelButton").icon,{"data-pc-section":"cancelbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ee("",!0)]})],16),u("div",D({ref:"content",class:e.cx("content"),onDragenter:a[1]||(a[1]=function(){return s.onDragEnter&&s.onDragEnter.apply(s,arguments)}),onDragover:a[2]||(a[2]=function(){return s.onDragOver&&s.onDragOver.apply(s,arguments)}),onDragleave:a[3]||(a[3]=function(){return s.onDragLeave&&s.onDragLeave.apply(s,arguments)}),onDrop:a[4]||(a[4]=function(){return s.onDrop&&s.onDrop.apply(s,arguments)})},e.ptm("content"),{"data-p-highlight":!1}),[me(e.$slots,"content",{files:b.files,uploadedFiles:b.uploadedFiles,removeUploadedFileCallback:s.removeUploadedFile,removeFileCallback:s.remove,progress:b.progress,messages:b.messages},function(){return[s.hasFiles?(z(),se(B,{key:0,value:b.progress,showValue:!1,unstyled:e.unstyled,pt:e.ptm("pcProgressbar")},null,8,["value","unstyled","pt"])):ee("",!0),(z(!0),$(qe,null,$e(b.messages,function(T){return z(),se(G,{key:T,severity:"error",onClose:s.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:V(function(){return[le(te(T),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),s.hasFiles?(z(),$("div",{key:1,class:Se(e.cx("fileList"))},[S(f,{files:b.files,onRemove:s.remove,badgeValue:s.pendingLabel,previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ee("",!0),s.hasUploadedFiles?(z(),$("div",{key:2,class:Se(e.cx("fileList"))},[S(f,{files:b.uploadedFiles,onRemove:s.removeUploadedFile,badgeValue:s.completedLabel,badgeSeverity:"success",previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ee("",!0)]}),e.$slots.empty&&!s.hasFiles&&!s.hasUploadedFiles?(z(),$("div",mt(D({key:0},e.ptm("empty"))),[me(e.$slots,"empty")],16)):ee("",!0)],16)],16)):s.isBasic?(z(),$("div",D({key:1,class:e.cx("root")},e.ptmi("root")),[(z(!0),$(qe,null,$e(b.messages,function(T){return z(),se(G,{key:T,severity:"error",onClose:s.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:V(function(){return[le(te(T),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),u("div",D({class:e.cx("basicContent")},e.ptm("basicContent")),[S(I,D({label:s.chooseButtonLabel,class:s.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onMouseup:s.onBasicUploaderClick,onKeydown:Xe(s.choose,["enter"]),onFocus:s.onFocus,onBlur:s.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:V(function(T){return[me(e.$slots,"chooseicon",{},function(){return[(z(),se(Le(e.chooseIcon?"span":"PlusIcon"),D({class:[T.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onMouseup","onKeydown","onFocus","onBlur","pt"]),e.auto?ee("",!0):me(e.$slots,"filelabel",{key:0,class:Se(e.cx("filelabel")),files:b.files},function(){return[u("span",{class:Se(e.cx("filelabel"))},te(s.basicFileChosenLabel),3)]}),u("input",D({ref:"fileInput",type:"file",accept:e.accept,disabled:e.disabled,multiple:e.multiple,onChange:a[5]||(a[5]=function(){return s.onFileSelect&&s.onFileSelect.apply(s,arguments)}),onFocus:a[6]||(a[6]=function(){return s.onFocus&&s.onFocus.apply(s,arguments)}),onBlur:a[7]||(a[7]=function(){return s.onBlur&&s.onBlur.apply(s,arguments)})},e.ptm("input")),null,16,cn)],16)],16)):ee("",!0)}ut.render=pn;const fn={class:"min-h-screen bg-gray-50 p-6"},hn={class:"max-w-5xl mx-auto"},mn={class:"mb-4"},gn={key:0},bn={key:0,class:"text-sm text-red-600"},vn={key:1,class:"text-sm text-gray-700"},yn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kn={class:"md:col-span-2"},wn={class:"md:col-span-2"},Cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Sn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xn={class:"space-y-2"},En={class:"space-y-4"},Fn={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},_n={class:"font-semibold text-gray-900 mb-3"},An={key:0,class:"text-sm text-gray-600 mt-2 text-center"},In={class:"flex justify-end gap-3"},Pn={__name:"Campaign",setup(e){const a=yt(),r=re([]),d=re(""),b=re(""),s=re(!1);re("");const I=gt(),B=async(o,t={})=>{const m={ts:new Date().toISOString(),message:o,meta:t};try{const x=`${window.location.origin}/client-log`;await De.post(x,m,{timeout:3e3})}catch{try{const c=`${window.location.origin}/client-log`;await De.post(c,m,{timeout:3e3})}catch(c){try{console.log("sendServerLog error (both attempts)",c)}catch{}}}try{console.log(`${m.ts} - ${m.message}`)}catch{}};try{window.__sendClientLog=(o="client-log test ping")=>B(o,{test:!0})}catch{}const G=["Immobilier","Tech","Finance","Conseil","Autre"],T=re([...[{label:"United States",value:"+14752906147"},{label:"Switzerland",value:"+41234567890"}]]),oe=async()=>{try{const{data:{user:o}}=await Be.auth.getUser();if(!o)return;const{data:t,error:m}=await Be.from("user_dedicated_numbers").select("number,country_code").eq("user_id",o.id);!m&&Array.isArray(t)&&t.forEach(x=>{T.value.unshift({label:`${x.country_code||"DED"} ${x.number}`,value:x.number})})}catch(o){console.error("loadUserNumbers error",o)}};et(()=>{X(),oe()}),tt(ie,()=>{X()});const ke=[{label:"Africa/Porto-Novo",value:"Africa/Porto-Novo"},{label:"Africa/Cairo",value:"Africa/Cairo"},{label:"Africa/Johannesburg",value:"Africa/Johannesburg"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"America/Denver",value:"America/Denver"},{label:"America/Chicago",value:"America/Chicago"},{label:"America/New_York",value:"America/New_York"},{label:"America/Phoenix",value:"America/Phoenix"},{label:"America/Anchorage",value:"America/Anchorage"},{label:"America/Halifax",value:"America/Halifax"},{label:"America/Sao_Paulo",value:"America/Sao_Paulo"},{label:"Europe/London",value:"Europe/London"},{label:"Europe/Paris",value:"Europe/Paris"},{label:"Europe/Zurich",value:"Europe/Zurich"},{label:"Europe/Berlin",value:"Europe/Berlin"},{label:"Asia/Dubai",value:"Asia/Dubai"},{label:"Asia/Kolkata",value:"Asia/Kolkata"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"},{label:"Australia/Sydney",value:"Australia/Sydney"},{label:"Pacific/Auckland",value:"Pacific/Auckland"},{label:"UTC",value:"UTC"}],we=[{label:"Prise de rendez-vous",value:"Prise de rendez-vous"},{label:"Qualification de prospects",value:"Qualification de prospects"},{label:"Vente directe",value:"Vente directe"},{label:"Relance clients",value:"Relance clients"},{label:"Sondage",value:"Sondage"},{label:"Demande d'information",value:"Demande d'information"}],v=bt({company_name:"",domain:"",promesse_de_valeur:"",confidence_threshold:.7,agent_name:"Julie",referral_name:"",infos:"",objectifs:"",contact_first_name:"",decision_maker_name:"",processus_metier:"",key_capability:"",call_script_example:"",decision_committee:[],from_number:"+14752906147",pain_point_identifie:"",timezone:"Africa/Porto-Novo"}),Ce=re([]),ie=re("starter"),Fe=re(60);re(null);const _e=re(0),Re=Ne(()=>Ce.value.find(o=>o.slug===ie.value)||null),pe=Ne(()=>Number(Re.value?.monthly_campaign_limit||0)),be=Ne(()=>Math.max(0,pe.value-(_e.value||0))),X=async()=>{try{const{data:{user:o}}=await Be.auth.getUser();if(!o)return;const t=new Date;t.setUTCDate(1),t.setUTCHours(0,0,0,0);const{data:m,error:x}=await Be.from("campaigns").select("id").eq("user_id",o.id).gte("created_at",t.toISOString());!x&&Array.isArray(m)&&(_e.value=m.length)}catch{}};et(()=>{X()}),tt(ie,()=>{X()}),(async()=>{try{const o=await De.get("/api/plans");Ce.value=o.data||[],Ce.value.length>0&&(ie.value=Ce.value[0].slug)}catch{}})();const n=o=>{if(!o)return"";let t=o.replace(/[\s\-\(\)\.]/g,"");return t.startsWith("+")?t:t.startsWith("00")?"+"+t.substring(2):"+"+t},i=o=>{if(!o)return[];const t=It.parse(o,{header:!0,skipEmptyLines:!0,transformHeader:x=>(x||"").trim().toLowerCase()}),m=[];return!t||!t.data||t.data.forEach(x=>{const c={};for(const p in x){const E=(x[p]||"").toString().trim();E&&(p.includes("nom")||p.includes("name")?c.nom=E:p.includes("email")||p.includes("mail")?c.email=E:p.includes("tel")||p.includes("phone")||p.includes("telephone")?c.telephone=n(E):(p.includes("entreprise")||p.includes("company")||p.includes("societe"))&&(c.entreprise=E))}(c.telephone&&c.telephone.trim()||c.email&&c.email.trim())&&m.push(c)}),m},l=o=>{const t=o&&o.files&&o.files[0]?o.files[0]:o&&o.target&&o.target.files&&o.target.files[0];if(!t){d.value="Aucun fichier slectionn",r.value=[];return}const m=new FileReader;m.onload=x=>{try{const c=x.target.result,p=i(c);r.value=p,r.value.length===0?d.value="Aucun contact valide trouv dans le fichier CSV":d.value=""}catch(c){console.error("Erreur lecture CSV:",c),d.value="Erreur lors de la lecture du fichier CSV",r.value=[]}},m.readAsText(t,"utf-8")},h=async()=>{const t=[{key:"company_name",label:"Nom de l'entreprise"},{key:"domain",label:"Secteur d'activit"},{key:"promesse_de_valeur",label:"Promesse de valeur"},{key:"infos",label:"Description entreprise / service"},{key:"agent_name",label:"Nom de l'agent"},{key:"objectifs",label:"Objectifs de Prospection"}].filter(m=>!(v[m.key]&&String(v[m.key]).trim().length>0)).map(m=>m.label);if(r.value.length===0&&t.push("Fichier de contacts (CSV)"),t.length>0){const m=`Veuillez renseigner les champs obligatoires : ${t.join(", ")}`;d.value=m;try{I.add({severity:"warn",summary:"Champs manquants",detail:m,life:6e3})}catch{}return}d.value="",b.value="",s.value=!0;try{B(`Dmarrage de la cration de campagne, contacts chargs: ${r.value.length}`,{contacts_count:r.value.length});const{data:{user:m}}=await Be.auth.getUser();if(B(`Rsultat supabase.auth.getUser(): ${m?m.id:"aucun user"}`,{user:m?m.id:null}),!m)throw new Error("Utilisateur non authentifi");const x={user_id:m.id,company_name:v.company_name,domain:v.domain,promesse_de_valeur:v.promesse_de_valeur,confidence_threshold:v.confidence_threshold||.7,agent_name:v.agent_name,referral_name:v.referral_name,infos:v.infos,objectifs:v.objectifs,contacts:r.value,contacts_count:r.value.length,estimated_avg_call_seconds:Number(Fe.value)||60,from_number:v.from_number,timezone:v.timezone};try{const c=await De.post("/api/create-campaign",x,{timeout:3e4});if(c.status===201||c.status===202){const p=`Campagne cre avec succs ! ${r.value.length} contacts seront prospects.`;b.value=p;try{I.add({severity:"success",summary:"Campagne cre",detail:p,life:6e3})}catch{}setTimeout(()=>a.push("/"),2e3)}else{const p=`Erreur lors de la cration de la campagne: ${c.data&&c.data.error?c.data.error:"erreur inconnue"}`;d.value=p;try{I.add({severity:"error",summary:"Erreur",detail:p,life:8e3})}catch{}}}catch(c){if(c?.response?.status===402){const E=(c.response.data||{}).error||"Solde insuffisant. Veuillez recharger votre compte.";d.value=E;try{I.add({severity:"warn",summary:"Solde insuffisant",detail:E,life:8e3})}catch{}}else if(c?.response?.data&&c.response.data.error){const p=c.response.data.error;d.value=p;try{I.add({severity:"error",summary:"Erreur",detail:p,life:8e3})}catch{}}else{console.error("Erreur lors de la cration de la campagne:",c);const p="Erreur lors de la cration de la campagne (serveur)";d.value=p;try{I.add({severity:"error",summary:"Erreur serveur",detail:p,life:8e3})}catch{}}}}catch(m){console.error("Erreur lors de la construction du batch pour le serveur:",m),B(`Erreur inattendue lors de la construction du batch: ${m&&m.message?m.message:JSON.stringify(m)}`);const x=m.message||"Erreur lors de la cration de la campagne";d.value=x;try{I.add({severity:"error",summary:"Erreur",detail:x,life:8e3})}catch{}}finally{s.value=!1}};return(o,t)=>{const m=ge("router-link"),x=ge("Message");return z(),$("div",fn,[u("div",hn,[S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{content:V(()=>[t[30]||(t[30]=u("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Nouvelle Campagne de Prospection ",-1)),S(x,{severity:"info",closable:!1,class:"mb-0"},{default:V(()=>[t[18]||(t[18]=le(" Configurez votre agent vocal AI avec les informations de votre entreprise et les objectifs de prospection. L'agent matrise les techniques avances : ",-1)),t[19]||(t[19]=u("strong",null,"Cold Call 2.0",-1)),t[20]||(t[20]=le(", ",-1)),t[21]||(t[21]=u("strong",null,"SPIN Selling",-1)),t[22]||(t[22]=le(", ",-1)),t[23]||(t[23]=u("strong",null,"NEPQ",-1)),t[24]||(t[24]=le(", ",-1)),t[25]||(t[25]=u("strong",null,"BANT",-1)),t[26]||(t[26]=le(", ",-1)),t[27]||(t[27]=u("strong",null,"Feel-Felt-Found",-1)),t[28]||(t[28]=le(", ",-1)),t[29]||(t[29]=u("strong",null,"S.A.F.E.",-1)),S(m,{to:"/techniques",class:"ml-2 text-gray-900 font-semibold underline"},{default:V(()=>[...t[17]||(t[17]=[le(" En savoir plus sur ces techniques ",-1)])]),_:1})]),_:1})]),_:1}),u("div",mn,[pe.value>0?(z(),$("div",gn,[be.value===0?(z(),$("div",bn,"Vous avez atteint votre limite de "+te(pe.value)+" campagnes ce mois (plan: "+te(ie.value)+"). Passez  un plan payant pour lancer davantage de campagnes.",1)):(z(),$("div",vn,"Campagnes ce mois: "+te(_e.value)+" / "+te(pe.value)+"  il vous reste "+te(be.value)+".",1))])):ee("",!0)]),u("form",{onSubmit:vt(h,["prevent"])},[S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[31]||(t[31]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-building text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Informations Entreprise")],-1)])]),content:V(()=>[u("div",yn,[u("div",kn,[t[32]||(t[32]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'entreprise *",-1)),S(L(he),{modelValue:v.company_name,"onUpdate:modelValue":t[0]||(t[0]=c=>v.company_name=c),placeholder:"Votre Entreprise",class:"w-full",required:""},null,8,["modelValue"])]),u("div",null,[t[33]||(t[33]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Secteur d'activit *",-1)),S(L(Pe),{modelValue:v.domain,"onUpdate:modelValue":t[1]||(t[1]=c=>v.domain=c),options:G,placeholder:"Slectionnez un secteur",class:"w-full",required:""},null,8,["modelValue"]),t[34]||(t[34]=u("small",{class:"text-gray-500 text-sm mt-1 block"}," Options disponibles : Immobilier, Tech, Finance, Conseil, Autre ",-1))]),u("div",null,[t[35]||(t[35]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Promesse de valeur (bnfice principal) *",-1)),S(L(he),{modelValue:v.promesse_de_valeur,"onUpdate:modelValue":t[2]||(t[2]=c=>v.promesse_de_valeur=c),placeholder:"Bnfice principal en une phrase",class:"w-full",required:""},null,8,["modelValue"])]),u("div",wn,[t[36]||(t[36]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Description entreprise / service *",-1)),S(L(He),{modelValue:v.infos,"onUpdate:modelValue":t[3]||(t[3]=c=>v.infos=c),placeholder:"Dcrivez votre entreprise, vos services, vos produits (2-3 phrases max)...",rows:"5",class:"w-full",required:""},null,8,["modelValue"])])])]),_:1}),S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[37]||(t[37]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-user text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Configuration Agent")],-1)])]),content:V(()=>[u("div",Cn,[u("div",null,[t[38]||(t[38]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'agent *",-1)),S(L(he),{modelValue:v.agent_name,"onUpdate:modelValue":t[4]||(t[4]=c=>v.agent_name=c),placeholder:"Julie",class:"w-full",required:""},null,8,["modelValue"])]),u("div",null,[t[39]||(t[39]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Seuil de confiance (0.0 - 1.0)",-1)),S(L(St),{modelValue:v.confidence_threshold,"onUpdate:modelValue":t[5]||(t[5]=c=>v.confidence_threshold=c),min:0,max:1,step:.1,minFractionDigits:1,maxFractionDigits:2,placeholder:"0.7",class:"w-full"},null,8,["modelValue"]),t[40]||(t[40]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Plus lev = plus slectif dans les rponses",-1))])])]),_:1}),S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[41]||(t[41]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-comments text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Variables Conversationnelles (optionnel)")],-1)])]),content:V(()=>[u("div",Sn,[u("div",null,[t[42]||(t[42]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Prnom du prospect",-1)),S(L(he),{modelValue:v.contact_first_name,"onUpdate:modelValue":t[6]||(t[6]=c=>v.contact_first_name=c),placeholder:"Dfaut : Monsieur / Madame",class:"w-full"},null,8,["modelValue"]),t[43]||(t[43]=u("small",{class:"text-gray-500 text-sm mt-1 block"},' Laissez vide pour utiliser "Monsieur/Madame" automatiquement. ',-1))]),u("div",null,[t[44]||(t[44]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du rfrent (warm calling)",-1)),S(L(he),{modelValue:v.referral_name,"onUpdate:modelValue":t[7]||(t[7]=c=>v.referral_name=c),placeholder:"Nom du rfrent (optionnel)",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[45]||(t[45]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du dcisionnaire",-1)),S(L(he),{modelValue:v.decision_maker_name,"onUpdate:modelValue":t[8]||(t[8]=c=>v.decision_maker_name=c),placeholder:"Nom du dcisionnaire (si connu)",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[46]||(t[46]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Processus mtier cibl",-1)),S(L(he),{modelValue:v.processus_metier,"onUpdate:modelValue":t[9]||(t[9]=c=>v.processus_metier=c),placeholder:"Ex : la gestion locative, le recrutement...",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[47]||(t[47]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Capacit cl  qualifier",-1)),S(L(he),{modelValue:v.key_capability,"onUpdate:modelValue":t[10]||(t[10]=c=>v.key_capability=c),placeholder:"Ex : automatisation, conformit RGPD...",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[48]||(t[48]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Pain point identifi",-1)),S(L(he),{modelValue:v.pain_point_identifie,"onUpdate:modelValue":t[11]||(t[11]=c=>v.pain_point_identifie=c),placeholder:"Ex : Perte de temps sur les tches manuelles",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[49]||(t[49]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Numro d'envoi",-1)),S(L(Pe),{modelValue:v.from_number,"onUpdate:modelValue":t[12]||(t[12]=c=>v.from_number=c),options:T.value,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un numro d'envoi",class:"w-full"},null,8,["modelValue","options"]),t[50]||(t[50]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le numro utilis pour mettre les appels.",-1))]),u("div",null,[t[51]||(t[51]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Fuseau horaire d'appel",-1)),S(L(Pe),{modelValue:v.timezone,"onUpdate:modelValue":t[13]||(t[13]=c=>v.timezone=c),options:ke,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un fuseau horaire",class:"w-full"},null,8,["modelValue"]),t[52]||(t[52]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le fuseau horaire pour la fentre d'appel.",-1))])])]),_:1}),S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[53]||(t[53]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-file-edit text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Script d'appel personnalis (optionnel)")],-1)])]),content:V(()=>[u("div",xn,[t[54]||(t[54]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Script d'exemple",-1)),S(L(He),{modelValue:v.call_script_example,"onUpdate:modelValue":t[14]||(t[14]=c=>v.call_script_example=c),placeholder:"Collez ici votre script d'appel en suivant le template recommand (ACCROCHE, DCOUVERTE, TRANSITION VALEUR, CLOSING)...",rows:"8",class:"w-full"},null,8,["modelValue"]),t[55]||(t[55]=u("small",{class:"text-gray-500 text-sm mt-1 block"}," Optionnel. Si laiss vide, l'agent utilisera un script gnr automatiquement  partir de vos variables. ",-1))])]),_:1}),S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[56]||(t[56]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-bullseye text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Objectifs de Prospection")],-1)])]),content:V(()=>[u("div",null,[t[57]||(t[57]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Slectionnez les objectifs *",-1)),S(L(Pe),{modelValue:v.objectifs,"onUpdate:modelValue":t[15]||(t[15]=c=>v.objectifs=c),options:we,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un objectif",class:"w-full",required:""},null,8,["modelValue"])])]),_:1}),S(L(ye),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[58]||(t[58]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-users text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Contacts  Appeler")],-1)])]),content:V(()=>[u("div",En,[u("div",null,[t[59]||(t[59]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Fichier de contacts (CSV) *",-1)),S(L(ut),{mode:"basic",accept:".csv",maxFileSize:1e7,chooseLabel:"Choisir un fichier CSV",onSelect:l,class:"w-full",disabled:s.value},null,8,["disabled"]),t[60]||(t[60]=u("small",{class:"text-gray-500 text-sm mt-1 block"},[le(" Format CSV attendu : nom, email, tlphone, entreprise (optionnel)"),u("br"),u("span",{class:"text-blue-600"},' Le prfixe "+" sera ajout automatiquement aux numros de tlphone si absent.')],-1))]),r.value.length>0?(z(),$("div",Fn,[u("h3",_n," Contacts chargs ("+te(r.value.length)+") ",1),S(L(xt),{value:r.value.slice(0,10),paginator:r.value.length>10,rows:5,class:"p-datatable-sm",scrollable:!0,scrollHeight:"200px"},{default:V(()=>[S(L(Te),{field:"nom",header:"Nom"}),S(L(Te),{field:"email",header:"Email"}),S(L(Te),{field:"telephone",header:"Tlphone"}),S(L(Te),{field:"entreprise",header:"Entreprise"})]),_:1},8,["value","paginator"]),r.value.length>10?(z(),$("p",An," ... et "+te(r.value.length-10)+" autres contacts ",1)):ee("",!0)])):ee("",!0)])]),_:1}),S(L(ye),{class:"shadow-md border border-gray-200"},{content:V(()=>[u("div",In,[S(L(Ve),{label:"Annuler",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:t[16]||(t[16]=c=>o.$router.push("/")),disabled:s.value},null,8,["disabled"]),S(L(Ve),{type:"submit",label:"Lancer la Campagne",icon:"pi pi-send",loading:s.value,disabled:s.value||r.value.length===0||pe.value>0&&be.value===0,title:pe.value>0&&be.value===0?"Quota mensuel atteint  passez  un plan payant pour lancer plus de campagnes":""},null,8,["loading","disabled","title"])])]),_:1})],32)])])}}};export{Pn as default};
