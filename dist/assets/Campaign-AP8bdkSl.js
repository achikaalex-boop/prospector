import{L as ut,B as Ke,f as nt,m as z,c as Q,o as R,g as dt,e as o,s as Je,b as ee,r as me,D as te,t as de,R as ct,K as pt,k as Le,P as Ge,W as ft,q as ve,I as je,y,A as ke,w as V,a as ne,d as Be,F as Ne,M as Ye,N as mt,E as pe,O as ht,H as x,Q as gt,U as bt,J as Xe}from"./index-DGsneOvh.js";import{a as Se}from"./index-B9ygI19o.js";import{s as be}from"./index-CA8AON5x.js";import{c as vt,s as it,b as Ve,d as fe}from"./index-CZOprvJF.js";import{b as yt,c as kt,d as et,a as wt,s as Oe}from"./index-Das8i3nG.js";var Pe={exports:{}};var Ct=Pe.exports,tt;function St(){return tt||(tt=1,(function(e,a){((r,u)=>{e.exports=u()})(Ct,function r(){var u=typeof self<"u"?self:typeof window<"u"?window:u!==void 0?u:{},h,l=!u.document&&!!u.postMessage,w=u.IS_PAPA_WORKER||!1,B={},Y=0,p={};function D(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var s=Ee(t);s.chunkSize=parseInt(s.chunkSize),t.step||t.chunk||(s.chunkSize=null),this._handle=new _e(s),(this._handle.streamer=this)._config=s}).call(this,n),this.parseChunk=function(t,s){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let C=this._config.newline;C||(c=this._config.quoteChar||'"',C=this._handle.guessLineEndings(t,c)),t=[...t.split(C).slice(d)].join(C)}this.isFirstChunk&&i(this._config.beforeFirstChunk)&&(c=this._config.beforeFirstChunk(t))!==void 0&&(t=c),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+t,c=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=c.meta.cursor,d=(this._finished||(this._partialLine=d.substring(t-this._baseIndex),this._baseIndex=t),c&&c.data&&(this._rowCount+=c.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),w)u.postMessage({results:c,workerId:p.WORKER_ID,finished:d});else if(i(this._config.chunk)&&!s){if(this._config.chunk(c,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=c=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(c.data),this._completeResults.errors=this._completeResults.errors.concat(c.errors),this._completeResults.meta=c.meta),this._completed||!d||!i(this._config.complete)||c&&c.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||c&&c.meta.paused||this._nextChunk(),c}this._halted=!0},this._sendError=function(t){i(this._config.error)?this._config.error(t):w&&this._config.error&&u.postMessage({workerId:p.WORKER_ID,error:t,finished:!1})}}function f(n){var t;(n=n||{}).chunkSize||(n.chunkSize=p.RemoteChunkSize),D.call(this,n),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),l||(t.onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var s,d=this._config.downloadRequestHeaders;for(s in d)t.setRequestHeader(s,d[s])}var c;this._config.chunkSize&&(c=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+c));try{t.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}l&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(s){s=t.statusText||s,this._sendError(new Error(s))}}function re(n){(n=n||{}).chunkSize||(n.chunkSize=p.LocalChunkSize),D.call(this,n);var t,s,d=typeof FileReader<"u";this.stream=function(c){this._input=c,s=c.slice||c.webkitSlice||c.mozSlice,d?((t=new FileReader).onload=_(this._chunkLoaded,this),t.onerror=_(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var c=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),c=s.call(c,this._start,C)),t.readAsText(c,this._config.encoding));d||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(c){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(c.target.result)},this._chunkError=function(){this._sendError(t.error)}}function se(n){var t;D.call(this,n=n||{}),this.stream=function(s){return t=s,this._nextChunk()},this._nextChunk=function(){var s,d;if(!this._finished)return s=this._config.chunkSize,t=s?(d=t.substring(0,s),t.substring(s)):(d=t,""),this._finished=!t,this.parseChunk(d)}}function he(n){D.call(this,n=n||{});var t=[],s=!0,d=!1;this.pause=function(){D.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){D.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(c){this._input=c,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):s=!0},this._streamData=_(function(c){try{t.push(typeof c=="string"?c:c.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(C){this._streamError(C)}},this),this._streamError=_(function(c){this._streamCleanUp(),this._sendError(c)},this),this._streamEnd=_(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=_(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function _e(n){var t,s,d,c,C=Math.pow(2,53),q=-C,U=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,$=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,g=this,I=0,b=0,P=!1,k=!1,E=[],m={data:[],errors:[],meta:{}};function H(F){return n.skipEmptyLines==="greedy"?F.join("").trim()==="":F.length===1&&F[0].length===0}function W(){if(m&&d&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),d=!1),n.skipEmptyLines&&(m.data=m.data.filter(function(v){return!H(v)})),Z()){let v=function(N,K){i(n.transformHeader)&&(N=n.transformHeader(N,K)),E.push(N)};if(m)if(Array.isArray(m.data[0])){for(var F=0;Z()&&F<m.data.length;F++)m.data[F].forEach(v);m.data.splice(0,1)}else m.data.forEach(v)}function L(v,N){for(var K=n.header?{}:[],O=0;O<v.length;O++){var T=O,A=v[O],A=((ae,S)=>(M=>(n.dynamicTypingFunction&&n.dynamicTyping[M]===void 0&&(n.dynamicTyping[M]=n.dynamicTypingFunction(M)),(n.dynamicTyping[M]||n.dynamicTyping)===!0))(ae)?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&((M=>{if(U.test(M)&&(M=parseFloat(M),q<M&&M<C))return 1})(S)?parseFloat(S):$.test(S)?new Date(S):S===""?null:S):S)(T=n.header?O>=E.length?"__parsed_extra":E[O]:T,A=n.transform?n.transform(A,T):A);T==="__parsed_extra"?(K[T]=K[T]||[],K[T].push(A)):K[T]=A}return n.header&&(O>E.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+O,b+N):O<E.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+O,b+N)),K}var j;m&&(n.header||n.dynamicTyping||n.transform)&&(j=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(L),j=m.data.length):m.data=L(m.data,0),n.header&&m.meta&&(m.meta.fields=E),b+=j)}function Z(){return n.header&&E.length===0}function ie(F,L,j,v){F={type:F,code:L,message:j},v!==void 0&&(F.row=v),m.errors.push(F)}i(n.step)&&(c=n.step,n.step=function(F){m=F,Z()?W():(W(),m.data.length!==0&&(I+=F.data.length,n.preview&&I>n.preview?s.abort():(m.data=m.data[0],c(m,g))))}),this.parse=function(F,L,j){var v=n.quoteChar||'"',v=(n.newline||(n.newline=this.guessLineEndings(F,v)),d=!1,n.delimiter?i(n.delimiter)&&(n.delimiter=n.delimiter(F),m.meta.delimiter=n.delimiter):((v=((N,K,O,T,A)=>{var ae,S,M,ge;A=A||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var we=0;we<A.length;we++){for(var le,Fe=A[we],G=0,oe=0,J=0,X=(M=void 0,new xe({comments:T,delimiter:Fe,newline:K,preview:10}).parse(N)),ce=0;ce<X.data.length;ce++)O&&H(X.data[ce])?J++:(le=X.data[ce].length,oe+=le,M===void 0?M=le:0<le&&(G+=Math.abs(le-M),M=le));0<X.data.length&&(oe/=X.data.length-J),(S===void 0||G<=S)&&(ge===void 0||ge<oe)&&1.99<oe&&(S=G,ae=Fe,ge=oe)}return{successful:!!(n.delimiter=ae),bestDelimiter:ae}})(F,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=v.bestDelimiter:(d=!0,n.delimiter=p.DefaultDelimiter),m.meta.delimiter=n.delimiter),Ee(n));return n.preview&&n.header&&v.preview++,t=F,s=new xe(v),m=s.parse(t,L,j),W(),P?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return P},this.pause=function(){P=!0,s.abort(),t=i(n.chunk)?"":t.substring(s.getCharIndex())},this.resume=function(){g.streamer._halted?(P=!1,g.streamer.parseChunk(t,!0)):setTimeout(g.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,s.abort(),m.meta.aborted=!0,i(n.complete)&&n.complete(m),t=""},this.guessLineEndings=function(N,v){N=N.substring(0,1048576);var v=new RegExp(ye(v)+"([^]*?)"+ye(v),"gm"),j=(N=N.replace(v,"")).split("\r"),v=N.split(`
`),N=1<v.length&&v[0].length<j[0].length;if(j.length===1||N)return`
`;for(var K=0,O=0;O<j.length;O++)j[O][0]===`
`&&K++;return K>=j.length/2?`\r
`:"\r"}}function ye(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xe(n){var t=(n=n||{}).delimiter,s=n.newline,d=n.comments,c=n.step,C=n.preview,q=n.fastMode,U=null,$=!1,g=n.quoteChar==null?'"':n.quoteChar,I=g;if(n.escapeChar!==void 0&&(I=n.escapeChar),(typeof t!="string"||-1<p.BAD_DELIMITERS.indexOf(t))&&(t=","),d===t)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<p.BAD_DELIMITERS.indexOf(d))&&(d=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var b=0,P=!1;this.parse=function(k,E,m){if(typeof k!="string")throw new Error("Input must be a string");var H=k.length,W=t.length,Z=s.length,ie=d.length,F=i(c),L=[],j=[],v=[],N=b=0;if(!k)return G();if(q||q!==!1&&k.indexOf(g)===-1){for(var K=k.split(s),O=0;O<K.length;O++){if(v=K[O],b+=v.length,O!==K.length-1)b+=s.length;else if(m)return G();if(!d||v.substring(0,ie)!==d){if(F){if(L=[],ge(v.split(t)),oe(),P)return G()}else ge(v.split(t));if(C&&C<=O)return L=L.slice(0,C),G(!0)}}return G()}for(var T=k.indexOf(t,b),A=k.indexOf(s,b),ae=new RegExp(ye(I)+ye(g),"g"),S=k.indexOf(g,b);;)if(k[b]===g)for(S=b,b++;;){if((S=k.indexOf(g,S+1))===-1)return m||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:L.length,index:b}),le();if(S===H-1)return le(k.substring(b,S).replace(ae,g));if(g===I&&k[S+1]===I)S++;else if(g===I||S===0||k[S-1]!==I){T!==-1&&T<S+1&&(T=k.indexOf(t,S+1));var M=we((A=A!==-1&&A<S+1?k.indexOf(s,S+1):A)===-1?T:Math.min(T,A));if(k.substr(S+1+M,W)===t){v.push(k.substring(b,S).replace(ae,g)),k[b=S+1+M+W]!==g&&(S=k.indexOf(g,b)),T=k.indexOf(t,b),A=k.indexOf(s,b);break}if(M=we(A),k.substring(S+1+M,S+1+M+Z)===s){if(v.push(k.substring(b,S).replace(ae,g)),Fe(S+1+M+Z),T=k.indexOf(t,b),S=k.indexOf(g,b),F&&(oe(),P))return G();if(C&&L.length>=C)return G(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:L.length,index:b}),S++}}else if(d&&v.length===0&&k.substring(b,b+ie)===d){if(A===-1)return G();b=A+Z,A=k.indexOf(s,b),T=k.indexOf(t,b)}else if(T!==-1&&(T<A||A===-1))v.push(k.substring(b,T)),b=T+W,T=k.indexOf(t,b);else{if(A===-1)break;if(v.push(k.substring(b,A)),Fe(A+Z),F&&(oe(),P))return G();if(C&&L.length>=C)return G(!0)}return le();function ge(J){L.push(J),N=b}function we(J){var X=0;return X=J!==-1&&(J=k.substring(S+1,J))&&J.trim()===""?J.length:X}function le(J){return m||(J===void 0&&(J=k.substring(b)),v.push(J),b=H,ge(v),F&&oe()),G()}function Fe(J){b=J,ge(v),v=[],A=k.indexOf(s,b)}function G(J){if(n.header&&!E&&L.length&&!$){var X=L[0],ce=Object.create(null),Me=new Set(X);let Qe=!1;for(let Ce=0;Ce<X.length;Ce++){let ue=X[Ce];if(ce[ue=i(n.transformHeader)?n.transformHeader(ue,Ce):ue]){let Ae,Ze=ce[ue];for(;Ae=ue+"_"+Ze,Ze++,Me.has(Ae););Me.add(Ae),X[Ce]=Ae,ce[ue]++,Qe=!0,(U=U===null?{}:U)[Ae]=ue}else ce[ue]=1,X[Ce]=ue;Me.add(ue)}Qe&&console.warn("Duplicate headers found and renamed."),$=!0}return{data:L,errors:j,meta:{delimiter:t,linebreak:s,aborted:P,truncated:!!J,cursor:N+(E||0),renamedHeaders:U}}}function oe(){c(G()),L=[],j=[]}},this.abort=function(){P=!0},this.getCharIndex=function(){return b}}function Ue(n){var t=n.data,s=B[t.workerId],d=!1;if(t.error)s.userError(t.error,t.file);else if(t.results&&t.results.data){var c={abort:function(){d=!0,ze(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:De,resume:De};if(i(s.userStep)){for(var C=0;C<t.results.data.length&&(s.userStep({data:t.results.data[C],errors:t.results.errors,meta:t.results.meta},c),!d);C++);delete t.results}else i(s.userChunk)&&(s.userChunk(t.results,c,t.file),delete t.results)}t.finished&&!d&&ze(t.workerId,t.results)}function ze(n,t){var s=B[n];i(s.userComplete)&&s.userComplete(t),s.terminate(),delete B[n]}function De(){throw new Error("Not implemented.")}function Ee(n){if(typeof n!="object"||n===null)return n;var t,s=Array.isArray(n)?[]:{};for(t in n)s[t]=Ee(n[t]);return s}function _(n,t){return function(){n.apply(t,arguments)}}function i(n){return typeof n=="function"}return p.parse=function(n,t){var s=(t=t||{}).dynamicTyping||!1;if(i(s)&&(t.dynamicTypingFunction=s,s={}),t.dynamicTyping=s,t.transform=!!i(t.transform)&&t.transform,!t.worker||!p.WORKERS_SUPPORTED)return s=null,p.NODE_STREAM_INPUT,typeof n=="string"?(n=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(n),s=new(t.download?f:se)(t)):n.readable===!0&&i(n.read)&&i(n.on)?s=new he(t):(u.File&&n instanceof File||n instanceof Object)&&(s=new re(t)),s.stream(n);(s=(()=>{var d;return!!p.WORKERS_SUPPORTED&&(d=(()=>{var c=u.URL||u.webkitURL||null,C=r.toString();return p.BLOB_URL||(p.BLOB_URL=c.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(d=new u.Worker(d)).onmessage=Ue,d.id=Y++,B[d.id]=d)})()).userStep=t.step,s.userChunk=t.chunk,s.userComplete=t.complete,s.userError=t.error,t.step=i(t.step),t.chunk=i(t.chunk),t.complete=i(t.complete),t.error=i(t.error),delete t.worker,s.postMessage({input:n,config:t,workerId:s.id})},p.unparse=function(n,t){var s=!1,d=!0,c=",",C=`\r
`,q='"',U=q+q,$=!1,g=null,I=!1,b=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||p.BAD_DELIMITERS.filter(function(E){return t.delimiter.indexOf(E)!==-1}).length||(c=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(s=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||($=t.skipEmptyLines),typeof t.newline=="string"&&(C=t.newline),typeof t.quoteChar=="string"&&(q=t.quoteChar),typeof t.header=="boolean"&&(d=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");g=t.columns}t.escapeChar!==void 0&&(U=t.escapeChar+q),t.escapeFormulae instanceof RegExp?I=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(I=/^[=+\-@\t\r].*$/)}})(),new RegExp(ye(q),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return P(null,n,$);if(typeof n[0]=="object")return P(g||Object.keys(n[0]),n,$)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||g),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),P(n.fields||[],n.data||[],$);throw new Error("Unable to serialize unrecognized input");function P(E,m,H){var W="",Z=(typeof E=="string"&&(E=JSON.parse(E)),typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(E)&&0<E.length),ie=!Array.isArray(m[0]);if(Z&&d){for(var F=0;F<E.length;F++)0<F&&(W+=c),W+=k(E[F],F);0<m.length&&(W+=C)}for(var L=0;L<m.length;L++){var j=(Z?E:m[L]).length,v=!1,N=Z?Object.keys(m[L]).length===0:m[L].length===0;if(H&&!Z&&(v=H==="greedy"?m[L].join("").trim()==="":m[L].length===1&&m[L][0].length===0),H==="greedy"&&Z){for(var K=[],O=0;O<j;O++){var T=ie?E[O]:O;K.push(m[L][T])}v=K.join("").trim()===""}if(!v){for(var A=0;A<j;A++){0<A&&!N&&(W+=c);var ae=Z&&ie?E[A]:A;W+=k(m[L][ae],A)}L<m.length-1&&(!H||0<j&&!N)&&(W+=C)}}return W}function k(E,m){var H,W;return E==null?"":E.constructor===Date?JSON.stringify(E).slice(1,25):(W=!1,I&&typeof E=="string"&&I.test(E)&&(E="'"+E,W=!0),H=E.toString().replace(b,U),(W=W||s===!0||typeof s=="function"&&s(E,m)||Array.isArray(s)&&s[m]||((Z,ie)=>{for(var F=0;F<ie.length;F++)if(-1<Z.indexOf(ie[F]))return!0;return!1})(H,p.BAD_DELIMITERS)||-1<H.indexOf(c)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?q+H+q:H)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!l&&!!u.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=xe,p.ParserHandle=_e,p.NetworkStreamer=f,p.FileStreamer=re,p.StringStreamer=se,p.ReadableStreamStreamer=he,u.jQuery&&((h=u.jQuery).fn.parse=function(n){var t=n.config||{},s=[];return this.each(function(C){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&u.FileReader)||!this.files||this.files.length===0)return!0;for(var q=0;q<this.files.length;q++)s.push({file:this.files[q],inputElem:this,instanceConfig:h.extend({},t)})}),d(),this;function d(){if(s.length===0)i(n.complete)&&n.complete();else{var C,q,U,$,g=s[0];if(i(n.before)){var I=n.before(g.file,g.inputElem);if(typeof I=="object"){if(I.action==="abort")return C="AbortError",q=g.file,U=g.inputElem,$=I.reason,void(i(n.error)&&n.error({name:C},q,U,$));if(I.action==="skip")return void c();typeof I.config=="object"&&(g.instanceConfig=h.extend(g.instanceConfig,I.config))}else if(I==="skip")return void c()}var b=g.instanceConfig.complete;g.instanceConfig.complete=function(P){i(b)&&b(P,g.file,g.inputElem),c()},p.parse(g.file,g.instanceConfig)}}function c(){s.splice(0,1),d()}}),w&&(u.onmessage=function(n){n=n.data,p.WORKER_ID===void 0&&n&&(p.WORKER_ID=n.workerId),typeof n.input=="string"?u.postMessage({workerId:p.WORKER_ID,results:p.parse(n.input,n.config),finished:!0}):(u.File&&n.input instanceof File||n.input instanceof Object)&&(n=p.parse(n.input,n.config))&&u.postMessage({workerId:p.WORKER_ID,results:n,finished:!0})}),(f.prototype=Object.create(D.prototype)).constructor=f,(re.prototype=Object.create(D.prototype)).constructor=re,(se.prototype=Object.create(se.prototype)).constructor=se,(he.prototype=Object.create(D.prototype)).constructor=he,p})})(Pe)),Pe.exports}var _t=St();const xt=ut(_t);var Et=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,Ft={root:function(a){var r=a.instance,u=a.props;return["p-textarea p-component",{"p-filled":r.$filled,"p-textarea-resizable ":u.autoResize,"p-textarea-sm p-inputfield-sm":u.size==="small","p-textarea-lg p-inputfield-lg":u.size==="large","p-invalid":r.$invalid,"p-variant-filled":r.$variant==="filled","p-textarea-fluid":r.$fluid}]}},At=Ke.extend({name:"textarea",style:Et,classes:Ft}),It={name:"BaseTextarea",extends:vt,props:{autoResize:Boolean},style:At,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function Re(e){"@babel/helpers - typeof";return Re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Re(e)}function Bt(e,a,r){return(a=Lt(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Lt(e){var a=Rt(e,"string");return Re(a)=="symbol"?a:a+""}function Rt(e,a){if(Re(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var u=r.call(e,a);if(Re(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var qe={name:"Textarea",extends:It,inheritAttrs:!1,observer:null,mounted:function(){var a=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){a.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var a=this.$el.style.height,r=parseInt(a)||0,u=this.$el.scrollHeight,h=!r||u>r,l=r&&u<r;l?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):h&&(this.$el.style.height="".concat(u,"px"))}},onInput:function(a){this.autoResize&&this.resize(),this.writeValue(a.target.value,a)}},computed:{attrs:function(){return z(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return nt(Bt({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},zt=["value","name","disabled","aria-invalid","data-p"];function Dt(e,a,r,u,h,l){return R(),Q("textarea",z({class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.invalid||void 0,"data-p":l.dataP,onInput:a[0]||(a[0]=function(){return l.onInput&&l.onInput.apply(l,arguments)})},l.attrs),null,16,zt)}qe.render=Dt;var Ie={name:"Dropdown",extends:yt,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},at={name:"UploadIcon",extends:dt};function Ot(e){return Ut(e)||Pt(e)||Vt(e)||Tt()}function Tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vt(e,a){if(e){if(typeof e=="string")return We(e,a);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,a):void 0}}function Pt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ut(e){if(Array.isArray(e))return We(e)}function We(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,u=Array(a);r<a;r++)u[r]=e[r];return u}function Mt(e,a,r,u,h,l){return R(),Q("svg",z({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Ot(a[0]||(a[0]=[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z",fill:"currentColor"},null,-1)])),16)}at.render=Mt;var $t=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,jt={root:function(a){var r=a.instance;return["p-progressbar p-component",{"p-progressbar-determinate":r.determinate,"p-progressbar-indeterminate":r.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},Nt=Ke.extend({name:"progressbar",style:$t,classes:jt}),qt={name:"BaseProgressBar",extends:Je,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:Nt,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},rt={name:"ProgressBar",extends:qt,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return nt({determinate:this.determinate,indeterminate:this.indeterminate})}}},Wt=["aria-valuenow","data-p"],Ht=["data-p"],Kt=["data-p"],Jt=["data-p"];function Qt(e,a,r,u,h,l){return R(),Q("div",z({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":l.dataP},e.ptmi("root")),[l.determinate?(R(),Q("div",z({key:0,class:e.cx("value"),style:l.progressStyle,"data-p":l.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(R(),Q("div",z({key:0,class:e.cx("label"),"data-p":l.dataP},e.ptm("label")),[me(e.$slots,"default",{},function(){return[te(de(e.value+"%"),1)]})],16,Kt)):ee("",!0)],16,Ht)):l.indeterminate?(R(),Q("div",z({key:1,class:e.cx("value"),"data-p":l.dataP},e.ptm("value")),null,16,Jt)):ee("",!0)],16,Wt)}rt.render=Qt;var Zt=`
    .p-fileupload input[type='file'] {
        display: none;
    }

    .p-fileupload-advanced {
        border: 1px solid dt('fileupload.border.color');
        border-radius: dt('fileupload.border.radius');
        background: dt('fileupload.background');
        color: dt('fileupload.color');
    }

    .p-fileupload-header {
        display: flex;
        align-items: center;
        padding: dt('fileupload.header.padding');
        background: dt('fileupload.header.background');
        color: dt('fileupload.header.color');
        border-style: solid;
        border-width: dt('fileupload.header.border.width');
        border-color: dt('fileupload.header.border.color');
        border-radius: dt('fileupload.header.border.radius');
        gap: dt('fileupload.header.gap');
    }

    .p-fileupload-content {
        border: 1px solid transparent;
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.content.gap');
        transition: border-color dt('fileupload.transition.duration');
        padding: dt('fileupload.content.padding');
    }

    .p-fileupload-content .p-progressbar {
        width: 100%;
        height: dt('fileupload.progressbar.height');
    }

    .p-fileupload-file-list {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.filelist.gap');
    }

    .p-fileupload-file {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding: dt('fileupload.file.padding');
        border-block-end: 1px solid dt('fileupload.file.border.color');
        gap: dt('fileupload.file.gap');
    }

    .p-fileupload-file:last-child {
        border-block-end: 0;
    }

    .p-fileupload-file-info {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.file.info.gap');
    }

    .p-fileupload-file-thumbnail {
        flex-shrink: 0;
    }

    .p-fileupload-file-actions {
        margin-inline-start: auto;
    }

    .p-fileupload-highlight {
        border: 1px dashed dt('fileupload.content.highlight.border.color');
    }

    .p-fileupload-basic .p-message {
        margin-block-end: dt('fileupload.basic.gap');
    }

    .p-fileupload-basic-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: dt('fileupload.basic.gap');
    }
`,Gt={root:function(a){var r=a.props;return["p-fileupload p-fileupload-".concat(r.mode," p-component")]},header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button",basicContent:"p-fileupload-basic-content"},Yt=Ke.extend({name:"fileupload",style:Zt,classes:Gt}),Xt={name:"BaseFileUpload",extends:Je,props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:void 0},uploadIcon:{type:String,default:void 0},cancelIcon:{type:String,default:void 0},style:null,class:null,chooseButtonProps:{type:null,default:null},uploadButtonProps:{type:Object,default:function(){return{severity:"secondary"}}},cancelButtonProps:{type:Object,default:function(){return{severity:"secondary"}}}},style:Yt,provide:function(){return{$pcFileUpload:this,$parentInstance:this}}},st={name:"FileContent",hostName:"FileUpload",extends:Je,emits:["remove"],props:{files:{type:Array,default:function(){return[]}},badgeSeverity:{type:String,default:"warn"},badgeValue:{type:String,default:null},previewWidth:{type:Number,default:50},templates:{type:null,default:null}},methods:{formatSize:function(a){var r,u=1024,h=3,l=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(l[0]);var w=Math.floor(Math.log(a)/Math.log(u)),B=parseFloat((a/Math.pow(u,w)).toFixed(h));return"".concat(B," ").concat(l[w])}},components:{Button:Le,Badge:pt,TimesIcon:it}},en=["alt","src","width"];function tn(e,a,r,u,h,l){var w=ve("Badge"),B=ve("TimesIcon"),Y=ve("Button");return R(!0),Q(Ne,null,je(r.files,function(p,D){return R(),Q("div",z({key:p.name+p.type+p.size,class:e.cx("file")},{ref_for:!0},e.ptm("file")),[o("img",z({role:"presentation",class:e.cx("fileThumbnail"),alt:p.name,src:p.objectURL,width:r.previewWidth},{ref_for:!0},e.ptm("fileThumbnail")),null,16,en),o("div",z({class:e.cx("fileInfo")},{ref_for:!0},e.ptm("fileInfo")),[o("div",z({class:e.cx("fileName")},{ref_for:!0},e.ptm("fileName")),de(p.name),17),o("span",z({class:e.cx("fileSize")},{ref_for:!0},e.ptm("fileSize")),de(l.formatSize(p.size)),17)],16),y(w,{value:r.badgeValue,class:ke(e.cx("pcFileBadge")),severity:r.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcFileBadge")},null,8,["value","class","severity","unstyled","pt"]),o("div",z({class:e.cx("fileActions")},{ref_for:!0},e.ptm("fileActions")),[y(Y,{onClick:function(re){return e.$emit("remove",D)},text:"",rounded:"",severity:"danger",class:ke(e.cx("pcFileRemoveButton")),unstyled:e.unstyled,pt:e.ptm("pcFileRemoveButton")},{icon:V(function(f){return[r.templates.fileremoveicon?(R(),ne(Be(r.templates.fileremoveicon),{key:0,class:ke(f.class),file:p,index:D},null,8,["class","file","index"])):(R(),ne(B,z({key:1,class:f.class,"aria-hidden":"true"},{ref_for:!0},e.ptm("pcFileRemoveButton").icon),null,16,["class"]))]}),_:2},1032,["onClick","class","unstyled","pt"])],16)],16)}),128)}st.render=tn;function $e(e){return rn(e)||an(e)||lt(e)||nn()}function nn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rn(e){if(Array.isArray(e))return He(e)}function Te(e,a){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=lt(e))||a){r&&(e=r);var u=0,h=function(){};return{s:h,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(p){throw p},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,w=!0,B=!1;return{s:function(){r=r.call(e)},n:function(){var p=r.next();return w=p.done,p},e:function(p){B=!0,l=p},f:function(){try{w||r.return==null||r.return()}finally{if(B)throw l}}}}function lt(e,a){if(e){if(typeof e=="string")return He(e,a);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,a):void 0}}function He(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,u=Array(a);r<a;r++)u[r]=e[r];return u}var ot={name:"FileUpload",extends:Xt,inheritAttrs:!1,emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove","remove-uploaded-file"],duplicateIEEvent:!1,data:function(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null,uploadedFiles:[]}},methods:{upload:function(){this.hasFiles&&this.uploader()},onBasicUploaderClick:function(a){a.button===0&&this.$refs.fileInput.click()},onFileSelect:function(a){if(a.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.isBasic&&this.hasFiles&&(this.files=[]),this.messages=[],this.files=this.files||[];var r=a.dataTransfer?a.dataTransfer.files:a.target.files,u=Te(r),h;try{for(u.s();!(h=u.n()).done;){var l=h.value;!this.isFileSelected(l)&&!this.isFileLimitExceeded()&&this.validate(l)&&(this.isImage(l)&&(l.objectURL=window.URL.createObjectURL(l)),this.files.push(l))}}catch(w){u.e(w)}finally{u.f()}this.$emit("select",{originalEvent:a,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.uploader(),a.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose:function(){this.$refs.fileInput.click()},uploader:function(){var a=this;if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{var r=new XMLHttpRequest,u=new FormData;this.$emit("before-upload",{xhr:r,formData:u});var h=Te(this.files),l;try{for(h.s();!(l=h.n()).done;){var w=l.value;u.append(this.name,w,w.name)}}catch(B){h.e(B)}finally{h.f()}r.upload.addEventListener("progress",function(B){B.lengthComputable&&(a.progress=Math.round(B.loaded*100/B.total)),a.$emit("progress",{originalEvent:B,progress:a.progress})}),r.onreadystatechange=function(){if(r.readyState===4){if(a.progress=0,r.status>=200&&r.status<300){var B;a.fileLimit&&(a.uploadedFileCount+=a.files.length),a.$emit("upload",{xhr:r,files:a.files}),(B=a.uploadedFiles).push.apply(B,$e(a.files))}else a.$emit("error",{xhr:r,files:a.files});a.clear()}},this.url&&(r.open("POST",this.url,!0),this.$emit("before-send",{xhr:r,formData:u}),r.withCredentials=this.withCredentials,r.send(u))}},clear:function(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus:function(){this.focused=!0},onBlur:function(){this.focused=!1},isFileSelected:function(a){if(this.files&&this.files.length){var r=Te(this.files),u;try{for(r.s();!(u=r.n()).done;){var h=u.value;if(h.name+h.type+h.size===a.name+a.type+a.size)return!0}}catch(l){r.e(l)}finally{r.f()}}return!1},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},validate:function(a){return this.accept&&!this.isFileTypeValid(a)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",a.name).replace("{1}",this.accept)),!1):this.maxFileSize&&a.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",a.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid:function(a){var r=this.accept.split(",").map(function(B){return B.trim()}),u=Te(r),h;try{for(u.s();!(h=u.n()).done;){var l=h.value,w=this.isWildcard(l)?this.getTypeClass(a.type)===this.getTypeClass(l):a.type==l||this.getFileExtension(a).toLowerCase()===l.toLowerCase();if(w)return!0}}catch(B){u.e(B)}finally{u.f()}return!1},getTypeClass:function(a){return a.substring(0,a.indexOf("/"))},isWildcard:function(a){return a.indexOf("*")!==-1},getFileExtension:function(a){return"."+a.name.split(".").pop()},isImage:function(a){return/^image\//.test(a.type)},onDragEnter:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(a.stopPropagation(),a.preventDefault())},onDragOver:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(!this.isUnstyled&&ft(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!0),a.stopPropagation(),a.preventDefault())},onDragLeave:function(){this.disabled||(!this.isUnstyled&&Ge(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1))},onDrop:function(a){if(!this.disabled){!this.isUnstyled&&Ge(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1),a.stopPropagation(),a.preventDefault();var r=a.dataTransfer?a.dataTransfer.files:a.target.files,u=this.multiple||r&&r.length===1;u&&this.onFileSelect(a)}},remove:function(a){this.clearInputElement();var r=this.files.splice(a,1)[0];this.files=$e(this.files),this.$emit("remove",{file:r,files:this.files})},removeUploadedFile:function(a){var r=this.uploadedFiles.splice(a,1)[0];this.uploadedFiles=$e(this.uploadedFiles),this.$emit("remove-uploaded-file",{file:r,files:this.uploadedFiles})},clearInputElement:function(){this.$refs.fileInput.value=""},clearIEInput:function(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize:function(a){var r,u=1024,h=3,l=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(l[0]);var w=Math.floor(Math.log(a)/Math.log(u)),B=parseFloat((a/Math.pow(u,w)).toFixed(h));return"".concat(B," ").concat(l[w])},isFileLimitExceeded:function(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit:function(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose:function(){this.messages=null}},computed:{isAdvanced:function(){return this.mode==="advanced"},isBasic:function(){return this.mode==="basic"},chooseButtonClass:function(){return[this.cx("pcChooseButton"),this.class]},basicFileChosenLabel:function(){var a;if(this.auto)return this.chooseButtonLabel;if(this.hasFiles){var r;return this.files&&this.files.length===1?this.files[0].name:(r=this.$primevue.config.locale)===null||r===void 0||(r=r.fileChosenMessage)===null||r===void 0?void 0:r.replace("{0}",this.files.length)}return((a=this.$primevue.config.locale)===null||a===void 0?void 0:a.noFileChosenMessage)||""},hasFiles:function(){return this.files&&this.files.length>0},hasUploadedFiles:function(){return this.uploadedFiles&&this.uploadedFiles.length>0},chooseDisabled:function(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled:function(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled:function(){return this.disabled||!this.hasFiles},chooseButtonLabel:function(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel:function(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel:function(){return this.cancelLabel||this.$primevue.config.locale.cancel},completedLabel:function(){return this.$primevue.config.locale.completed},pendingLabel:function(){return this.$primevue.config.locale.pending}},components:{Button:Le,ProgressBar:rt,Message:Ve,FileContent:st,PlusIcon:kt,UploadIcon:at,TimesIcon:it},directives:{ripple:ct}},sn=["multiple","accept","disabled"],ln=["accept","disabled","multiple"];function on(e,a,r,u,h,l){var w=ve("Button"),B=ve("ProgressBar"),Y=ve("Message"),p=ve("FileContent");return l.isAdvanced?(R(),Q("div",z({key:0,class:e.cx("root")},e.ptmi("root")),[o("input",z({ref:"fileInput",type:"file",onChange:a[0]||(a[0]=function(){return l.onFileSelect&&l.onFileSelect.apply(l,arguments)}),multiple:e.multiple,accept:e.accept,disabled:l.chooseDisabled},e.ptm("input")),null,16,sn),o("div",z({class:e.cx("header")},e.ptm("header")),[me(e.$slots,"header",{files:h.files,uploadedFiles:h.uploadedFiles,chooseCallback:l.choose,uploadCallback:l.uploader,clearCallback:l.clear},function(){return[y(w,z({label:l.chooseButtonLabel,class:l.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onClick:l.choose,onKeydown:Ye(l.choose,["enter"]),onFocus:l.onFocus,onBlur:l.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:V(function(D){return[me(e.$slots,"chooseicon",{},function(){return[(R(),ne(Be(e.chooseIcon?"span":"PlusIcon"),z({class:[D.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onClick","onKeydown","onFocus","onBlur","pt"]),e.showUploadButton?(R(),ne(w,z({key:0,class:e.cx("pcUploadButton"),label:l.uploadButtonLabel,onClick:l.uploader,disabled:l.uploadDisabled,unstyled:e.unstyled},e.uploadButtonProps,{pt:e.ptm("pcUploadButton")}),{icon:V(function(D){return[me(e.$slots,"uploadicon",{},function(){return[(R(),ne(Be(e.uploadIcon?"span":"UploadIcon"),z({class:[D.class,e.uploadIcon],"aria-hidden":"true"},e.ptm("pcUploadButton").icon,{"data-pc-section":"uploadbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ee("",!0),e.showCancelButton?(R(),ne(w,z({key:1,class:e.cx("pcCancelButton"),label:l.cancelButtonLabel,onClick:l.clear,disabled:l.cancelDisabled,unstyled:e.unstyled},e.cancelButtonProps,{pt:e.ptm("pcCancelButton")}),{icon:V(function(D){return[me(e.$slots,"cancelicon",{},function(){return[(R(),ne(Be(e.cancelIcon?"span":"TimesIcon"),z({class:[D.class,e.cancelIcon],"aria-hidden":"true"},e.ptm("pcCancelButton").icon,{"data-pc-section":"cancelbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ee("",!0)]})],16),o("div",z({ref:"content",class:e.cx("content"),onDragenter:a[1]||(a[1]=function(){return l.onDragEnter&&l.onDragEnter.apply(l,arguments)}),onDragover:a[2]||(a[2]=function(){return l.onDragOver&&l.onDragOver.apply(l,arguments)}),onDragleave:a[3]||(a[3]=function(){return l.onDragLeave&&l.onDragLeave.apply(l,arguments)}),onDrop:a[4]||(a[4]=function(){return l.onDrop&&l.onDrop.apply(l,arguments)})},e.ptm("content"),{"data-p-highlight":!1}),[me(e.$slots,"content",{files:h.files,uploadedFiles:h.uploadedFiles,removeUploadedFileCallback:l.removeUploadedFile,removeFileCallback:l.remove,progress:h.progress,messages:h.messages},function(){return[l.hasFiles?(R(),ne(B,{key:0,value:h.progress,showValue:!1,unstyled:e.unstyled,pt:e.ptm("pcProgressbar")},null,8,["value","unstyled","pt"])):ee("",!0),(R(!0),Q(Ne,null,je(h.messages,function(D){return R(),ne(Y,{key:D,severity:"error",onClose:l.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:V(function(){return[te(de(D),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),l.hasFiles?(R(),Q("div",{key:1,class:ke(e.cx("fileList"))},[y(p,{files:h.files,onRemove:l.remove,badgeValue:l.pendingLabel,previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ee("",!0),l.hasUploadedFiles?(R(),Q("div",{key:2,class:ke(e.cx("fileList"))},[y(p,{files:h.uploadedFiles,onRemove:l.removeUploadedFile,badgeValue:l.completedLabel,badgeSeverity:"success",previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ee("",!0)]}),e.$slots.empty&&!l.hasFiles&&!l.hasUploadedFiles?(R(),Q("div",mt(z({key:0},e.ptm("empty"))),[me(e.$slots,"empty")],16)):ee("",!0)],16)],16)):l.isBasic?(R(),Q("div",z({key:1,class:e.cx("root")},e.ptmi("root")),[(R(!0),Q(Ne,null,je(h.messages,function(D){return R(),ne(Y,{key:D,severity:"error",onClose:l.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:V(function(){return[te(de(D),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),o("div",z({class:e.cx("basicContent")},e.ptm("basicContent")),[y(w,z({label:l.chooseButtonLabel,class:l.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onMouseup:l.onBasicUploaderClick,onKeydown:Ye(l.choose,["enter"]),onFocus:l.onFocus,onBlur:l.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:V(function(D){return[me(e.$slots,"chooseicon",{},function(){return[(R(),ne(Be(e.chooseIcon?"span":"PlusIcon"),z({class:[D.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onMouseup","onKeydown","onFocus","onBlur","pt"]),e.auto?ee("",!0):me(e.$slots,"filelabel",{key:0,class:ke(e.cx("filelabel")),files:h.files},function(){return[o("span",{class:ke(e.cx("filelabel"))},de(l.basicFileChosenLabel),3)]}),o("input",z({ref:"fileInput",type:"file",accept:e.accept,disabled:e.disabled,multiple:e.multiple,onChange:a[5]||(a[5]=function(){return l.onFileSelect&&l.onFileSelect.apply(l,arguments)}),onFocus:a[6]||(a[6]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:a[7]||(a[7]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)})},e.ptm("input")),null,16,ln)],16)],16)):ee("",!0)}ot.render=on;const un={class:"min-h-screen bg-gray-50 p-6"},dn={class:"max-w-5xl mx-auto"},cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pn={class:"md:col-span-2"},fn={class:"flex flex-col sm:flex-row justify-between gap-3"},mn={class:"flex items-center gap-3"},hn={class:"md:col-span-2"},gn={class:"md:col-span-2"},bn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},vn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},yn={class:"space-y-2"},kn={class:"space-y-4"},wn={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},Cn={class:"font-semibold text-gray-900 mb-3"},Sn={key:0,class:"text-sm text-gray-600 mt-2 text-center"},_n={class:"flex justify-end gap-3"},Bn={__name:"Campaign",setup(e){const a=bt(),r=pe([]),u=pe(""),h=pe(""),l=pe(!1);pe("");const w=async(_,i={})=>{const n={ts:new Date().toISOString(),message:_,meta:i};try{const t=`${window.location.origin}/client-log`;await Se.post(t,n,{timeout:3e3})}catch{try{const s=`${window.location.origin}/client-log`;await Se.post(s,n,{timeout:3e3})}catch(s){try{console.log("sendServerLog error (both attempts)",s)}catch{}}}try{console.log(`${n.ts} - ${n.message}`)}catch{}};try{window.__sendClientLog=(_="client-log test ping")=>w(_,{test:!0})}catch{}const B=["Immobilier","Tech","Finance","Conseil","Autre"],Y=[{label:"United States",value:"+14752906147"},{label:"Switzerland",value:"+41234567890"}],p=[{label:"Africa/Porto-Novo",value:"Africa/Porto-Novo"},{label:"Africa/Cairo",value:"Africa/Cairo"},{label:"Africa/Johannesburg",value:"Africa/Johannesburg"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"America/Denver",value:"America/Denver"},{label:"America/Chicago",value:"America/Chicago"},{label:"America/New_York",value:"America/New_York"},{label:"America/Phoenix",value:"America/Phoenix"},{label:"America/Anchorage",value:"America/Anchorage"},{label:"America/Halifax",value:"America/Halifax"},{label:"America/Sao_Paulo",value:"America/Sao_Paulo"},{label:"Europe/London",value:"Europe/London"},{label:"Europe/Paris",value:"Europe/Paris"},{label:"Europe/Zurich",value:"Europe/Zurich"},{label:"Europe/Berlin",value:"Europe/Berlin"},{label:"Asia/Dubai",value:"Asia/Dubai"},{label:"Asia/Kolkata",value:"Asia/Kolkata"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"},{label:"Australia/Sydney",value:"Australia/Sydney"},{label:"Pacific/Auckland",value:"Pacific/Auckland"},{label:"UTC",value:"UTC"}],D=[{label:"Prise de rendez-vous",value:"Prise de rendez-vous"},{label:"Qualification de prospects",value:"Qualification de prospects"},{label:"Vente directe",value:"Vente directe"},{label:"Relance clients",value:"Relance clients"},{label:"Sondage",value:"Sondage"},{label:"Demande d'information",value:"Demande d'information"}],f=ht({company_name:"",domain:"",promesse_de_valeur:"",confidence_threshold:.7,agent_name:"Julie",referral_name:"",infos:"",objectifs:"",contact_first_name:"",decision_maker_name:"",processus_metier:"",key_capability:"",call_script_example:"",decision_committee:[],from_number:"+14752906147",pain_point_identifie:"",timezone:"Africa/Porto-Novo"}),re=pe([]),se=pe("starter"),he=pe(60),_e=pe(null),ye=async()=>{try{const _=await Se.get("/api/plans");re.value=_.data||[],re.value.length>0&&(se.value=re.value[0].slug)}catch{}},xe=async()=>{try{const _=r.value.length||0,i=await Se.post("/api/preview-cost",{contacts_count:_,estimated_avg_call_seconds:he.value,plan_slug:se.value});_e.value=i.data||null}catch(_){_e.value=null,console.error("Estimate error",_)}};ye();const Ue=_=>{if(!_)return"";let i=_.replace(/[\s\-\(\)\.]/g,"");return i.startsWith("+")?i:i.startsWith("00")?"+"+i.substring(2):"+"+i},ze=_=>{if(!_)return[];const i=xt.parse(_,{header:!0,skipEmptyLines:!0,transformHeader:t=>(t||"").trim().toLowerCase()}),n=[];return!i||!i.data||i.data.forEach(t=>{const s={};for(const d in t){const c=(t[d]||"").toString().trim();c&&(d.includes("nom")||d.includes("name")?s.nom=c:d.includes("email")||d.includes("mail")?s.email=c:d.includes("tel")||d.includes("phone")||d.includes("telephone")?s.telephone=Ue(c):(d.includes("entreprise")||d.includes("company")||d.includes("societe"))&&(s.entreprise=c))}(s.telephone&&s.telephone.trim()||s.email&&s.email.trim())&&n.push(s)}),n},De=_=>{const i=_&&_.files&&_.files[0]?_.files[0]:_&&_.target&&_.target.files&&_.target.files[0];if(!i){u.value="Aucun fichier slectionn",r.value=[];return}const n=new FileReader;n.onload=t=>{try{const s=t.target.result,d=ze(s);r.value=d,r.value.length===0?u.value="Aucun contact valide trouv dans le fichier CSV":u.value=""}catch(s){console.error("Erreur lecture CSV:",s),u.value="Erreur lors de la lecture du fichier CSV",r.value=[]}},n.readAsText(i,"utf-8")},Ee=async()=>{const i=[{key:"company_name",label:"Nom de l'entreprise"},{key:"domain",label:"Secteur d'activit"},{key:"promesse_de_valeur",label:"Promesse de valeur"},{key:"infos",label:"Description entreprise / service"},{key:"agent_name",label:"Nom de l'agent"},{key:"objectifs",label:"Objectifs de Prospection"}].filter(n=>!(f[n.key]&&String(f[n.key]).trim().length>0)).map(n=>n.label);if(r.value.length===0&&i.push("Fichier de contacts (CSV)"),i.length>0){u.value=`Veuillez renseigner les champs obligatoires : ${i.join(", ")}`;return}u.value="",h.value="",l.value=!0;try{w(`Dmarrage de la cration de campagne, contacts chargs: ${r.value.length}`,{contacts_count:r.value.length});const{data:{user:n}}=await Xe.auth.getUser();if(w(`Rsultat supabase.auth.getUser(): ${n?n.id:"aucun user"}`,{user:n?n.id:null}),!n)throw new Error("Utilisateur non authentifi");const t={...f,confidence_threshold:f.confidence_threshold||.7,contact_first_name:f.contact_first_name||"Monsieur/Madame"},s={agent_name:t.agent_name,company_name:t.company_name,domain:t.domain,objectifs:t.objectifs,promesse_de_valeur:t.promesse_de_valeur,infos:t.infos,contact_first_name:t.contact_first_name,referral_name:t.referral_name||null,decision_maker_name:t.decision_maker_name||null,processus_metier:t.processus_metier||null,key_capability:t.key_capability||null,call_script_example:t.call_script_example||null},d={variables:s,contacts:r.value,user_id:n.id,created_at:new Date().toISOString(),status:"pending"},{data:c,error:C}=await Xe.from("campaigns").insert([{user_id:n.id,company_name:f.company_name,domain:f.domain,value_proposition:f.promesse_de_valeur,confidence_threshold:typeof t.confidence_threshold=="number"?t.confidence_threshold:parseFloat(t.confidence_threshold),agent_name:f.agent_name,referral_name:f.referral_name,infos:f.infos,objectifs:f.objectifs,contacts_count:r.value.length,status:"pending",created_at:new Date().toISOString()}]).select().single();if(C)throw C;w(`Campagne insre en base avec id: ${c.id}`,{campaign_id:c.id});const q=f.from_number||"+14752906147";try{w("Construction des tches pour le serveur create-batch...",{contacts_count:r.value.length});const U=r.value.filter($=>$.telephone).map($=>({to_number:$.telephone,ignore_e164_validation:!1,retell_llm_dynamic_variables:{...s,referal_name:s.referral_name||null,pain_point_identifie:f.pain_point_identifie||null,customer_name:$.nom||s.contact_first_name,contact_company:$.entreprise||"",contact_email:$.email||"",campaign_id:c.id}}));if(U.length===0)console.warn("Aucun numro de tlphone valide pour crer des tches Retell."),w("Aucun numro de tlphone valide trouv dans les contacts; aucune tche cre.",{contacts_count:r.value.length});else{const $={name:`Campagne ${f.company_name} - ${new Date().toISOString()}`,from_number:q,tasks:U,send_now:!0,trigger_timestamp:Date.now(),reserved_concurrency:1,call_time_window:{windows:[{start:0,end:1440}],timezone:f.timezone||"Africa/Porto-Novo"}};try{const g=`${window.location.origin}/create-batch`;w(`Envoi du batch au serveur: ${g}`,{tasks_count:U.length}),w(`Batch body keys: ${Object.keys($)}`,{tasks_sample:U.slice(0,3)});const I=await Se.post(g,$,{timeout:2e4});w(`Rponse serveur create-batch: status=${I.status}`,{data:I.data});const b=I.data||{};if(b.tasks_url)try{const P=await Se.get(b.tasks_url,{timeout:1e4}),k=typeof P.data=="string"?JSON.parse(P.data):P.data;w("Tasks file fetched after server create-batch",{sample:(k||[]).slice(0,5)})}catch(P){w("Could not fetch tasks file after server create-batch",{error:P&&P.message?P.message:JSON.stringify(P)})}(!I||I.status<200||I.status>=300)&&(u.value=`Erreur serveur create-batch: status ${I?I.status:"no response"}`,w("Erreur: rponse non 2xx reue du serveur create-batch",{status:I?I.status:null}))}catch(g){console.error("Erreur lors de l'envoi au serveur create-batch:",g),w(`Erreur lors de l'appel serveur create-batch: ${g&&g.message?g.message:JSON.stringify(g)}`),u.value=`Erreur lors de l'envoi au service d'appel: ${g&&g.message?g.message:"erreur inconnue"}`}}}catch(U){console.error("Erreur lors de la construction du batch pour le serveur:",U),w(`Erreur inattendue lors de la construction du batch: ${U&&U.message?U.message:JSON.stringify(U)}`)}h.value=`Campagne cre avec succs ! ${r.value.length} contacts seront prospects.`,setTimeout(()=>{a.push("/")},2e3)}catch(n){u.value=n.message||"Erreur lors de la cration de la campagne"}finally{l.value=!1}};return(_,i)=>{const n=ve("router-link");return R(),Q("div",un,[o("div",dn,[y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{content:V(()=>[i[34]||(i[34]=o("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Nouvelle Campagne de Prospection ",-1)),y(x(Ve),{severity:"info",closable:!1,class:"mb-0"},{default:V(()=>[i[22]||(i[22]=te(" Configurez votre agent vocal AI avec les informations de votre entreprise et les objectifs de prospection. L'agent matrise les techniques avances : ",-1)),i[23]||(i[23]=o("strong",null,"Cold Call 2.0",-1)),i[24]||(i[24]=te(", ",-1)),i[25]||(i[25]=o("strong",null,"SPIN Selling",-1)),i[26]||(i[26]=te(", ",-1)),i[27]||(i[27]=o("strong",null,"NEPQ",-1)),i[28]||(i[28]=te(", ",-1)),i[29]||(i[29]=o("strong",null,"BANT",-1)),i[30]||(i[30]=te(", ",-1)),i[31]||(i[31]=o("strong",null,"Feel-Felt-Found",-1)),i[32]||(i[32]=te(", ",-1)),i[33]||(i[33]=o("strong",null,"S.A.F.E.",-1)),y(n,{to:"/techniques",class:"ml-2 text-gray-900 font-semibold underline"},{default:V(()=>[...i[21]||(i[21]=[te(" En savoir plus sur ces techniques ",-1)])]),_:1})]),_:1})]),_:1}),u.value?(R(),ne(x(Ve),{key:0,severity:"error",closable:!0,onClose:i[0]||(i[0]=t=>u.value=""),class:"mb-6"},{default:V(()=>[te(de(u.value),1)]),_:1})):ee("",!0),h.value?(R(),ne(x(Ve),{key:1,severity:"success",closable:!0,onClose:i[1]||(i[1]=t=>h.value=""),class:"mb-6"},{default:V(()=>[te(de(h.value),1)]),_:1})):ee("",!0),o("form",{onSubmit:gt(Ee,["prevent"])},[y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...i[35]||(i[35]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-building text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Informations Entreprise")],-1)])]),content:V(()=>[o("div",cn,[o("div",pn,[o("div",fn,[o("div",mn,[i[36]||(i[36]=o("label",{class:"text-sm text-gray-600"},"Plan:",-1)),y(x(Ie),{modelValue:se.value,"onUpdate:modelValue":i[2]||(i[2]=t=>se.value=t),options:re.value.map(t=>({label:t.name,value:t.slug})),optionLabel:"label",optionValue:"value",class:"w-48"},null,8,["modelValue","options"]),i[37]||(i[37]=o("label",{class:"text-sm text-gray-600"},"Dure moyenne estime (s):",-1)),y(x(et),{modelValue:he.value,"onUpdate:modelValue":i[3]||(i[3]=t=>he.value=t),min:10,step:10,class:"w-28"},null,8,["modelValue"]),y(x(Le),{label:"Calculer le cot",icon:"pi pi-calculator",onClick:xe})])])]),o("div",hn,[i[38]||(i[38]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'entreprise *",-1)),y(x(fe),{modelValue:f.company_name,"onUpdate:modelValue":i[4]||(i[4]=t=>f.company_name=t),placeholder:"Votre Entreprise",class:"w-full",required:""},null,8,["modelValue"])]),o("div",null,[i[39]||(i[39]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Secteur d'activit *",-1)),y(x(Ie),{modelValue:f.domain,"onUpdate:modelValue":i[5]||(i[5]=t=>f.domain=t),options:B,placeholder:"Slectionnez un secteur",class:"w-full",required:""},null,8,["modelValue"]),i[40]||(i[40]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Options disponibles : Immobilier, Tech, Finance, Conseil, Autre",-1))]),o("div",null,[i[41]||(i[41]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Promesse de valeur (bnfice principal) *",-1)),y(x(fe),{modelValue:f.promesse_de_valeur,"onUpdate:modelValue":i[6]||(i[6]=t=>f.promesse_de_valeur=t),placeholder:"Bnfice principal en une phrase",class:"w-full",required:""},null,8,["modelValue"])]),o("div",gn,[i[42]||(i[42]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Description entreprise / service *",-1)),y(x(qe),{modelValue:f.infos,"onUpdate:modelValue":i[7]||(i[7]=t=>f.infos=t),placeholder:"Dcrivez votre entreprise, vos services, vos produits (2-3 phrases max)...",rows:"5",class:"w-full",required:""},null,8,["modelValue"])])])]),_:1}),y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...i[43]||(i[43]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-user text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Configuration Agent")],-1)])]),content:V(()=>[o("div",bn,[o("div",null,[i[44]||(i[44]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'agent *",-1)),y(x(fe),{modelValue:f.agent_name,"onUpdate:modelValue":i[8]||(i[8]=t=>f.agent_name=t),placeholder:"Julie",class:"w-full",required:""},null,8,["modelValue"])]),o("div",null,[i[45]||(i[45]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Seuil de confiance (0.0 - 1.0)",-1)),y(x(et),{modelValue:f.confidence_threshold,"onUpdate:modelValue":i[9]||(i[9]=t=>f.confidence_threshold=t),min:0,max:1,step:.1,minFractionDigits:1,maxFractionDigits:2,placeholder:"0.7",class:"w-full"},null,8,["modelValue"]),i[46]||(i[46]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Plus lev = plus slectif dans les rponses",-1))])])]),_:1}),y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...i[47]||(i[47]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-comments text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Variables Conversationnelles (optionnel)")],-1)])]),content:V(()=>[o("div",vn,[o("div",null,[i[48]||(i[48]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Prnom du prospect",-1)),y(x(fe),{modelValue:f.contact_first_name,"onUpdate:modelValue":i[10]||(i[10]=t=>f.contact_first_name=t),placeholder:"Dfaut : Monsieur / Madame",class:"w-full"},null,8,["modelValue"]),i[49]||(i[49]=o("small",{class:"text-gray-500 text-sm mt-1 block"},' Laissez vide pour utiliser "Monsieur/Madame" automatiquement. ',-1))]),o("div",null,[i[50]||(i[50]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du rfrent (warm calling)",-1)),y(x(fe),{modelValue:f.referral_name,"onUpdate:modelValue":i[11]||(i[11]=t=>f.referral_name=t),placeholder:"Nom du rfrent (optionnel)",class:"w-full"},null,8,["modelValue"])]),o("div",null,[i[51]||(i[51]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du dcisionnaire",-1)),y(x(fe),{modelValue:f.decision_maker_name,"onUpdate:modelValue":i[12]||(i[12]=t=>f.decision_maker_name=t),placeholder:"Nom du dcisionnaire (si connu)",class:"w-full"},null,8,["modelValue"])]),o("div",null,[i[52]||(i[52]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Processus mtier cibl",-1)),y(x(fe),{modelValue:f.processus_metier,"onUpdate:modelValue":i[13]||(i[13]=t=>f.processus_metier=t),placeholder:"Ex : la gestion locative, le recrutement...",class:"w-full"},null,8,["modelValue"])]),o("div",null,[i[53]||(i[53]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Capacit cl  qualifier",-1)),y(x(fe),{modelValue:f.key_capability,"onUpdate:modelValue":i[14]||(i[14]=t=>f.key_capability=t),placeholder:"Ex : automatisation, conformit RGPD...",class:"w-full"},null,8,["modelValue"])]),o("div",null,[i[54]||(i[54]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Pain point identifi",-1)),y(x(fe),{modelValue:f.pain_point_identifie,"onUpdate:modelValue":i[15]||(i[15]=t=>f.pain_point_identifie=t),placeholder:"Ex : Perte de temps sur les tches manuelles",class:"w-full"},null,8,["modelValue"])]),o("div",null,[i[55]||(i[55]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Numro d'envoi",-1)),y(x(Ie),{modelValue:f.from_number,"onUpdate:modelValue":i[16]||(i[16]=t=>f.from_number=t),options:Y,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un numro d'envoi",class:"w-full"},null,8,["modelValue"]),i[56]||(i[56]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le numro utilis pour mettre les appels.",-1))]),o("div",null,[i[57]||(i[57]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Fuseau horaire d'appel",-1)),y(x(Ie),{modelValue:f.timezone,"onUpdate:modelValue":i[17]||(i[17]=t=>f.timezone=t),options:p,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un fuseau horaire",class:"w-full"},null,8,["modelValue"]),i[58]||(i[58]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le fuseau horaire pour la fentre d'appel.",-1))])])]),_:1}),y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...i[59]||(i[59]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-file-edit text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Script d'appel personnalis (optionnel)")],-1)])]),content:V(()=>[o("div",yn,[i[60]||(i[60]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Script d'exemple",-1)),y(x(qe),{modelValue:f.call_script_example,"onUpdate:modelValue":i[18]||(i[18]=t=>f.call_script_example=t),placeholder:"Collez ici votre script d'appel en suivant le template recommand (ACCROCHE, DCOUVERTE, TRANSITION VALEUR, CLOSING)...",rows:"8",class:"w-full"},null,8,["modelValue"]),i[61]||(i[61]=o("small",{class:"text-gray-500 text-sm mt-1 block"}," Optionnel. Si laiss vide, l'agent utilisera un script gnr automatiquement  partir de vos variables. ",-1))])]),_:1}),y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...i[62]||(i[62]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-bullseye text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Objectifs de Prospection")],-1)])]),content:V(()=>[o("div",null,[i[63]||(i[63]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Slectionnez les objectifs *",-1)),y(x(Ie),{modelValue:f.objectifs,"onUpdate:modelValue":i[19]||(i[19]=t=>f.objectifs=t),options:D,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un objectif",class:"w-full",required:""},null,8,["modelValue"])])]),_:1}),y(x(be),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...i[64]||(i[64]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-users text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Contacts  Appeler")],-1)])]),content:V(()=>[o("div",kn,[o("div",null,[i[65]||(i[65]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Fichier de contacts (CSV) *",-1)),y(x(ot),{mode:"basic",accept:".csv",maxFileSize:1e7,chooseLabel:"Choisir un fichier CSV",onSelect:De,class:"w-full",disabled:l.value},null,8,["disabled"]),i[66]||(i[66]=o("small",{class:"text-gray-500 text-sm mt-1 block"},[te(" Format CSV attendu : nom, email, tlphone, entreprise (optionnel)"),o("br"),o("span",{class:"text-blue-600"},' Le prfixe "+" sera ajout automatiquement aux numros de tlphone si absent.')],-1))]),r.value.length>0?(R(),Q("div",wn,[o("h3",Cn," Contacts chargs ("+de(r.value.length)+") ",1),y(x(wt),{value:r.value.slice(0,10),paginator:r.value.length>10,rows:5,class:"p-datatable-sm",scrollable:!0,scrollHeight:"200px"},{default:V(()=>[y(x(Oe),{field:"nom",header:"Nom"}),y(x(Oe),{field:"email",header:"Email"}),y(x(Oe),{field:"telephone",header:"Tlphone"}),y(x(Oe),{field:"entreprise",header:"Entreprise"})]),_:1},8,["value","paginator"]),r.value.length>10?(R(),Q("p",Sn," ... et "+de(r.value.length-10)+" autres contacts ",1)):ee("",!0)])):ee("",!0)])]),_:1}),y(x(be),{class:"shadow-md border border-gray-200"},{content:V(()=>[o("div",_n,[y(x(Le),{label:"Annuler",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:i[20]||(i[20]=t=>_.$router.push("/")),disabled:l.value},null,8,["disabled"]),y(x(Le),{type:"submit",label:"Lancer la Campagne",icon:"pi pi-send",loading:l.value,disabled:l.value||r.value.length===0},null,8,["loading","disabled"])])]),_:1})],32)])])}}};export{Bn as default};
