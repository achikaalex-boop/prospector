import{z as dt,B as Je,f as it,m as D,c as $,o as z,A as pt,e as u,s as Qe,b as te,r as he,l as ae,t as re,R as ct,C as at,y as ft,k as Ue,P as Ye,W as mt,D as ge,n as $e,j as x,E as Ce,w as U,a as le,d as Be,F as qe,G as Xe,H as ht,g as ie,I as gt,h as et,J as tt,K as bt,L as Ne,q as Le,u as B,M as vt,N as yt}from"./index-4MemwKCE.js";import{a as Te}from"./index-B9ygI19o.js";import{s as ve}from"./index-CLZeKrzB.js";import{s as kt,a as me}from"./index-CtJl2p7y.js";import{b as wt,c as Ct,d as St,a as xt,s as De}from"./index-XbmFJ2ab.js";import{s as Et}from"./index-CvmwG8Lx.js";var Ve={exports:{}};var Ft=Ve.exports,nt;function _t(){return nt||(nt=1,(function(e,a){((r,d)=>{e.exports=d()})(Ft,function r(){var d=typeof self<"u"?self:typeof window<"u"?window:d!==void 0?d:{},y,s=!d.document&&!!d.postMessage,F=d.IS_PAPA_WORKER||!1,L={},Y=0,c={};function P(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(i){var o=Z(i);o.chunkSize=parseInt(o.chunkSize),i.step||i.chunk||(o.chunkSize=null),this._handle=new we(o),(this._handle.streamer=this)._config=o}).call(this,n),this.parseChunk=function(i,o){var m=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<m){let p=this._config.newline;p||(f=this._config.quoteChar||'"',p=this._handle.guessLineEndings(i,f)),i=[...i.split(p).slice(m)].join(p)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(f=this._config.beforeFirstChunk(i))!==void 0&&(i=f),this.isFirstChunk=!1,this._halted=!1;var m=this._partialLine+i,f=(this._partialLine="",this._handle.parse(m,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(i=f.meta.cursor,m=(this._finished||(this._partialLine=m.substring(i-this._baseIndex),this._baseIndex=i),f&&f.data&&(this._rowCount+=f.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),F)d.postMessage({results:f,workerId:c.WORKER_ID,finished:m});else if(T(this._config.chunk)&&!o){if(this._config.chunk(f,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=f=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(f.data),this._completeResults.errors=this._completeResults.errors.concat(f.errors),this._completeResults.meta=f.meta),this._completed||!m||!T(this._config.complete)||f&&f.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),m||f&&f.meta.paused||this._nextChunk(),f}this._halted=!0},this._sendError=function(i){T(this._config.error)?this._config.error(i):F&&this._config.error&&d.postMessage({workerId:c.WORKER_ID,error:i,finished:!1})}}function oe(n){var i;(n=n||{}).chunkSize||(n.chunkSize=c.RemoteChunkSize),P.call(this,n),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(o){this._input=o,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),s||(i.onload=X(this._chunkLoaded,this),i.onerror=X(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var o,m=this._config.downloadRequestHeaders;for(o in m)i.setRequestHeader(o,m[o])}var f;this._config.chunkSize&&(f=this._start+this._config.chunkSize-1,i.setRequestHeader("Range","bytes="+this._start+"-"+f));try{i.send(this._config.downloadRequestBody)}catch(p){this._chunkError(p.message)}s&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize||i.responseText.length,this._finished=!this._config.chunkSize||this._start>=(o=>(o=o.getResponseHeader("Content-Range"))!==null?parseInt(o.substring(o.lastIndexOf("/")+1)):-1)(i),this.parseChunk(i.responseText)))},this._chunkError=function(o){o=i.statusText||o,this._sendError(new Error(o))}}function ye(n){(n=n||{}).chunkSize||(n.chunkSize=c.LocalChunkSize),P.call(this,n);var i,o,m=typeof FileReader<"u";this.stream=function(f){this._input=f,o=f.slice||f.webkitSlice||f.mozSlice,m?((i=new FileReader).onload=X(this._chunkLoaded,this),i.onerror=X(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input,p=(this._config.chunkSize&&(p=Math.min(this._start+this._config.chunkSize,this._input.size),f=o.call(f,this._start,p)),i.readAsText(f,this._config.encoding));m||this._chunkLoaded({target:{result:p}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(i.error)}}function ke(n){var i;P.call(this,n=n||{}),this.stream=function(o){return i=o,this._nextChunk()},this._nextChunk=function(){var o,m;if(!this._finished)return o=this._config.chunkSize,i=o?(m=i.substring(0,o),i.substring(o)):(m=i,""),this._finished=!i,this.parseChunk(m)}}function k(n){P.call(this,n=n||{});var i=[],o=!0,m=!1;this.pause=function(){P.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){P.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){m&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):o=!0},this._streamData=X(function(f){try{i.push(typeof f=="string"?f:f.toString(this._config.encoding)),o&&(o=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(p){this._streamError(p)}},this),this._streamError=X(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=X(function(){this._streamCleanUp(),m=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function we(n){var i,o,m,f,p=Math.pow(2,53),t=-p,h=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,E=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,l=this,v=0,g=0,J=!1,C=!1,_=[],b={data:[],errors:[],meta:{}};function H(A){return n.skipEmptyLines==="greedy"?A.join("").trim()==="":A.length===1&&A[0].length===0}function q(){if(b&&m&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),m=!1),n.skipEmptyLines&&(b.data=b.data.filter(function(w){return!H(w)})),Q()){let w=function(j,W){T(n.transformHeader)&&(j=n.transformHeader(j,W)),_.push(j)};if(b)if(Array.isArray(b.data[0])){for(var A=0;Q()&&A<b.data.length;A++)b.data[A].forEach(w);b.data.splice(0,1)}else b.data.forEach(w)}function R(w,j){for(var W=n.header?{}:[],O=0;O<w.length;O++){var V=O,I=w[O],I=((se,S)=>(M=>(n.dynamicTypingFunction&&n.dynamicTyping[M]===void 0&&(n.dynamicTyping[M]=n.dynamicTypingFunction(M)),(n.dynamicTyping[M]||n.dynamicTyping)===!0))(se)?S==="true"||S==="TRUE"||S!=="false"&&S!=="FALSE"&&((M=>{if(h.test(M)&&(M=parseFloat(M),t<M&&M<p))return 1})(S)?parseFloat(S):E.test(S)?new Date(S):S===""?null:S):S)(V=n.header?O>=_.length?"__parsed_extra":_[O]:V,I=n.transform?n.transform(I,V):I);V==="__parsed_extra"?(W[V]=W[V]||[],W[V].push(I)):W[V]=I}return n.header&&(O>_.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+_.length+" fields but parsed "+O,g+j):O<_.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+_.length+" fields but parsed "+O,g+j)),W}var N;b&&(n.header||n.dynamicTyping||n.transform)&&(N=1,!b.data.length||Array.isArray(b.data[0])?(b.data=b.data.map(R),N=b.data.length):b.data=R(b.data,0),n.header&&b.meta&&(b.meta.fields=_),g+=N)}function Q(){return n.header&&_.length===0}function ne(A,R,N,w){A={type:A,code:R,message:N},w!==void 0&&(A.row=w),b.errors.push(A)}T(n.step)&&(f=n.step,n.step=function(A){b=A,Q()?q():(q(),b.data.length!==0&&(v+=A.data.length,n.preview&&v>n.preview?o.abort():(b.data=b.data[0],f(b,l))))}),this.parse=function(A,R,N){var w=n.quoteChar||'"',w=(n.newline||(n.newline=this.guessLineEndings(A,w)),m=!1,n.delimiter?T(n.delimiter)&&(n.delimiter=n.delimiter(A),b.meta.delimiter=n.delimiter):((w=((j,W,O,V,I)=>{var se,S,M,be;I=I||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var xe=0;xe<I.length;xe++){for(var ue,Ae=I[xe],G=0,de=0,K=0,ee=(M=void 0,new Fe({comments:V,delimiter:Ae,newline:W,preview:10}).parse(j)),fe=0;fe<ee.data.length;fe++)O&&H(ee.data[fe])?K++:(ue=ee.data[fe].length,de+=ue,M===void 0?M=ue:0<ue&&(G+=Math.abs(ue-M),M=ue));0<ee.data.length&&(de/=ee.data.length-K),(S===void 0||G<=S)&&(be===void 0||be<de)&&1.99<de&&(S=G,se=Ae,be=de)}return{successful:!!(n.delimiter=se),bestDelimiter:se}})(A,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=w.bestDelimiter:(m=!0,n.delimiter=c.DefaultDelimiter),b.meta.delimiter=n.delimiter),Z(n));return n.preview&&n.header&&w.preview++,i=A,o=new Fe(w),b=o.parse(i,R,N),q(),J?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return J},this.pause=function(){J=!0,o.abort(),i=T(n.chunk)?"":i.substring(o.getCharIndex())},this.resume=function(){l.streamer._halted?(J=!1,l.streamer.parseChunk(i,!0)):setTimeout(l.resume,3)},this.aborted=function(){return C},this.abort=function(){C=!0,o.abort(),b.meta.aborted=!0,T(n.complete)&&n.complete(b),i=""},this.guessLineEndings=function(j,w){j=j.substring(0,1048576);var w=new RegExp(ce(w)+"([^]*?)"+ce(w),"gm"),N=(j=j.replace(w,"")).split("\r"),w=j.split(`
`),j=1<w.length&&w[0].length<N[0].length;if(N.length===1||j)return`
`;for(var W=0,O=0;O<N.length;O++)N[O][0]===`
`&&W++;return W>=N.length/2?`\r
`:"\r"}}function ce(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Fe(n){var i=(n=n||{}).delimiter,o=n.newline,m=n.comments,f=n.step,p=n.preview,t=n.fastMode,h=null,E=!1,l=n.quoteChar==null?'"':n.quoteChar,v=l;if(n.escapeChar!==void 0&&(v=n.escapeChar),(typeof i!="string"||-1<c.BAD_DELIMITERS.indexOf(i))&&(i=","),m===i)throw new Error("Comment character same as delimiter");m===!0?m="#":(typeof m!="string"||-1<c.BAD_DELIMITERS.indexOf(m))&&(m=!1),o!==`
`&&o!=="\r"&&o!==`\r
`&&(o=`
`);var g=0,J=!1;this.parse=function(C,_,b){if(typeof C!="string")throw new Error("Input must be a string");var H=C.length,q=i.length,Q=o.length,ne=m.length,A=T(f),R=[],N=[],w=[],j=g=0;if(!C)return G();if(t||t!==!1&&C.indexOf(l)===-1){for(var W=C.split(o),O=0;O<W.length;O++){if(w=W[O],g+=w.length,O!==W.length-1)g+=o.length;else if(b)return G();if(!m||w.substring(0,ne)!==m){if(A){if(R=[],be(w.split(i)),de(),J)return G()}else be(w.split(i));if(p&&p<=O)return R=R.slice(0,p),G(!0)}}return G()}for(var V=C.indexOf(i,g),I=C.indexOf(o,g),se=new RegExp(ce(v)+ce(l),"g"),S=C.indexOf(l,g);;)if(C[g]===l)for(S=g,g++;;){if((S=C.indexOf(l,S+1))===-1)return b||N.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:R.length,index:g}),ue();if(S===H-1)return ue(C.substring(g,S).replace(se,l));if(l===v&&C[S+1]===v)S++;else if(l===v||S===0||C[S-1]!==v){V!==-1&&V<S+1&&(V=C.indexOf(i,S+1));var M=xe((I=I!==-1&&I<S+1?C.indexOf(o,S+1):I)===-1?V:Math.min(V,I));if(C.substr(S+1+M,q)===i){w.push(C.substring(g,S).replace(se,l)),C[g=S+1+M+q]!==l&&(S=C.indexOf(l,g)),V=C.indexOf(i,g),I=C.indexOf(o,g);break}if(M=xe(I),C.substring(S+1+M,S+1+M+Q)===o){if(w.push(C.substring(g,S).replace(se,l)),Ae(S+1+M+Q),V=C.indexOf(i,g),S=C.indexOf(l,g),A&&(de(),J))return G();if(p&&R.length>=p)return G(!0);break}N.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:R.length,index:g}),S++}}else if(m&&w.length===0&&C.substring(g,g+ne)===m){if(I===-1)return G();g=I+Q,I=C.indexOf(o,g),V=C.indexOf(i,g)}else if(V!==-1&&(V<I||I===-1))w.push(C.substring(g,V)),g=V+q,V=C.indexOf(i,g);else{if(I===-1)break;if(w.push(C.substring(g,I)),Ae(I+Q),A&&(de(),J))return G();if(p&&R.length>=p)return G(!0)}return ue();function be(K){R.push(K),j=g}function xe(K){var ee=0;return ee=K!==-1&&(K=C.substring(S+1,K))&&K.trim()===""?K.length:ee}function ue(K){return b||(K===void 0&&(K=C.substring(g)),w.push(K),g=H,be(w),A&&de()),G()}function Ae(K){g=K,be(w),w=[],I=C.indexOf(o,g)}function G(K){if(n.header&&!_&&R.length&&!E){var ee=R[0],fe=Object.create(null),Me=new Set(ee);let Ze=!1;for(let Ee=0;Ee<ee.length;Ee++){let pe=ee[Ee];if(fe[pe=T(n.transformHeader)?n.transformHeader(pe,Ee):pe]){let Ie,Ge=fe[pe];for(;Ie=pe+"_"+Ge,Ge++,Me.has(Ie););Me.add(Ie),ee[Ee]=Ie,fe[pe]++,Ze=!0,(h=h===null?{}:h)[Ie]=pe}else fe[pe]=1,ee[Ee]=pe;Me.add(pe)}Ze&&console.warn("Duplicate headers found and renamed."),E=!0}return{data:R,errors:N,meta:{delimiter:i,linebreak:o,aborted:J,truncated:!!K,cursor:j+(_||0),renamedHeaders:h}}}function de(){f(G()),R=[],N=[]}},this.abort=function(){J=!0},this.getCharIndex=function(){return g}}function _e(n){var i=n.data,o=L[i.workerId],m=!1;if(i.error)o.userError(i.error,i.file);else if(i.results&&i.results.data){var f={abort:function(){m=!0,Se(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Re,resume:Re};if(T(o.userStep)){for(var p=0;p<i.results.data.length&&(o.userStep({data:i.results.data[p],errors:i.results.errors,meta:i.results.meta},f),!m);p++);delete i.results}else T(o.userChunk)&&(o.userChunk(i.results,f,i.file),delete i.results)}i.finished&&!m&&Se(i.workerId,i.results)}function Se(n,i){var o=L[n];T(o.userComplete)&&o.userComplete(i),o.terminate(),delete L[n]}function Re(){throw new Error("Not implemented.")}function Z(n){if(typeof n!="object"||n===null)return n;var i,o=Array.isArray(n)?[]:{};for(i in n)o[i]=Z(n[i]);return o}function X(n,i){return function(){n.apply(i,arguments)}}function T(n){return typeof n=="function"}return c.parse=function(n,i){var o=(i=i||{}).dynamicTyping||!1;if(T(o)&&(i.dynamicTypingFunction=o,o={}),i.dynamicTyping=o,i.transform=!!T(i.transform)&&i.transform,!i.worker||!c.WORKERS_SUPPORTED)return o=null,c.NODE_STREAM_INPUT,typeof n=="string"?(n=(m=>m.charCodeAt(0)!==65279?m:m.slice(1))(n),o=new(i.download?oe:ke)(i)):n.readable===!0&&T(n.read)&&T(n.on)?o=new k(i):(d.File&&n instanceof File||n instanceof Object)&&(o=new ye(i)),o.stream(n);(o=(()=>{var m;return!!c.WORKERS_SUPPORTED&&(m=(()=>{var f=d.URL||d.webkitURL||null,p=r.toString();return c.BLOB_URL||(c.BLOB_URL=f.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",p,")();"],{type:"text/javascript"})))})(),(m=new d.Worker(m)).onmessage=_e,m.id=Y++,L[m.id]=m)})()).userStep=i.step,o.userChunk=i.chunk,o.userComplete=i.complete,o.userError=i.error,i.step=T(i.step),i.chunk=T(i.chunk),i.complete=T(i.complete),i.error=T(i.error),delete i.worker,o.postMessage({input:n,config:i,workerId:o.id})},c.unparse=function(n,i){var o=!1,m=!0,f=",",p=`\r
`,t='"',h=t+t,E=!1,l=null,v=!1,g=((()=>{if(typeof i=="object"){if(typeof i.delimiter!="string"||c.BAD_DELIMITERS.filter(function(_){return i.delimiter.indexOf(_)!==-1}).length||(f=i.delimiter),typeof i.quotes!="boolean"&&typeof i.quotes!="function"&&!Array.isArray(i.quotes)||(o=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(E=i.skipEmptyLines),typeof i.newline=="string"&&(p=i.newline),typeof i.quoteChar=="string"&&(t=i.quoteChar),typeof i.header=="boolean"&&(m=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");l=i.columns}i.escapeChar!==void 0&&(h=i.escapeChar+t),i.escapeFormulae instanceof RegExp?v=i.escapeFormulae:typeof i.escapeFormulae=="boolean"&&i.escapeFormulae&&(v=/^[=+\-@\t\r].*$/)}})(),new RegExp(ce(t),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return J(null,n,E);if(typeof n[0]=="object")return J(l||Object.keys(n[0]),n,E)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||l),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),J(n.fields||[],n.data||[],E);throw new Error("Unable to serialize unrecognized input");function J(_,b,H){var q="",Q=(typeof _=="string"&&(_=JSON.parse(_)),typeof b=="string"&&(b=JSON.parse(b)),Array.isArray(_)&&0<_.length),ne=!Array.isArray(b[0]);if(Q&&m){for(var A=0;A<_.length;A++)0<A&&(q+=f),q+=C(_[A],A);0<b.length&&(q+=p)}for(var R=0;R<b.length;R++){var N=(Q?_:b[R]).length,w=!1,j=Q?Object.keys(b[R]).length===0:b[R].length===0;if(H&&!Q&&(w=H==="greedy"?b[R].join("").trim()==="":b[R].length===1&&b[R][0].length===0),H==="greedy"&&Q){for(var W=[],O=0;O<N;O++){var V=ne?_[O]:O;W.push(b[R][V])}w=W.join("").trim()===""}if(!w){for(var I=0;I<N;I++){0<I&&!j&&(q+=f);var se=Q&&ne?_[I]:I;q+=C(b[R][se],I)}R<b.length-1&&(!H||0<N&&!j)&&(q+=p)}}return q}function C(_,b){var H,q;return _==null?"":_.constructor===Date?JSON.stringify(_).slice(1,25):(q=!1,v&&typeof _=="string"&&v.test(_)&&(_="'"+_,q=!0),H=_.toString().replace(g,h),(q=q||o===!0||typeof o=="function"&&o(_,b)||Array.isArray(o)&&o[b]||((Q,ne)=>{for(var A=0;A<ne.length;A++)if(-1<Q.indexOf(ne[A]))return!0;return!1})(H,c.BAD_DELIMITERS)||-1<H.indexOf(f)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?t+H+t:H)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!s&&!!d.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=Fe,c.ParserHandle=we,c.NetworkStreamer=oe,c.FileStreamer=ye,c.StringStreamer=ke,c.ReadableStreamStreamer=k,d.jQuery&&((y=d.jQuery).fn.parse=function(n){var i=n.config||{},o=[];return this.each(function(p){if(!(y(this).prop("tagName").toUpperCase()==="INPUT"&&y(this).attr("type").toLowerCase()==="file"&&d.FileReader)||!this.files||this.files.length===0)return!0;for(var t=0;t<this.files.length;t++)o.push({file:this.files[t],inputElem:this,instanceConfig:y.extend({},i)})}),m(),this;function m(){if(o.length===0)T(n.complete)&&n.complete();else{var p,t,h,E,l=o[0];if(T(n.before)){var v=n.before(l.file,l.inputElem);if(typeof v=="object"){if(v.action==="abort")return p="AbortError",t=l.file,h=l.inputElem,E=v.reason,void(T(n.error)&&n.error({name:p},t,h,E));if(v.action==="skip")return void f();typeof v.config=="object"&&(l.instanceConfig=y.extend(l.instanceConfig,v.config))}else if(v==="skip")return void f()}var g=l.instanceConfig.complete;l.instanceConfig.complete=function(J){T(g)&&g(J,l.file,l.inputElem),f()},c.parse(l.file,l.instanceConfig)}}function f(){o.splice(0,1),m()}}),F&&(d.onmessage=function(n){n=n.data,c.WORKER_ID===void 0&&n&&(c.WORKER_ID=n.workerId),typeof n.input=="string"?d.postMessage({workerId:c.WORKER_ID,results:c.parse(n.input,n.config),finished:!0}):(d.File&&n.input instanceof File||n.input instanceof Object)&&(n=c.parse(n.input,n.config))&&d.postMessage({workerId:c.WORKER_ID,results:n,finished:!0})}),(oe.prototype=Object.create(P.prototype)).constructor=oe,(ye.prototype=Object.create(P.prototype)).constructor=ye,(ke.prototype=Object.create(ke.prototype)).constructor=ke,(k.prototype=Object.create(P.prototype)).constructor=k,c})})(Ve)),Ve.exports}var At=_t();const It=dt(At);var Lt=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,Bt={root:function(a){var r=a.instance,d=a.props;return["p-textarea p-component",{"p-filled":r.$filled,"p-textarea-resizable ":d.autoResize,"p-textarea-sm p-inputfield-sm":d.size==="small","p-textarea-lg p-inputfield-lg":d.size==="large","p-invalid":r.$invalid,"p-variant-filled":r.$variant==="filled","p-textarea-fluid":r.$fluid}]}},zt=Je.extend({name:"textarea",style:Lt,classes:Bt}),Rt={name:"BaseTextarea",extends:kt,props:{autoResize:Boolean},style:zt,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function ze(e){"@babel/helpers - typeof";return ze=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ze(e)}function Tt(e,a,r){return(a=Dt(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function Dt(e){var a=Pt(e,"string");return ze(a)=="symbol"?a:a+""}function Pt(e,a){if(ze(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var d=r.call(e,a);if(ze(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var He={name:"Textarea",extends:Rt,inheritAttrs:!1,observer:null,mounted:function(){var a=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){a.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var a=this.$el.style.height,r=parseInt(a)||0,d=this.$el.scrollHeight,y=!r||d>r,s=r&&d<r;s?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):y&&(this.$el.style.height="".concat(d,"px"))}},onInput:function(a){this.autoResize&&this.resize(),this.writeValue(a.target.value,a)}},computed:{attrs:function(){return D(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return it(Tt({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Ot=["value","name","disabled","aria-invalid","data-p"];function Vt(e,a,r,d,y,s){return z(),$("textarea",D({class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.invalid||void 0,"data-p":s.dataP,onInput:a[0]||(a[0]=function(){return s.onInput&&s.onInput.apply(s,arguments)})},s.attrs),null,16,Ot)}He.render=Vt;var Pe={name:"Dropdown",extends:wt,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},rt={name:"UploadIcon",extends:pt};function Ut(e){return $t(e)||jt(e)||Nt(e)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(e,a){if(e){if(typeof e=="string")return We(e,a);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,a):void 0}}function jt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $t(e){if(Array.isArray(e))return We(e)}function We(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,d=Array(a);r<a;r++)d[r]=e[r];return d}function qt(e,a,r,d,y,s){return z(),$("svg",D({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Ut(a[0]||(a[0]=[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z",fill:"currentColor"},null,-1)])),16)}rt.render=qt;var Ht=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,Wt={root:function(a){var r=a.instance;return["p-progressbar p-component",{"p-progressbar-determinate":r.determinate,"p-progressbar-indeterminate":r.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},Kt=Je.extend({name:"progressbar",style:Ht,classes:Wt}),Jt={name:"BaseProgressBar",extends:Qe,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:Kt,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},st={name:"ProgressBar",extends:Jt,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return it({determinate:this.determinate,indeterminate:this.indeterminate})}}},Qt=["aria-valuenow","data-p"],Zt=["data-p"],Gt=["data-p"],Yt=["data-p"];function Xt(e,a,r,d,y,s){return z(),$("div",D({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":s.dataP},e.ptmi("root")),[s.determinate?(z(),$("div",D({key:0,class:e.cx("value"),style:s.progressStyle,"data-p":s.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(z(),$("div",D({key:0,class:e.cx("label"),"data-p":s.dataP},e.ptm("label")),[he(e.$slots,"default",{},function(){return[ae(re(e.value+"%"),1)]})],16,Gt)):te("",!0)],16,Zt)):s.indeterminate?(z(),$("div",D({key:1,class:e.cx("value"),"data-p":s.dataP},e.ptm("value")),null,16,Yt)):te("",!0)],16,Qt)}st.render=Xt;var en=`
    .p-fileupload input[type='file'] {
        display: none;
    }

    .p-fileupload-advanced {
        border: 1px solid dt('fileupload.border.color');
        border-radius: dt('fileupload.border.radius');
        background: dt('fileupload.background');
        color: dt('fileupload.color');
    }

    .p-fileupload-header {
        display: flex;
        align-items: center;
        padding: dt('fileupload.header.padding');
        background: dt('fileupload.header.background');
        color: dt('fileupload.header.color');
        border-style: solid;
        border-width: dt('fileupload.header.border.width');
        border-color: dt('fileupload.header.border.color');
        border-radius: dt('fileupload.header.border.radius');
        gap: dt('fileupload.header.gap');
    }

    .p-fileupload-content {
        border: 1px solid transparent;
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.content.gap');
        transition: border-color dt('fileupload.transition.duration');
        padding: dt('fileupload.content.padding');
    }

    .p-fileupload-content .p-progressbar {
        width: 100%;
        height: dt('fileupload.progressbar.height');
    }

    .p-fileupload-file-list {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.filelist.gap');
    }

    .p-fileupload-file {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding: dt('fileupload.file.padding');
        border-block-end: 1px solid dt('fileupload.file.border.color');
        gap: dt('fileupload.file.gap');
    }

    .p-fileupload-file:last-child {
        border-block-end: 0;
    }

    .p-fileupload-file-info {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.file.info.gap');
    }

    .p-fileupload-file-thumbnail {
        flex-shrink: 0;
    }

    .p-fileupload-file-actions {
        margin-inline-start: auto;
    }

    .p-fileupload-highlight {
        border: 1px dashed dt('fileupload.content.highlight.border.color');
    }

    .p-fileupload-basic .p-message {
        margin-block-end: dt('fileupload.basic.gap');
    }

    .p-fileupload-basic-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: dt('fileupload.basic.gap');
    }
`,tn={root:function(a){var r=a.props;return["p-fileupload p-fileupload-".concat(r.mode," p-component")]},header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button",basicContent:"p-fileupload-basic-content"},nn=Je.extend({name:"fileupload",style:en,classes:tn}),an={name:"BaseFileUpload",extends:Qe,props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:void 0},uploadIcon:{type:String,default:void 0},cancelIcon:{type:String,default:void 0},style:null,class:null,chooseButtonProps:{type:null,default:null},uploadButtonProps:{type:Object,default:function(){return{severity:"secondary"}}},cancelButtonProps:{type:Object,default:function(){return{severity:"secondary"}}}},style:nn,provide:function(){return{$pcFileUpload:this,$parentInstance:this}}},lt={name:"FileContent",hostName:"FileUpload",extends:Qe,emits:["remove"],props:{files:{type:Array,default:function(){return[]}},badgeSeverity:{type:String,default:"warn"},badgeValue:{type:String,default:null},previewWidth:{type:Number,default:50},templates:{type:null,default:null}},methods:{formatSize:function(a){var r,d=1024,y=3,s=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(s[0]);var F=Math.floor(Math.log(a)/Math.log(d)),L=parseFloat((a/Math.pow(d,F)).toFixed(y));return"".concat(L," ").concat(s[F])}},components:{Button:Ue,Badge:ft,TimesIcon:at}},rn=["alt","src","width"];function sn(e,a,r,d,y,s){var F=ge("Badge"),L=ge("TimesIcon"),Y=ge("Button");return z(!0),$(qe,null,$e(r.files,function(c,P){return z(),$("div",D({key:c.name+c.type+c.size,class:e.cx("file")},{ref_for:!0},e.ptm("file")),[u("img",D({role:"presentation",class:e.cx("fileThumbnail"),alt:c.name,src:c.objectURL,width:r.previewWidth},{ref_for:!0},e.ptm("fileThumbnail")),null,16,rn),u("div",D({class:e.cx("fileInfo")},{ref_for:!0},e.ptm("fileInfo")),[u("div",D({class:e.cx("fileName")},{ref_for:!0},e.ptm("fileName")),re(c.name),17),u("span",D({class:e.cx("fileSize")},{ref_for:!0},e.ptm("fileSize")),re(s.formatSize(c.size)),17)],16),x(F,{value:r.badgeValue,class:Ce(e.cx("pcFileBadge")),severity:r.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcFileBadge")},null,8,["value","class","severity","unstyled","pt"]),u("div",D({class:e.cx("fileActions")},{ref_for:!0},e.ptm("fileActions")),[x(Y,{onClick:function(ye){return e.$emit("remove",P)},text:"",rounded:"",severity:"danger",class:Ce(e.cx("pcFileRemoveButton")),unstyled:e.unstyled,pt:e.ptm("pcFileRemoveButton")},{icon:U(function(oe){return[r.templates.fileremoveicon?(z(),le(Be(r.templates.fileremoveicon),{key:0,class:Ce(oe.class),file:c,index:P},null,8,["class","file","index"])):(z(),le(L,D({key:1,class:oe.class,"aria-hidden":"true"},{ref_for:!0},e.ptm("pcFileRemoveButton").icon),null,16,["class"]))]}),_:2},1032,["onClick","class","unstyled","pt"])],16)],16)}),128)}lt.render=sn;function je(e){return un(e)||on(e)||ot(e)||ln()}function ln(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function un(e){if(Array.isArray(e))return Ke(e)}function Oe(e,a){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ot(e))||a){r&&(e=r);var d=0,y=function(){};return{s:y,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(c){throw c},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,F=!0,L=!1;return{s:function(){r=r.call(e)},n:function(){var c=r.next();return F=c.done,c},e:function(c){L=!0,s=c},f:function(){try{F||r.return==null||r.return()}finally{if(L)throw s}}}}function ot(e,a){if(e){if(typeof e=="string")return Ke(e,a);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ke(e,a):void 0}}function Ke(e,a){(a==null||a>e.length)&&(a=e.length);for(var r=0,d=Array(a);r<a;r++)d[r]=e[r];return d}var ut={name:"FileUpload",extends:an,inheritAttrs:!1,emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove","remove-uploaded-file"],duplicateIEEvent:!1,data:function(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null,uploadedFiles:[]}},methods:{upload:function(){this.hasFiles&&this.uploader()},onBasicUploaderClick:function(a){a.button===0&&this.$refs.fileInput.click()},onFileSelect:function(a){if(a.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.isBasic&&this.hasFiles&&(this.files=[]),this.messages=[],this.files=this.files||[];var r=a.dataTransfer?a.dataTransfer.files:a.target.files,d=Oe(r),y;try{for(d.s();!(y=d.n()).done;){var s=y.value;!this.isFileSelected(s)&&!this.isFileLimitExceeded()&&this.validate(s)&&(this.isImage(s)&&(s.objectURL=window.URL.createObjectURL(s)),this.files.push(s))}}catch(F){d.e(F)}finally{d.f()}this.$emit("select",{originalEvent:a,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.uploader(),a.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose:function(){this.$refs.fileInput.click()},uploader:function(){var a=this;if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{var r=new XMLHttpRequest,d=new FormData;this.$emit("before-upload",{xhr:r,formData:d});var y=Oe(this.files),s;try{for(y.s();!(s=y.n()).done;){var F=s.value;d.append(this.name,F,F.name)}}catch(L){y.e(L)}finally{y.f()}r.upload.addEventListener("progress",function(L){L.lengthComputable&&(a.progress=Math.round(L.loaded*100/L.total)),a.$emit("progress",{originalEvent:L,progress:a.progress})}),r.onreadystatechange=function(){if(r.readyState===4){if(a.progress=0,r.status>=200&&r.status<300){var L;a.fileLimit&&(a.uploadedFileCount+=a.files.length),a.$emit("upload",{xhr:r,files:a.files}),(L=a.uploadedFiles).push.apply(L,je(a.files))}else a.$emit("error",{xhr:r,files:a.files});a.clear()}},this.url&&(r.open("POST",this.url,!0),this.$emit("before-send",{xhr:r,formData:d}),r.withCredentials=this.withCredentials,r.send(d))}},clear:function(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus:function(){this.focused=!0},onBlur:function(){this.focused=!1},isFileSelected:function(a){if(this.files&&this.files.length){var r=Oe(this.files),d;try{for(r.s();!(d=r.n()).done;){var y=d.value;if(y.name+y.type+y.size===a.name+a.type+a.size)return!0}}catch(s){r.e(s)}finally{r.f()}}return!1},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},validate:function(a){return this.accept&&!this.isFileTypeValid(a)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",a.name).replace("{1}",this.accept)),!1):this.maxFileSize&&a.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",a.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid:function(a){var r=this.accept.split(",").map(function(L){return L.trim()}),d=Oe(r),y;try{for(d.s();!(y=d.n()).done;){var s=y.value,F=this.isWildcard(s)?this.getTypeClass(a.type)===this.getTypeClass(s):a.type==s||this.getFileExtension(a).toLowerCase()===s.toLowerCase();if(F)return!0}}catch(L){d.e(L)}finally{d.f()}return!1},getTypeClass:function(a){return a.substring(0,a.indexOf("/"))},isWildcard:function(a){return a.indexOf("*")!==-1},getFileExtension:function(a){return"."+a.name.split(".").pop()},isImage:function(a){return/^image\//.test(a.type)},onDragEnter:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(a.stopPropagation(),a.preventDefault())},onDragOver:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(!this.isUnstyled&&mt(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!0),a.stopPropagation(),a.preventDefault())},onDragLeave:function(){this.disabled||(!this.isUnstyled&&Ye(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1))},onDrop:function(a){if(!this.disabled){!this.isUnstyled&&Ye(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1),a.stopPropagation(),a.preventDefault();var r=a.dataTransfer?a.dataTransfer.files:a.target.files,d=this.multiple||r&&r.length===1;d&&this.onFileSelect(a)}},remove:function(a){this.clearInputElement();var r=this.files.splice(a,1)[0];this.files=je(this.files),this.$emit("remove",{file:r,files:this.files})},removeUploadedFile:function(a){var r=this.uploadedFiles.splice(a,1)[0];this.uploadedFiles=je(this.uploadedFiles),this.$emit("remove-uploaded-file",{file:r,files:this.uploadedFiles})},clearInputElement:function(){this.$refs.fileInput.value=""},clearIEInput:function(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize:function(a){var r,d=1024,y=3,s=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(s[0]);var F=Math.floor(Math.log(a)/Math.log(d)),L=parseFloat((a/Math.pow(d,F)).toFixed(y));return"".concat(L," ").concat(s[F])},isFileLimitExceeded:function(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit:function(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose:function(){this.messages=null}},computed:{isAdvanced:function(){return this.mode==="advanced"},isBasic:function(){return this.mode==="basic"},chooseButtonClass:function(){return[this.cx("pcChooseButton"),this.class]},basicFileChosenLabel:function(){var a;if(this.auto)return this.chooseButtonLabel;if(this.hasFiles){var r;return this.files&&this.files.length===1?this.files[0].name:(r=this.$primevue.config.locale)===null||r===void 0||(r=r.fileChosenMessage)===null||r===void 0?void 0:r.replace("{0}",this.files.length)}return((a=this.$primevue.config.locale)===null||a===void 0?void 0:a.noFileChosenMessage)||""},hasFiles:function(){return this.files&&this.files.length>0},hasUploadedFiles:function(){return this.uploadedFiles&&this.uploadedFiles.length>0},chooseDisabled:function(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled:function(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled:function(){return this.disabled||!this.hasFiles},chooseButtonLabel:function(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel:function(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel:function(){return this.cancelLabel||this.$primevue.config.locale.cancel},completedLabel:function(){return this.$primevue.config.locale.completed},pendingLabel:function(){return this.$primevue.config.locale.pending}},components:{Button:Ue,ProgressBar:st,Message:Et,FileContent:lt,PlusIcon:Ct,UploadIcon:rt,TimesIcon:at},directives:{ripple:ct}},dn=["multiple","accept","disabled"],pn=["accept","disabled","multiple"];function cn(e,a,r,d,y,s){var F=ge("Button"),L=ge("ProgressBar"),Y=ge("Message"),c=ge("FileContent");return s.isAdvanced?(z(),$("div",D({key:0,class:e.cx("root")},e.ptmi("root")),[u("input",D({ref:"fileInput",type:"file",onChange:a[0]||(a[0]=function(){return s.onFileSelect&&s.onFileSelect.apply(s,arguments)}),multiple:e.multiple,accept:e.accept,disabled:s.chooseDisabled},e.ptm("input")),null,16,dn),u("div",D({class:e.cx("header")},e.ptm("header")),[he(e.$slots,"header",{files:y.files,uploadedFiles:y.uploadedFiles,chooseCallback:s.choose,uploadCallback:s.uploader,clearCallback:s.clear},function(){return[x(F,D({label:s.chooseButtonLabel,class:s.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onClick:s.choose,onKeydown:Xe(s.choose,["enter"]),onFocus:s.onFocus,onBlur:s.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:U(function(P){return[he(e.$slots,"chooseicon",{},function(){return[(z(),le(Be(e.chooseIcon?"span":"PlusIcon"),D({class:[P.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onClick","onKeydown","onFocus","onBlur","pt"]),e.showUploadButton?(z(),le(F,D({key:0,class:e.cx("pcUploadButton"),label:s.uploadButtonLabel,onClick:s.uploader,disabled:s.uploadDisabled,unstyled:e.unstyled},e.uploadButtonProps,{pt:e.ptm("pcUploadButton")}),{icon:U(function(P){return[he(e.$slots,"uploadicon",{},function(){return[(z(),le(Be(e.uploadIcon?"span":"UploadIcon"),D({class:[P.class,e.uploadIcon],"aria-hidden":"true"},e.ptm("pcUploadButton").icon,{"data-pc-section":"uploadbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):te("",!0),e.showCancelButton?(z(),le(F,D({key:1,class:e.cx("pcCancelButton"),label:s.cancelButtonLabel,onClick:s.clear,disabled:s.cancelDisabled,unstyled:e.unstyled},e.cancelButtonProps,{pt:e.ptm("pcCancelButton")}),{icon:U(function(P){return[he(e.$slots,"cancelicon",{},function(){return[(z(),le(Be(e.cancelIcon?"span":"TimesIcon"),D({class:[P.class,e.cancelIcon],"aria-hidden":"true"},e.ptm("pcCancelButton").icon,{"data-pc-section":"cancelbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):te("",!0)]})],16),u("div",D({ref:"content",class:e.cx("content"),onDragenter:a[1]||(a[1]=function(){return s.onDragEnter&&s.onDragEnter.apply(s,arguments)}),onDragover:a[2]||(a[2]=function(){return s.onDragOver&&s.onDragOver.apply(s,arguments)}),onDragleave:a[3]||(a[3]=function(){return s.onDragLeave&&s.onDragLeave.apply(s,arguments)}),onDrop:a[4]||(a[4]=function(){return s.onDrop&&s.onDrop.apply(s,arguments)})},e.ptm("content"),{"data-p-highlight":!1}),[he(e.$slots,"content",{files:y.files,uploadedFiles:y.uploadedFiles,removeUploadedFileCallback:s.removeUploadedFile,removeFileCallback:s.remove,progress:y.progress,messages:y.messages},function(){return[s.hasFiles?(z(),le(L,{key:0,value:y.progress,showValue:!1,unstyled:e.unstyled,pt:e.ptm("pcProgressbar")},null,8,["value","unstyled","pt"])):te("",!0),(z(!0),$(qe,null,$e(y.messages,function(P){return z(),le(Y,{key:P,severity:"error",onClose:s.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:U(function(){return[ae(re(P),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),s.hasFiles?(z(),$("div",{key:1,class:Ce(e.cx("fileList"))},[x(c,{files:y.files,onRemove:s.remove,badgeValue:s.pendingLabel,previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):te("",!0),s.hasUploadedFiles?(z(),$("div",{key:2,class:Ce(e.cx("fileList"))},[x(c,{files:y.uploadedFiles,onRemove:s.removeUploadedFile,badgeValue:s.completedLabel,badgeSeverity:"success",previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):te("",!0)]}),e.$slots.empty&&!s.hasFiles&&!s.hasUploadedFiles?(z(),$("div",ht(D({key:0},e.ptm("empty"))),[he(e.$slots,"empty")],16)):te("",!0)],16)],16)):s.isBasic?(z(),$("div",D({key:1,class:e.cx("root")},e.ptmi("root")),[(z(!0),$(qe,null,$e(y.messages,function(P){return z(),le(Y,{key:P,severity:"error",onClose:s.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:U(function(){return[ae(re(P),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),u("div",D({class:e.cx("basicContent")},e.ptm("basicContent")),[x(F,D({label:s.chooseButtonLabel,class:s.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onMouseup:s.onBasicUploaderClick,onKeydown:Xe(s.choose,["enter"]),onFocus:s.onFocus,onBlur:s.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:U(function(P){return[he(e.$slots,"chooseicon",{},function(){return[(z(),le(Be(e.chooseIcon?"span":"PlusIcon"),D({class:[P.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onMouseup","onKeydown","onFocus","onBlur","pt"]),e.auto?te("",!0):he(e.$slots,"filelabel",{key:0,class:Ce(e.cx("filelabel")),files:y.files},function(){return[u("span",{class:Ce(e.cx("filelabel"))},re(s.basicFileChosenLabel),3)]}),u("input",D({ref:"fileInput",type:"file",accept:e.accept,disabled:e.disabled,multiple:e.multiple,onChange:a[5]||(a[5]=function(){return s.onFileSelect&&s.onFileSelect.apply(s,arguments)}),onFocus:a[6]||(a[6]=function(){return s.onFocus&&s.onFocus.apply(s,arguments)}),onBlur:a[7]||(a[7]=function(){return s.onBlur&&s.onBlur.apply(s,arguments)})},e.ptm("input")),null,16,pn)],16)],16)):te("",!0)}ut.render=cn;const fn={class:"min-h-screen bg-gray-50 p-6"},mn={class:"max-w-5xl mx-auto"},hn={class:"mb-4"},gn={key:0},bn={key:0,class:"text-sm text-red-600"},vn={class:"mt-2"},yn={key:1,class:"text-sm text-gray-700"},kn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wn={class:"md:col-span-2"},Cn={class:"md:col-span-2"},Sn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},En={class:"space-y-2"},Fn={class:"space-y-4"},_n={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},An={class:"font-semibold text-gray-900 mb-3"},In={key:0,class:"text-sm text-gray-600 mt-2 text-center"},Ln={class:"flex justify-end gap-3"},On={__name:"Campaign",setup(e){const a=yt(),r=ie([]),d=ie(""),y=ie(""),s=ie(!1);ie("");const F=gt(),L=async(p,t={})=>{const h={ts:new Date().toISOString(),message:p,meta:t};try{const E=`${window.location.origin}/client-log`;await Te.post(E,h,{timeout:3e3})}catch{try{const l=`${window.location.origin}/client-log`;await Te.post(l,h,{timeout:3e3})}catch(l){try{console.log("sendServerLog error (both attempts)",l)}catch{}}}try{console.log(`${h.ts} - ${h.message}`)}catch{}};try{window.__sendClientLog=(p="client-log test ping")=>L(p,{test:!0})}catch{}const Y=["Immobilier","Tech","Finance","Conseil","Autre"],P=ie([...[{label:"United States",value:"+14752906147"},{label:"Switzerland",value:"+41234567890"}]]),oe=async()=>{try{const{data:{user:p}}=await Le.auth.getUser();if(!p)return;const{data:t,error:h}=await Le.from("user_dedicated_numbers").select("number,country_code").eq("user_id",p.id);!h&&Array.isArray(t)&&t.forEach(E=>{P.value.unshift({label:`${E.country_code||"DED"} ${E.number}`,value:E.number})})}catch(p){console.error("loadUserNumbers error",p)}};et(()=>{T(),oe()}),tt(X,p=>{if(p===0&&Z.value>0&&!Se.value){const t=Z.value?`Vous avez atteint la limite de ${Z.value} campagnes pour ce mois. Passez  un plan payant pour supprimer cette limite.`:"Vous avez atteint la limite de campagnes pour ce mois. Passez  un plan payant pour supprimer cette limite.";try{F.add({severity:"warn",summary:"Limite atteinte",detail:t,life:8e3})}catch{}Se.value=!0}else p>0&&(Se.value=!1)});const ye=[{label:"Africa/Porto-Novo",value:"Africa/Porto-Novo"},{label:"Africa/Cairo",value:"Africa/Cairo"},{label:"Africa/Johannesburg",value:"Africa/Johannesburg"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"America/Denver",value:"America/Denver"},{label:"America/Chicago",value:"America/Chicago"},{label:"America/New_York",value:"America/New_York"},{label:"America/Phoenix",value:"America/Phoenix"},{label:"America/Anchorage",value:"America/Anchorage"},{label:"America/Halifax",value:"America/Halifax"},{label:"America/Sao_Paulo",value:"America/Sao_Paulo"},{label:"Europe/London",value:"Europe/London"},{label:"Europe/Paris",value:"Europe/Paris"},{label:"Europe/Zurich",value:"Europe/Zurich"},{label:"Europe/Berlin",value:"Europe/Berlin"},{label:"Asia/Dubai",value:"Asia/Dubai"},{label:"Asia/Kolkata",value:"Asia/Kolkata"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"},{label:"Australia/Sydney",value:"Australia/Sydney"},{label:"Pacific/Auckland",value:"Pacific/Auckland"},{label:"UTC",value:"UTC"}],ke=[{label:"Prise de rendez-vous",value:"Prise de rendez-vous"},{label:"Qualification de prospects",value:"Qualification de prospects"},{label:"Vente directe",value:"Vente directe"},{label:"Relance clients",value:"Relance clients"},{label:"Sondage",value:"Sondage"},{label:"Demande d'information",value:"Demande d'information"}],k=bt({company_name:"",domain:"",promesse_de_valeur:"",confidence_threshold:.7,agent_name:"Julie",referral_name:"",infos:"",objectifs:"",contact_first_name:"",decision_maker_name:"",processus_metier:"",key_capability:"",call_script_example:"",decision_committee:[],from_number:"+14752906147",pain_point_identifie:"",timezone:"Africa/Porto-Novo"}),we=ie([]),ce=ie("starter"),Fe=ie(60);ie(null);const _e=ie(0),Se=ie(!1),Re=Ne(()=>we.value.find(p=>p.slug===ce.value)||null),Z=Ne(()=>Number(Re.value?.monthly_campaign_limit||0)),X=Ne(()=>Math.max(0,Z.value-(_e.value||0))),T=async()=>{try{const{data:{user:p}}=await Le.auth.getUser();if(!p)return;const t=new Date;t.setUTCDate(1),t.setUTCHours(0,0,0,0);const{data:h,error:E}=await Le.from("campaigns").select("id").eq("user_id",p.id).gte("created_at",t.toISOString());!E&&Array.isArray(h)&&(_e.value=h.length)}catch{}};et(()=>{T()}),tt(ce,()=>{T()}),(async()=>{try{const p=await Te.get("/api/plans");we.value=p.data||[],we.value.length>0&&(ce.value=we.value[0].slug)}catch{}})();const i=p=>{if(!p)return"";let t=p.replace(/[\s\-\(\)\.]/g,"");return t.startsWith("+")?t:t.startsWith("00")?"+"+t.substring(2):"+"+t},o=p=>{if(!p)return[];const t=It.parse(p,{header:!0,skipEmptyLines:!0,transformHeader:E=>(E||"").trim().toLowerCase()}),h=[];return!t||!t.data||t.data.forEach(E=>{const l={};for(const v in E){const g=(E[v]||"").toString().trim();g&&(v.includes("nom")||v.includes("name")?l.nom=g:v.includes("email")||v.includes("mail")?l.email=g:v.includes("tel")||v.includes("phone")||v.includes("telephone")?l.telephone=i(g):(v.includes("entreprise")||v.includes("company")||v.includes("societe"))&&(l.entreprise=g))}(l.telephone&&l.telephone.trim()||l.email&&l.email.trim())&&h.push(l)}),h},m=p=>{const t=p&&p.files&&p.files[0]?p.files[0]:p&&p.target&&p.target.files&&p.target.files[0];if(!t){d.value="Aucun fichier slectionn",r.value=[];return}const h=new FileReader;h.onload=E=>{try{const l=E.target.result,v=o(l);r.value=v,r.value.length===0?d.value="Aucun contact valide trouv dans le fichier CSV":d.value=""}catch(l){console.error("Erreur lecture CSV:",l),d.value="Erreur lors de la lecture du fichier CSV",r.value=[]}},h.readAsText(t,"utf-8")},f=async()=>{const t=[{key:"company_name",label:"Nom de l'entreprise"},{key:"domain",label:"Secteur d'activit"},{key:"promesse_de_valeur",label:"Promesse de valeur"},{key:"infos",label:"Description entreprise / service"},{key:"agent_name",label:"Nom de l'agent"},{key:"objectifs",label:"Objectifs de Prospection"}].filter(h=>!(k[h.key]&&String(k[h.key]).trim().length>0)).map(h=>h.label);if(r.value.length===0&&t.push("Fichier de contacts (CSV)"),t.length>0){const h=`Veuillez renseigner les champs obligatoires : ${t.join(", ")}`;d.value=h;try{F.add({severity:"warn",summary:"Champs manquants",detail:h,life:6e3})}catch{}return}if(Z.value>0&&X.value===0){const h=Z.value?`Vous avez atteint la limite de ${Z.value} campagnes pour ce mois. Passez  un plan payant pour supprimer cette limite.`:"Vous avez atteint la limite de campagnes pour ce mois. Passez  un plan payant pour supprimer cette limite.";d.value=h;try{F.add({severity:"warn",summary:"Limite atteinte",detail:h,life:8e3})}catch{}return}d.value="",y.value="",s.value=!0;try{L(`Dmarrage de la cration de campagne, contacts chargs: ${r.value.length}`,{contacts_count:r.value.length});const{data:{user:h}}=await Le.auth.getUser();if(L(`Rsultat supabase.auth.getUser(): ${h?h.id:"aucun user"}`,{user:h?h.id:null}),!h)throw new Error("Utilisateur non authentifi");const E={user_id:h.id,company_name:k.company_name,domain:k.domain,promesse_de_valeur:k.promesse_de_valeur,confidence_threshold:k.confidence_threshold||.7,agent_name:k.agent_name,referral_name:k.referral_name,infos:k.infos,objectifs:k.objectifs,contacts:r.value,contacts_count:r.value.length,estimated_avg_call_seconds:Number(Fe.value)||60,from_number:k.from_number,timezone:k.timezone};try{const l=await Te.post("/api/create-campaign",E,{timeout:3e4});if(l.status===201||l.status===202){const v=`Campagne cre avec succs ! ${r.value.length} contacts seront prospects.`;y.value=v;try{F.add({severity:"success",summary:"Campagne cre",detail:v,life:6e3})}catch{}setTimeout(()=>a.push("/"),2e3)}else{const v=`Erreur lors de la cration de la campagne: ${l.data&&l.data.error?l.data.error:"erreur inconnue"}`;d.value=v;try{F.add({severity:"error",summary:"Erreur",detail:v,life:8e3})}catch{}}}catch(l){if(l?.response?.status===402){const g=(l.response.data||{}).error||"Solde insuffisant. Veuillez recharger votre compte.";d.value=g;try{F.add({severity:"warn",summary:"Solde insuffisant",detail:g,life:8e3})}catch{}}else if(l?.response?.data&&l.response.data.error){const v=l.response.data.error;d.value=v;try{F.add({severity:"error",summary:"Erreur",detail:v,life:8e3})}catch{}}else{console.error("Erreur lors de la cration de la campagne:",l);const v="Erreur lors de la cration de la campagne (serveur)";d.value=v;try{F.add({severity:"error",summary:"Erreur serveur",detail:v,life:8e3})}catch{}}}}catch(h){console.error("Erreur lors de la construction du batch pour le serveur:",h),L(`Erreur inattendue lors de la construction du batch: ${h&&h.message?h.message:JSON.stringify(h)}`);const E=h.message||"Erreur lors de la cration de la campagne";d.value=E;try{F.add({severity:"error",summary:"Erreur",detail:E,life:8e3})}catch{}}finally{s.value=!1}};return(p,t)=>{const h=ge("router-link"),E=ge("Message");return z(),$("div",fn,[u("div",mn,[x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{content:U(()=>[t[31]||(t[31]=u("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Nouvelle Campagne de Prospection ",-1)),x(E,{severity:"info",closable:!1,class:"mb-0"},{default:U(()=>[t[19]||(t[19]=ae(" Configurez votre agent vocal AI avec les informations de votre entreprise et les objectifs de prospection. L'agent matrise les techniques avances : ",-1)),t[20]||(t[20]=u("strong",null,"Cold Call 2.0",-1)),t[21]||(t[21]=ae(", ",-1)),t[22]||(t[22]=u("strong",null,"SPIN Selling",-1)),t[23]||(t[23]=ae(", ",-1)),t[24]||(t[24]=u("strong",null,"NEPQ",-1)),t[25]||(t[25]=ae(", ",-1)),t[26]||(t[26]=u("strong",null,"BANT",-1)),t[27]||(t[27]=ae(", ",-1)),t[28]||(t[28]=u("strong",null,"Feel-Felt-Found",-1)),t[29]||(t[29]=ae(", ",-1)),t[30]||(t[30]=u("strong",null,"S.A.F.E.",-1)),x(h,{to:"/techniques",class:"ml-2 text-gray-900 font-semibold underline"},{default:U(()=>[...t[18]||(t[18]=[ae(" En savoir plus sur ces techniques ",-1)])]),_:1})]),_:1})]),_:1}),u("div",hn,[Z.value>0?(z(),$("div",gn,[X.value===0?(z(),$("div",bn,[u("strong",null,"Vous avez atteint la limite de "+re(Z.value)+" campagnes pour ce mois.",1),t[32]||(t[32]=ae(" Passez  un plan payant pour supprimer cette limite. ",-1)),u("div",vn,[u("button",{onClick:t[0]||(t[0]=l=>p.$router.push("/pricing")),class:"bg-blue-600 text-white px-3 py-1 rounded text-sm"},"Voir les plans")])])):(z(),$("div",yn,"Campagnes ce mois: "+re(_e.value)+" / "+re(Z.value)+"  il vous reste "+re(X.value)+".",1))])):te("",!0)]),u("form",{onSubmit:vt(f,["prevent"])},[x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:U(()=>[...t[33]||(t[33]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-building text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Informations Entreprise")],-1)])]),content:U(()=>[u("div",kn,[u("div",wn,[t[34]||(t[34]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'entreprise *",-1)),x(B(me),{modelValue:k.company_name,"onUpdate:modelValue":t[1]||(t[1]=l=>k.company_name=l),placeholder:"Votre Entreprise",class:"w-full",required:""},null,8,["modelValue"])]),u("div",null,[t[35]||(t[35]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Secteur d'activit *",-1)),x(B(Pe),{modelValue:k.domain,"onUpdate:modelValue":t[2]||(t[2]=l=>k.domain=l),options:Y,placeholder:"Slectionnez un secteur",class:"w-full",required:""},null,8,["modelValue"]),t[36]||(t[36]=u("small",{class:"text-gray-500 text-sm mt-1 block"}," Options disponibles : Immobilier, Tech, Finance, Conseil, Autre ",-1))]),u("div",null,[t[37]||(t[37]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Promesse de valeur (bnfice principal) *",-1)),x(B(me),{modelValue:k.promesse_de_valeur,"onUpdate:modelValue":t[3]||(t[3]=l=>k.promesse_de_valeur=l),placeholder:"Bnfice principal en une phrase",class:"w-full",required:""},null,8,["modelValue"])]),u("div",Cn,[t[38]||(t[38]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Description entreprise / service *",-1)),x(B(He),{modelValue:k.infos,"onUpdate:modelValue":t[4]||(t[4]=l=>k.infos=l),placeholder:"Dcrivez votre entreprise, vos services, vos produits (2-3 phrases max)...",rows:"5",class:"w-full",required:""},null,8,["modelValue"])])])]),_:1}),x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:U(()=>[...t[39]||(t[39]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-user text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Configuration Agent")],-1)])]),content:U(()=>[u("div",Sn,[u("div",null,[t[40]||(t[40]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'agent *",-1)),x(B(me),{modelValue:k.agent_name,"onUpdate:modelValue":t[5]||(t[5]=l=>k.agent_name=l),placeholder:"Julie",class:"w-full",required:""},null,8,["modelValue"])]),u("div",null,[t[41]||(t[41]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Seuil de confiance (0.0 - 1.0)",-1)),x(B(St),{modelValue:k.confidence_threshold,"onUpdate:modelValue":t[6]||(t[6]=l=>k.confidence_threshold=l),min:0,max:1,step:.1,minFractionDigits:1,maxFractionDigits:2,placeholder:"0.7",class:"w-full"},null,8,["modelValue"]),t[42]||(t[42]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Plus lev = plus slectif dans les rponses",-1))])])]),_:1}),x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:U(()=>[...t[43]||(t[43]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-comments text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Variables Conversationnelles (optionnel)")],-1)])]),content:U(()=>[u("div",xn,[u("div",null,[t[44]||(t[44]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Prnom du prospect",-1)),x(B(me),{modelValue:k.contact_first_name,"onUpdate:modelValue":t[7]||(t[7]=l=>k.contact_first_name=l),placeholder:"Dfaut : Monsieur / Madame",class:"w-full"},null,8,["modelValue"]),t[45]||(t[45]=u("small",{class:"text-gray-500 text-sm mt-1 block"},' Laissez vide pour utiliser "Monsieur/Madame" automatiquement. ',-1))]),u("div",null,[t[46]||(t[46]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du rfrent (warm calling)",-1)),x(B(me),{modelValue:k.referral_name,"onUpdate:modelValue":t[8]||(t[8]=l=>k.referral_name=l),placeholder:"Nom du rfrent (optionnel)",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[47]||(t[47]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du dcisionnaire",-1)),x(B(me),{modelValue:k.decision_maker_name,"onUpdate:modelValue":t[9]||(t[9]=l=>k.decision_maker_name=l),placeholder:"Nom du dcisionnaire (si connu)",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[48]||(t[48]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Processus mtier cibl",-1)),x(B(me),{modelValue:k.processus_metier,"onUpdate:modelValue":t[10]||(t[10]=l=>k.processus_metier=l),placeholder:"Ex : la gestion locative, le recrutement...",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[49]||(t[49]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Capacit cl  qualifier",-1)),x(B(me),{modelValue:k.key_capability,"onUpdate:modelValue":t[11]||(t[11]=l=>k.key_capability=l),placeholder:"Ex : automatisation, conformit RGPD...",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[50]||(t[50]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Pain point identifi",-1)),x(B(me),{modelValue:k.pain_point_identifie,"onUpdate:modelValue":t[12]||(t[12]=l=>k.pain_point_identifie=l),placeholder:"Ex : Perte de temps sur les tches manuelles",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[51]||(t[51]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Numro d'envoi",-1)),x(B(Pe),{modelValue:k.from_number,"onUpdate:modelValue":t[13]||(t[13]=l=>k.from_number=l),options:P.value,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un numro d'envoi",class:"w-full"},null,8,["modelValue","options"]),t[52]||(t[52]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le numro utilis pour mettre les appels.",-1))]),u("div",null,[t[53]||(t[53]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Fuseau horaire d'appel",-1)),x(B(Pe),{modelValue:k.timezone,"onUpdate:modelValue":t[14]||(t[14]=l=>k.timezone=l),options:ye,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un fuseau horaire",class:"w-full"},null,8,["modelValue"]),t[54]||(t[54]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le fuseau horaire pour la fentre d'appel.",-1))])])]),_:1}),x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:U(()=>[...t[55]||(t[55]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-file-edit text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Script d'appel personnalis (optionnel)")],-1)])]),content:U(()=>[u("div",En,[t[56]||(t[56]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Script d'exemple",-1)),x(B(He),{modelValue:k.call_script_example,"onUpdate:modelValue":t[15]||(t[15]=l=>k.call_script_example=l),placeholder:"Collez ici votre script d'appel en suivant le template recommand (ACCROCHE, DCOUVERTE, TRANSITION VALEUR, CLOSING)...",rows:"8",class:"w-full"},null,8,["modelValue"]),t[57]||(t[57]=u("small",{class:"text-gray-500 text-sm mt-1 block"}," Optionnel. Si laiss vide, l'agent utilisera un script gnr automatiquement  partir de vos variables. ",-1))])]),_:1}),x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:U(()=>[...t[58]||(t[58]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-bullseye text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Objectifs de Prospection")],-1)])]),content:U(()=>[u("div",null,[t[59]||(t[59]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Slectionnez les objectifs *",-1)),x(B(Pe),{modelValue:k.objectifs,"onUpdate:modelValue":t[16]||(t[16]=l=>k.objectifs=l),options:ke,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un objectif",class:"w-full",required:""},null,8,["modelValue"])])]),_:1}),x(B(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:U(()=>[...t[60]||(t[60]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-users text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Contacts  Appeler")],-1)])]),content:U(()=>[u("div",Fn,[u("div",null,[t[61]||(t[61]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Fichier de contacts (CSV) *",-1)),x(B(ut),{mode:"basic",accept:".csv",maxFileSize:1e7,chooseLabel:"Choisir un fichier CSV",onSelect:m,class:"w-full",disabled:s.value},null,8,["disabled"]),t[62]||(t[62]=u("small",{class:"text-gray-500 text-sm mt-1 block"},[ae(" Format CSV attendu : nom, email, tlphone, entreprise (optionnel)"),u("br"),u("span",{class:"text-blue-600"},' Le prfixe "+" sera ajout automatiquement aux numros de tlphone si absent.')],-1))]),r.value.length>0?(z(),$("div",_n,[u("h3",An," Contacts chargs ("+re(r.value.length)+") ",1),x(B(xt),{value:r.value.slice(0,10),paginator:r.value.length>10,rows:5,class:"p-datatable-sm",scrollable:!0,scrollHeight:"200px"},{default:U(()=>[x(B(De),{field:"nom",header:"Nom"}),x(B(De),{field:"email",header:"Email"}),x(B(De),{field:"telephone",header:"Tlphone"}),x(B(De),{field:"entreprise",header:"Entreprise"})]),_:1},8,["value","paginator"]),r.value.length>10?(z(),$("p",In," ... et "+re(r.value.length-10)+" autres contacts ",1)):te("",!0)])):te("",!0)])]),_:1}),x(B(ve),{class:"shadow-md border border-gray-200"},{content:U(()=>[u("div",Ln,[x(B(Ue),{label:"Annuler",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:t[17]||(t[17]=l=>p.$router.push("/")),disabled:s.value},null,8,["disabled"]),x(B(Ue),{type:"submit",label:"Lancer la Campagne",icon:"pi pi-send",loading:s.value,disabled:s.value||r.value.length===0||Z.value>0&&X.value===0,title:Z.value>0&&X.value===0?"Quota mensuel atteint  passez  un plan payant pour lancer plus de campagnes":""},null,8,["loading","disabled","title"])])]),_:1})],32)])])}}};export{On as default};
