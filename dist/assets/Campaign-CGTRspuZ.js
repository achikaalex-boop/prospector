import{L as ot,B as Ke,f as tt,m as O,c as Z,o as D,g as ut,e as o,s as Je,b as ie,r as ge,D as ae,t as ce,R as dt,K as ct,k as Ve,P as Ge,W as pt,q as ye,I as je,y as x,A as Ce,w as M,a as re,d as Be,F as Ne,M as Ye,N as ft,E as he,O as ht,H as I,Q as mt,U as gt,J as Xe}from"./index-DMcYmbUg.js";import{a as Ie}from"./index-B9ygI19o.js";import{s as ve}from"./index-8-wHVXsx.js";import{c as bt,s as nt,b as Te,d as me}from"./index-Bd5N7mNW.js";import{b as vt,c as yt,d as kt,a as wt,s as ze}from"./index-B5X1CcGr.js";var Pe={exports:{}};var Ct=Pe.exports,et;function St(){return et||(et=1,(function(e,i){((r,u)=>{e.exports=u()})(Ct,function r(){var u=typeof self<"u"?self:typeof window<"u"?window:u!==void 0?u:{},g,s=!u.document&&!!u.postMessage,C=u.IS_PAPA_WORKER||!1,R={},ee=0,p={};function T(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(n){var l=B(n);l.chunkSize=parseInt(l.chunkSize),n.step||n.chunk||(l.chunkSize=null),this._handle=new Re(l),(this._handle.streamer=this)._config=l}).call(this,t),this.parseChunk=function(n,l){var f=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<f){let v=this._config.newline;v||(d=this._config.quoteChar||'"',v=this._handle.guessLineEndings(n,d)),n=[...n.split(v).slice(f)].join(v)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(d=this._config.beforeFirstChunk(n))!==void 0&&(n=d),this.isFirstChunk=!1,this._halted=!1;var f=this._partialLine+n,d=(this._partialLine="",this._handle.parse(f,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(n=d.meta.cursor,f=(this._finished||(this._partialLine=f.substring(n-this._baseIndex),this._baseIndex=n),d&&d.data&&(this._rowCount+=d.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),C)u.postMessage({results:d,workerId:p.WORKER_ID,finished:f});else if(b(this._config.chunk)&&!l){if(this._config.chunk(d,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=d=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(d.data),this._completeResults.errors=this._completeResults.errors.concat(d.errors),this._completeResults.meta=d.meta),this._completed||!f||!b(this._config.complete)||d&&d.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),f||d&&d.meta.paused||this._nextChunk(),d}this._halted=!0},this._sendError=function(n){b(this._config.error)?this._config.error(n):C&&this._config.error&&u.postMessage({workerId:p.WORKER_ID,error:n,finished:!1})}}function h(t){var n;(t=t||{}).chunkSize||(t.chunkSize=p.RemoteChunkSize),T.call(this,t),this._nextChunk=s?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(l){this._input=l,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,this._config.withCredentials&&(n.withCredentials=this._config.withCredentials),s||(n.onload=c(this._chunkLoaded,this),n.onerror=c(this._chunkError,this)),n.open(this._config.downloadRequestBody?"POST":"GET",this._input,!s),this._config.downloadRequestHeaders){var l,f=this._config.downloadRequestHeaders;for(l in f)n.setRequestHeader(l,f[l])}var d;this._config.chunkSize&&(d=this._start+this._config.chunkSize-1,n.setRequestHeader("Range","bytes="+this._start+"-"+d));try{n.send(this._config.downloadRequestBody)}catch(v){this._chunkError(v.message)}s&&n.status===0&&this._chunkError()}},this._chunkLoaded=function(){n.readyState===4&&(n.status<200||400<=n.status?this._chunkError():(this._start+=this._config.chunkSize||n.responseText.length,this._finished=!this._config.chunkSize||this._start>=(l=>(l=l.getResponseHeader("Content-Range"))!==null?parseInt(l.substring(l.lastIndexOf("/")+1)):-1)(n),this.parseChunk(n.responseText)))},this._chunkError=function(l){l=n.statusText||l,this._sendError(new Error(l))}}function pe(t){(t=t||{}).chunkSize||(t.chunkSize=p.LocalChunkSize),T.call(this,t);var n,l,f=typeof FileReader<"u";this.stream=function(d){this._input=d,l=d.slice||d.webkitSlice||d.mozSlice,f?((n=new FileReader).onload=c(this._chunkLoaded,this),n.onerror=c(this._chunkError,this)):n=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var d=this._input,v=(this._config.chunkSize&&(v=Math.min(this._start+this._config.chunkSize,this._input.size),d=l.call(d,this._start,v)),n.readAsText(d,this._config.encoding));f||this._chunkLoaded({target:{result:v}})},this._chunkLoaded=function(d){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(d.target.result)},this._chunkError=function(){this._sendError(n.error)}}function ke(t){var n;T.call(this,t=t||{}),this.stream=function(l){return n=l,this._nextChunk()},this._nextChunk=function(){var l,f;if(!this._finished)return l=this._config.chunkSize,n=l?(f=n.substring(0,l),n.substring(l)):(f=n,""),this._finished=!n,this.parseChunk(f)}}function xe(t){T.call(this,t=t||{});var n=[],l=!0,f=!1;this.pause=function(){T.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){T.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(d){this._input=d,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){f&&n.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),n.length?this.parseChunk(n.shift()):l=!0},this._streamData=c(function(d){try{n.push(typeof d=="string"?d:d.toString(this._config.encoding)),l&&(l=!1,this._checkIsFinished(),this.parseChunk(n.shift()))}catch(v){this._streamError(v)}},this),this._streamError=c(function(d){this._streamCleanUp(),this._sendError(d)},this),this._streamEnd=c(function(){this._streamCleanUp(),f=!0,this._streamData("")},this),this._streamCleanUp=c(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Re(t){var n,l,f,d,v=Math.pow(2,53),L=-v,j=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,te=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,$=0,k=0,Y=!1,S=!1,E=[],m={data:[],errors:[],meta:{}};function K(F){return t.skipEmptyLines==="greedy"?F.join("").trim()==="":F.length===1&&F[0].length===0}function H(){if(m&&f&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),f=!1),t.skipEmptyLines&&(m.data=m.data.filter(function(w){return!K(w)})),G()){let w=function(W,J){b(t.transformHeader)&&(W=t.transformHeader(W,J)),E.push(W)};if(m)if(Array.isArray(m.data[0])){for(var F=0;G()&&F<m.data.length;F++)m.data[F].forEach(w);m.data.splice(0,1)}else m.data.forEach(w)}function z(w,W){for(var J=t.header?{}:[],V=0;V<w.length;V++){var U=V,A=w[V],A=((le,_)=>(N=>(t.dynamicTypingFunction&&t.dynamicTyping[N]===void 0&&(t.dynamicTyping[N]=t.dynamicTypingFunction(N)),(t.dynamicTyping[N]||t.dynamicTyping)===!0))(le)?_==="true"||_==="TRUE"||_!=="false"&&_!=="FALSE"&&((N=>{if(j.test(N)&&(N=parseFloat(N),L<N&&N<v))return 1})(_)?parseFloat(_):te.test(_)?new Date(_):_===""?null:_):_)(U=t.header?V>=E.length?"__parsed_extra":E[V]:U,A=t.transform?t.transform(A,U):A);U==="__parsed_extra"?(J[U]=J[U]||[],J[U].push(A)):J[U]=A}return t.header&&(V>E.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+E.length+" fields but parsed "+V,k+W):V<E.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+E.length+" fields but parsed "+V,k+W)),J}var q;m&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(z),q=m.data.length):m.data=z(m.data,0),t.header&&m.meta&&(m.meta.fields=E),k+=q)}function G(){return t.header&&E.length===0}function se(F,z,q,w){F={type:F,code:z,message:q},w!==void 0&&(F.row=w),m.errors.push(F)}b(t.step)&&(d=t.step,t.step=function(F){m=F,G()?H():(H(),m.data.length!==0&&($+=F.data.length,t.preview&&$>t.preview?l.abort():(m.data=m.data[0],d(m,y))))}),this.parse=function(F,z,q){var w=t.quoteChar||'"',w=(t.newline||(t.newline=this.guessLineEndings(F,w)),f=!1,t.delimiter?b(t.delimiter)&&(t.delimiter=t.delimiter(F),m.meta.delimiter=t.delimiter):((w=((W,J,V,U,A)=>{var le,_,N,be;A=A||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Se=0;Se<A.length;Se++){for(var oe,Fe=A[Se],X=0,ue=0,Q=0,ne=(N=void 0,new Ee({comments:U,delimiter:Fe,newline:J,preview:10}).parse(W)),fe=0;fe<ne.data.length;fe++)V&&K(ne.data[fe])?Q++:(oe=ne.data[fe].length,ue+=oe,N===void 0?N=oe:0<oe&&(X+=Math.abs(oe-N),N=oe));0<ne.data.length&&(ue/=ne.data.length-Q),(_===void 0||X<=_)&&(be===void 0||be<ue)&&1.99<ue&&(_=X,le=Fe,be=ue)}return{successful:!!(t.delimiter=le),bestDelimiter:le}})(F,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=w.bestDelimiter:(f=!0,t.delimiter=p.DefaultDelimiter),m.meta.delimiter=t.delimiter),B(t));return t.preview&&t.header&&w.preview++,n=F,l=new Ee(w),m=l.parse(n,z,q),H(),Y?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return Y},this.pause=function(){Y=!0,l.abort(),n=b(t.chunk)?"":n.substring(l.getCharIndex())},this.resume=function(){y.streamer._halted?(Y=!1,y.streamer.parseChunk(n,!0)):setTimeout(y.resume,3)},this.aborted=function(){return S},this.abort=function(){S=!0,l.abort(),m.meta.aborted=!0,b(t.complete)&&t.complete(m),n=""},this.guessLineEndings=function(W,w){W=W.substring(0,1048576);var w=new RegExp(we(w)+"([^]*?)"+we(w),"gm"),q=(W=W.replace(w,"")).split("\r"),w=W.split(`
`),W=1<w.length&&w[0].length<q[0].length;if(q.length===1||W)return`
`;for(var J=0,V=0;V<q.length;V++)q[V][0]===`
`&&J++;return J>=q.length/2?`\r
`:"\r"}}function we(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ee(t){var n=(t=t||{}).delimiter,l=t.newline,f=t.comments,d=t.step,v=t.preview,L=t.fastMode,j=null,te=!1,y=t.quoteChar==null?'"':t.quoteChar,$=y;if(t.escapeChar!==void 0&&($=t.escapeChar),(typeof n!="string"||-1<p.BAD_DELIMITERS.indexOf(n))&&(n=","),f===n)throw new Error("Comment character same as delimiter");f===!0?f="#":(typeof f!="string"||-1<p.BAD_DELIMITERS.indexOf(f))&&(f=!1),l!==`
`&&l!=="\r"&&l!==`\r
`&&(l=`
`);var k=0,Y=!1;this.parse=function(S,E,m){if(typeof S!="string")throw new Error("Input must be a string");var K=S.length,H=n.length,G=l.length,se=f.length,F=b(d),z=[],q=[],w=[],W=k=0;if(!S)return X();if(L||L!==!1&&S.indexOf(y)===-1){for(var J=S.split(l),V=0;V<J.length;V++){if(w=J[V],k+=w.length,V!==J.length-1)k+=l.length;else if(m)return X();if(!f||w.substring(0,se)!==f){if(F){if(z=[],be(w.split(n)),ue(),Y)return X()}else be(w.split(n));if(v&&v<=V)return z=z.slice(0,v),X(!0)}}return X()}for(var U=S.indexOf(n,k),A=S.indexOf(l,k),le=new RegExp(we($)+we(y),"g"),_=S.indexOf(y,k);;)if(S[k]===y)for(_=k,k++;;){if((_=S.indexOf(y,_+1))===-1)return m||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:z.length,index:k}),oe();if(_===K-1)return oe(S.substring(k,_).replace(le,y));if(y===$&&S[_+1]===$)_++;else if(y===$||_===0||S[_-1]!==$){U!==-1&&U<_+1&&(U=S.indexOf(n,_+1));var N=Se((A=A!==-1&&A<_+1?S.indexOf(l,_+1):A)===-1?U:Math.min(U,A));if(S.substr(_+1+N,H)===n){w.push(S.substring(k,_).replace(le,y)),S[k=_+1+N+H]!==y&&(_=S.indexOf(y,k)),U=S.indexOf(n,k),A=S.indexOf(l,k);break}if(N=Se(A),S.substring(_+1+N,_+1+N+G)===l){if(w.push(S.substring(k,_).replace(le,y)),Fe(_+1+N+G),U=S.indexOf(n,k),_=S.indexOf(y,k),F&&(ue(),Y))return X();if(v&&z.length>=v)return X(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:z.length,index:k}),_++}}else if(f&&w.length===0&&S.substring(k,k+se)===f){if(A===-1)return X();k=A+G,A=S.indexOf(l,k),U=S.indexOf(n,k)}else if(U!==-1&&(U<A||A===-1))w.push(S.substring(k,U)),k=U+H,U=S.indexOf(n,k);else{if(A===-1)break;if(w.push(S.substring(k,A)),Fe(A+G),F&&(ue(),Y))return X();if(v&&z.length>=v)return X(!0)}return oe();function be(Q){z.push(Q),W=k}function Se(Q){var ne=0;return ne=Q!==-1&&(Q=S.substring(_+1,Q))&&Q.trim()===""?Q.length:ne}function oe(Q){return m||(Q===void 0&&(Q=S.substring(k)),w.push(Q),k=K,be(w),F&&ue()),X()}function Fe(Q){k=Q,be(w),w=[],A=S.indexOf(l,k)}function X(Q){if(t.header&&!E&&z.length&&!te){var ne=z[0],fe=Object.create(null),Me=new Set(ne);let Qe=!1;for(let _e=0;_e<ne.length;_e++){let de=ne[_e];if(fe[de=b(t.transformHeader)?t.transformHeader(de,_e):de]){let Ae,Ze=fe[de];for(;Ae=de+"_"+Ze,Ze++,Me.has(Ae););Me.add(Ae),ne[_e]=Ae,fe[de]++,Qe=!0,(j=j===null?{}:j)[Ae]=de}else fe[de]=1,ne[_e]=de;Me.add(de)}Qe&&console.warn("Duplicate headers found and renamed."),te=!0}return{data:z,errors:q,meta:{delimiter:n,linebreak:l,aborted:Y,truncated:!!Q,cursor:W+(E||0),renamedHeaders:j}}}function ue(){d(X()),z=[],q=[]}},this.abort=function(){Y=!0},this.getCharIndex=function(){return k}}function Ue(t){var n=t.data,l=R[n.workerId],f=!1;if(n.error)l.userError(n.error,n.file);else if(n.results&&n.results.data){var d={abort:function(){f=!0,P(n.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:a,resume:a};if(b(l.userStep)){for(var v=0;v<n.results.data.length&&(l.userStep({data:n.results.data[v],errors:n.results.errors,meta:n.results.meta},d),!f);v++);delete n.results}else b(l.userChunk)&&(l.userChunk(n.results,d,n.file),delete n.results)}n.finished&&!f&&P(n.workerId,n.results)}function P(t,n){var l=R[t];b(l.userComplete)&&l.userComplete(n),l.terminate(),delete R[t]}function a(){throw new Error("Not implemented.")}function B(t){if(typeof t!="object"||t===null)return t;var n,l=Array.isArray(t)?[]:{};for(n in t)l[n]=B(t[n]);return l}function c(t,n){return function(){t.apply(n,arguments)}}function b(t){return typeof t=="function"}return p.parse=function(t,n){var l=(n=n||{}).dynamicTyping||!1;if(b(l)&&(n.dynamicTypingFunction=l,l={}),n.dynamicTyping=l,n.transform=!!b(n.transform)&&n.transform,!n.worker||!p.WORKERS_SUPPORTED)return l=null,p.NODE_STREAM_INPUT,typeof t=="string"?(t=(f=>f.charCodeAt(0)!==65279?f:f.slice(1))(t),l=new(n.download?h:ke)(n)):t.readable===!0&&b(t.read)&&b(t.on)?l=new xe(n):(u.File&&t instanceof File||t instanceof Object)&&(l=new pe(n)),l.stream(t);(l=(()=>{var f;return!!p.WORKERS_SUPPORTED&&(f=(()=>{var d=u.URL||u.webkitURL||null,v=r.toString();return p.BLOB_URL||(p.BLOB_URL=d.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",v,")();"],{type:"text/javascript"})))})(),(f=new u.Worker(f)).onmessage=Ue,f.id=ee++,R[f.id]=f)})()).userStep=n.step,l.userChunk=n.chunk,l.userComplete=n.complete,l.userError=n.error,n.step=b(n.step),n.chunk=b(n.chunk),n.complete=b(n.complete),n.error=b(n.error),delete n.worker,l.postMessage({input:t,config:n,workerId:l.id})},p.unparse=function(t,n){var l=!1,f=!0,d=",",v=`\r
`,L='"',j=L+L,te=!1,y=null,$=!1,k=((()=>{if(typeof n=="object"){if(typeof n.delimiter!="string"||p.BAD_DELIMITERS.filter(function(E){return n.delimiter.indexOf(E)!==-1}).length||(d=n.delimiter),typeof n.quotes!="boolean"&&typeof n.quotes!="function"&&!Array.isArray(n.quotes)||(l=n.quotes),typeof n.skipEmptyLines!="boolean"&&typeof n.skipEmptyLines!="string"||(te=n.skipEmptyLines),typeof n.newline=="string"&&(v=n.newline),typeof n.quoteChar=="string"&&(L=n.quoteChar),typeof n.header=="boolean"&&(f=n.header),Array.isArray(n.columns)){if(n.columns.length===0)throw new Error("Option columns is empty");y=n.columns}n.escapeChar!==void 0&&(j=n.escapeChar+L),n.escapeFormulae instanceof RegExp?$=n.escapeFormulae:typeof n.escapeFormulae=="boolean"&&n.escapeFormulae&&($=/^[=+\-@\t\r].*$/)}})(),new RegExp(we(L),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return Y(null,t,te);if(typeof t[0]=="object")return Y(y||Object.keys(t[0]),t,te)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||y),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),Y(t.fields||[],t.data||[],te);throw new Error("Unable to serialize unrecognized input");function Y(E,m,K){var H="",G=(typeof E=="string"&&(E=JSON.parse(E)),typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(E)&&0<E.length),se=!Array.isArray(m[0]);if(G&&f){for(var F=0;F<E.length;F++)0<F&&(H+=d),H+=S(E[F],F);0<m.length&&(H+=v)}for(var z=0;z<m.length;z++){var q=(G?E:m[z]).length,w=!1,W=G?Object.keys(m[z]).length===0:m[z].length===0;if(K&&!G&&(w=K==="greedy"?m[z].join("").trim()==="":m[z].length===1&&m[z][0].length===0),K==="greedy"&&G){for(var J=[],V=0;V<q;V++){var U=se?E[V]:V;J.push(m[z][U])}w=J.join("").trim()===""}if(!w){for(var A=0;A<q;A++){0<A&&!W&&(H+=d);var le=G&&se?E[A]:A;H+=S(m[z][le],A)}z<m.length-1&&(!K||0<q&&!W)&&(H+=v)}}return H}function S(E,m){var K,H;return E==null?"":E.constructor===Date?JSON.stringify(E).slice(1,25):(H=!1,$&&typeof E=="string"&&$.test(E)&&(E="'"+E,H=!0),K=E.toString().replace(k,j),(H=H||l===!0||typeof l=="function"&&l(E,m)||Array.isArray(l)&&l[m]||((G,se)=>{for(var F=0;F<se.length;F++)if(-1<G.indexOf(se[F]))return!0;return!1})(K,p.BAD_DELIMITERS)||-1<K.indexOf(d)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?L+K+L:K)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!s&&!!u.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=Ee,p.ParserHandle=Re,p.NetworkStreamer=h,p.FileStreamer=pe,p.StringStreamer=ke,p.ReadableStreamStreamer=xe,u.jQuery&&((g=u.jQuery).fn.parse=function(t){var n=t.config||{},l=[];return this.each(function(v){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&u.FileReader)||!this.files||this.files.length===0)return!0;for(var L=0;L<this.files.length;L++)l.push({file:this.files[L],inputElem:this,instanceConfig:g.extend({},n)})}),f(),this;function f(){if(l.length===0)b(t.complete)&&t.complete();else{var v,L,j,te,y=l[0];if(b(t.before)){var $=t.before(y.file,y.inputElem);if(typeof $=="object"){if($.action==="abort")return v="AbortError",L=y.file,j=y.inputElem,te=$.reason,void(b(t.error)&&t.error({name:v},L,j,te));if($.action==="skip")return void d();typeof $.config=="object"&&(y.instanceConfig=g.extend(y.instanceConfig,$.config))}else if($==="skip")return void d()}var k=y.instanceConfig.complete;y.instanceConfig.complete=function(Y){b(k)&&k(Y,y.file,y.inputElem),d()},p.parse(y.file,y.instanceConfig)}}function d(){l.splice(0,1),f()}}),C&&(u.onmessage=function(t){t=t.data,p.WORKER_ID===void 0&&t&&(p.WORKER_ID=t.workerId),typeof t.input=="string"?u.postMessage({workerId:p.WORKER_ID,results:p.parse(t.input,t.config),finished:!0}):(u.File&&t.input instanceof File||t.input instanceof Object)&&(t=p.parse(t.input,t.config))&&u.postMessage({workerId:p.WORKER_ID,results:t,finished:!0})}),(h.prototype=Object.create(T.prototype)).constructor=h,(pe.prototype=Object.create(T.prototype)).constructor=pe,(ke.prototype=Object.create(ke.prototype)).constructor=ke,(xe.prototype=Object.create(T.prototype)).constructor=xe,p})})(Pe)),Pe.exports}var _t=St();const xt=ot(_t);var Et=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,Ft={root:function(i){var r=i.instance,u=i.props;return["p-textarea p-component",{"p-filled":r.$filled,"p-textarea-resizable ":u.autoResize,"p-textarea-sm p-inputfield-sm":u.size==="small","p-textarea-lg p-inputfield-lg":u.size==="large","p-invalid":r.$invalid,"p-variant-filled":r.$variant==="filled","p-textarea-fluid":r.$fluid}]}},At=Ke.extend({name:"textarea",style:Et,classes:Ft}),It={name:"BaseTextarea",extends:bt,props:{autoResize:Boolean},style:At,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function Le(e){"@babel/helpers - typeof";return Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Le(e)}function Bt(e,i,r){return(i=Lt(i))in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,e}function Lt(e){var i=Rt(e,"string");return Le(i)=="symbol"?i:i+""}function Rt(e,i){if(Le(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var u=r.call(e,i);if(Le(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var qe={name:"Textarea",extends:It,inheritAttrs:!1,observer:null,mounted:function(){var i=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){i.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var i=this.$el.style.height,r=parseInt(i)||0,u=this.$el.scrollHeight,g=!r||u>r,s=r&&u<r;s?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):g&&(this.$el.style.height="".concat(u,"px"))}},onInput:function(i){this.autoResize&&this.resize(),this.writeValue(i.target.value,i)}},computed:{attrs:function(){return O(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return tt(Bt({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},zt=["value","name","disabled","aria-invalid","data-p"];function Dt(e,i,r,u,g,s){return D(),Z("textarea",O({class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.invalid||void 0,"data-p":s.dataP,onInput:i[0]||(i[0]=function(){return s.onInput&&s.onInput.apply(s,arguments)})},s.attrs),null,16,zt)}qe.render=Dt;var De={name:"Dropdown",extends:vt,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},it={name:"UploadIcon",extends:ut};function Ot(e){return Ut(e)||Vt(e)||Pt(e)||Tt()}function Tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pt(e,i){if(e){if(typeof e=="string")return We(e,i);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,i):void 0}}function Vt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ut(e){if(Array.isArray(e))return We(e)}function We(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,u=Array(i);r<i;r++)u[r]=e[r];return u}function Mt(e,i,r,u,g,s){return D(),Z("svg",O({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Ot(i[0]||(i[0]=[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z",fill:"currentColor"},null,-1)])),16)}it.render=Mt;var $t=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,jt={root:function(i){var r=i.instance;return["p-progressbar p-component",{"p-progressbar-determinate":r.determinate,"p-progressbar-indeterminate":r.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},Nt=Ke.extend({name:"progressbar",style:$t,classes:jt}),qt={name:"BaseProgressBar",extends:Je,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:Nt,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},at={name:"ProgressBar",extends:qt,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return tt({determinate:this.determinate,indeterminate:this.indeterminate})}}},Wt=["aria-valuenow","data-p"],Ht=["data-p"],Kt=["data-p"],Jt=["data-p"];function Qt(e,i,r,u,g,s){return D(),Z("div",O({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":s.dataP},e.ptmi("root")),[s.determinate?(D(),Z("div",O({key:0,class:e.cx("value"),style:s.progressStyle,"data-p":s.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(D(),Z("div",O({key:0,class:e.cx("label"),"data-p":s.dataP},e.ptm("label")),[ge(e.$slots,"default",{},function(){return[ae(ce(e.value+"%"),1)]})],16,Kt)):ie("",!0)],16,Ht)):s.indeterminate?(D(),Z("div",O({key:1,class:e.cx("value"),"data-p":s.dataP},e.ptm("value")),null,16,Jt)):ie("",!0)],16,Wt)}at.render=Qt;var Zt=`
    .p-fileupload input[type='file'] {
        display: none;
    }

    .p-fileupload-advanced {
        border: 1px solid dt('fileupload.border.color');
        border-radius: dt('fileupload.border.radius');
        background: dt('fileupload.background');
        color: dt('fileupload.color');
    }

    .p-fileupload-header {
        display: flex;
        align-items: center;
        padding: dt('fileupload.header.padding');
        background: dt('fileupload.header.background');
        color: dt('fileupload.header.color');
        border-style: solid;
        border-width: dt('fileupload.header.border.width');
        border-color: dt('fileupload.header.border.color');
        border-radius: dt('fileupload.header.border.radius');
        gap: dt('fileupload.header.gap');
    }

    .p-fileupload-content {
        border: 1px solid transparent;
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.content.gap');
        transition: border-color dt('fileupload.transition.duration');
        padding: dt('fileupload.content.padding');
    }

    .p-fileupload-content .p-progressbar {
        width: 100%;
        height: dt('fileupload.progressbar.height');
    }

    .p-fileupload-file-list {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.filelist.gap');
    }

    .p-fileupload-file {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding: dt('fileupload.file.padding');
        border-block-end: 1px solid dt('fileupload.file.border.color');
        gap: dt('fileupload.file.gap');
    }

    .p-fileupload-file:last-child {
        border-block-end: 0;
    }

    .p-fileupload-file-info {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.file.info.gap');
    }

    .p-fileupload-file-thumbnail {
        flex-shrink: 0;
    }

    .p-fileupload-file-actions {
        margin-inline-start: auto;
    }

    .p-fileupload-highlight {
        border: 1px dashed dt('fileupload.content.highlight.border.color');
    }

    .p-fileupload-basic .p-message {
        margin-block-end: dt('fileupload.basic.gap');
    }

    .p-fileupload-basic-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: dt('fileupload.basic.gap');
    }
`,Gt={root:function(i){var r=i.props;return["p-fileupload p-fileupload-".concat(r.mode," p-component")]},header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button",basicContent:"p-fileupload-basic-content"},Yt=Ke.extend({name:"fileupload",style:Zt,classes:Gt}),Xt={name:"BaseFileUpload",extends:Je,props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:void 0},uploadIcon:{type:String,default:void 0},cancelIcon:{type:String,default:void 0},style:null,class:null,chooseButtonProps:{type:null,default:null},uploadButtonProps:{type:Object,default:function(){return{severity:"secondary"}}},cancelButtonProps:{type:Object,default:function(){return{severity:"secondary"}}}},style:Yt,provide:function(){return{$pcFileUpload:this,$parentInstance:this}}},rt={name:"FileContent",hostName:"FileUpload",extends:Je,emits:["remove"],props:{files:{type:Array,default:function(){return[]}},badgeSeverity:{type:String,default:"warn"},badgeValue:{type:String,default:null},previewWidth:{type:Number,default:50},templates:{type:null,default:null}},methods:{formatSize:function(i){var r,u=1024,g=3,s=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(i===0)return"0 ".concat(s[0]);var C=Math.floor(Math.log(i)/Math.log(u)),R=parseFloat((i/Math.pow(u,C)).toFixed(g));return"".concat(R," ").concat(s[C])}},components:{Button:Ve,Badge:ct,TimesIcon:nt}},en=["alt","src","width"];function tn(e,i,r,u,g,s){var C=ye("Badge"),R=ye("TimesIcon"),ee=ye("Button");return D(!0),Z(Ne,null,je(r.files,function(p,T){return D(),Z("div",O({key:p.name+p.type+p.size,class:e.cx("file")},{ref_for:!0},e.ptm("file")),[o("img",O({role:"presentation",class:e.cx("fileThumbnail"),alt:p.name,src:p.objectURL,width:r.previewWidth},{ref_for:!0},e.ptm("fileThumbnail")),null,16,en),o("div",O({class:e.cx("fileInfo")},{ref_for:!0},e.ptm("fileInfo")),[o("div",O({class:e.cx("fileName")},{ref_for:!0},e.ptm("fileName")),ce(p.name),17),o("span",O({class:e.cx("fileSize")},{ref_for:!0},e.ptm("fileSize")),ce(s.formatSize(p.size)),17)],16),x(C,{value:r.badgeValue,class:Ce(e.cx("pcFileBadge")),severity:r.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcFileBadge")},null,8,["value","class","severity","unstyled","pt"]),o("div",O({class:e.cx("fileActions")},{ref_for:!0},e.ptm("fileActions")),[x(ee,{onClick:function(pe){return e.$emit("remove",T)},text:"",rounded:"",severity:"danger",class:Ce(e.cx("pcFileRemoveButton")),unstyled:e.unstyled,pt:e.ptm("pcFileRemoveButton")},{icon:M(function(h){return[r.templates.fileremoveicon?(D(),re(Be(r.templates.fileremoveicon),{key:0,class:Ce(h.class),file:p,index:T},null,8,["class","file","index"])):(D(),re(R,O({key:1,class:h.class,"aria-hidden":"true"},{ref_for:!0},e.ptm("pcFileRemoveButton").icon),null,16,["class"]))]}),_:2},1032,["onClick","class","unstyled","pt"])],16)],16)}),128)}rt.render=tn;function $e(e){return rn(e)||an(e)||st(e)||nn()}function nn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rn(e){if(Array.isArray(e))return He(e)}function Oe(e,i){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=st(e))||i){r&&(e=r);var u=0,g=function(){};return{s:g,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(p){throw p},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,C=!0,R=!1;return{s:function(){r=r.call(e)},n:function(){var p=r.next();return C=p.done,p},e:function(p){R=!0,s=p},f:function(){try{C||r.return==null||r.return()}finally{if(R)throw s}}}}function st(e,i){if(e){if(typeof e=="string")return He(e,i);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?He(e,i):void 0}}function He(e,i){(i==null||i>e.length)&&(i=e.length);for(var r=0,u=Array(i);r<i;r++)u[r]=e[r];return u}var lt={name:"FileUpload",extends:Xt,inheritAttrs:!1,emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove","remove-uploaded-file"],duplicateIEEvent:!1,data:function(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null,uploadedFiles:[]}},methods:{upload:function(){this.hasFiles&&this.uploader()},onBasicUploaderClick:function(i){i.button===0&&this.$refs.fileInput.click()},onFileSelect:function(i){if(i.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.isBasic&&this.hasFiles&&(this.files=[]),this.messages=[],this.files=this.files||[];var r=i.dataTransfer?i.dataTransfer.files:i.target.files,u=Oe(r),g;try{for(u.s();!(g=u.n()).done;){var s=g.value;!this.isFileSelected(s)&&!this.isFileLimitExceeded()&&this.validate(s)&&(this.isImage(s)&&(s.objectURL=window.URL.createObjectURL(s)),this.files.push(s))}}catch(C){u.e(C)}finally{u.f()}this.$emit("select",{originalEvent:i,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.uploader(),i.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose:function(){this.$refs.fileInput.click()},uploader:function(){var i=this;if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{var r=new XMLHttpRequest,u=new FormData;this.$emit("before-upload",{xhr:r,formData:u});var g=Oe(this.files),s;try{for(g.s();!(s=g.n()).done;){var C=s.value;u.append(this.name,C,C.name)}}catch(R){g.e(R)}finally{g.f()}r.upload.addEventListener("progress",function(R){R.lengthComputable&&(i.progress=Math.round(R.loaded*100/R.total)),i.$emit("progress",{originalEvent:R,progress:i.progress})}),r.onreadystatechange=function(){if(r.readyState===4){if(i.progress=0,r.status>=200&&r.status<300){var R;i.fileLimit&&(i.uploadedFileCount+=i.files.length),i.$emit("upload",{xhr:r,files:i.files}),(R=i.uploadedFiles).push.apply(R,$e(i.files))}else i.$emit("error",{xhr:r,files:i.files});i.clear()}},this.url&&(r.open("POST",this.url,!0),this.$emit("before-send",{xhr:r,formData:u}),r.withCredentials=this.withCredentials,r.send(u))}},clear:function(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus:function(){this.focused=!0},onBlur:function(){this.focused=!1},isFileSelected:function(i){if(this.files&&this.files.length){var r=Oe(this.files),u;try{for(r.s();!(u=r.n()).done;){var g=u.value;if(g.name+g.type+g.size===i.name+i.type+i.size)return!0}}catch(s){r.e(s)}finally{r.f()}}return!1},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},validate:function(i){return this.accept&&!this.isFileTypeValid(i)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",i.name).replace("{1}",this.accept)),!1):this.maxFileSize&&i.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",i.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid:function(i){var r=this.accept.split(",").map(function(R){return R.trim()}),u=Oe(r),g;try{for(u.s();!(g=u.n()).done;){var s=g.value,C=this.isWildcard(s)?this.getTypeClass(i.type)===this.getTypeClass(s):i.type==s||this.getFileExtension(i).toLowerCase()===s.toLowerCase();if(C)return!0}}catch(R){u.e(R)}finally{u.f()}return!1},getTypeClass:function(i){return i.substring(0,i.indexOf("/"))},isWildcard:function(i){return i.indexOf("*")!==-1},getFileExtension:function(i){return"."+i.name.split(".").pop()},isImage:function(i){return/^image\//.test(i.type)},onDragEnter:function(i){!this.disabled&&(!this.hasFiles||this.multiple)&&(i.stopPropagation(),i.preventDefault())},onDragOver:function(i){!this.disabled&&(!this.hasFiles||this.multiple)&&(!this.isUnstyled&&pt(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!0),i.stopPropagation(),i.preventDefault())},onDragLeave:function(){this.disabled||(!this.isUnstyled&&Ge(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1))},onDrop:function(i){if(!this.disabled){!this.isUnstyled&&Ge(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1),i.stopPropagation(),i.preventDefault();var r=i.dataTransfer?i.dataTransfer.files:i.target.files,u=this.multiple||r&&r.length===1;u&&this.onFileSelect(i)}},remove:function(i){this.clearInputElement();var r=this.files.splice(i,1)[0];this.files=$e(this.files),this.$emit("remove",{file:r,files:this.files})},removeUploadedFile:function(i){var r=this.uploadedFiles.splice(i,1)[0];this.uploadedFiles=$e(this.uploadedFiles),this.$emit("remove-uploaded-file",{file:r,files:this.uploadedFiles})},clearInputElement:function(){this.$refs.fileInput.value=""},clearIEInput:function(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize:function(i){var r,u=1024,g=3,s=((r=this.$primevue.config.locale)===null||r===void 0?void 0:r.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(i===0)return"0 ".concat(s[0]);var C=Math.floor(Math.log(i)/Math.log(u)),R=parseFloat((i/Math.pow(u,C)).toFixed(g));return"".concat(R," ").concat(s[C])},isFileLimitExceeded:function(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit:function(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose:function(){this.messages=null}},computed:{isAdvanced:function(){return this.mode==="advanced"},isBasic:function(){return this.mode==="basic"},chooseButtonClass:function(){return[this.cx("pcChooseButton"),this.class]},basicFileChosenLabel:function(){var i;if(this.auto)return this.chooseButtonLabel;if(this.hasFiles){var r;return this.files&&this.files.length===1?this.files[0].name:(r=this.$primevue.config.locale)===null||r===void 0||(r=r.fileChosenMessage)===null||r===void 0?void 0:r.replace("{0}",this.files.length)}return((i=this.$primevue.config.locale)===null||i===void 0?void 0:i.noFileChosenMessage)||""},hasFiles:function(){return this.files&&this.files.length>0},hasUploadedFiles:function(){return this.uploadedFiles&&this.uploadedFiles.length>0},chooseDisabled:function(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled:function(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled:function(){return this.disabled||!this.hasFiles},chooseButtonLabel:function(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel:function(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel:function(){return this.cancelLabel||this.$primevue.config.locale.cancel},completedLabel:function(){return this.$primevue.config.locale.completed},pendingLabel:function(){return this.$primevue.config.locale.pending}},components:{Button:Ve,ProgressBar:at,Message:Te,FileContent:rt,PlusIcon:yt,UploadIcon:it,TimesIcon:nt},directives:{ripple:dt}},sn=["multiple","accept","disabled"],ln=["accept","disabled","multiple"];function on(e,i,r,u,g,s){var C=ye("Button"),R=ye("ProgressBar"),ee=ye("Message"),p=ye("FileContent");return s.isAdvanced?(D(),Z("div",O({key:0,class:e.cx("root")},e.ptmi("root")),[o("input",O({ref:"fileInput",type:"file",onChange:i[0]||(i[0]=function(){return s.onFileSelect&&s.onFileSelect.apply(s,arguments)}),multiple:e.multiple,accept:e.accept,disabled:s.chooseDisabled},e.ptm("input")),null,16,sn),o("div",O({class:e.cx("header")},e.ptm("header")),[ge(e.$slots,"header",{files:g.files,uploadedFiles:g.uploadedFiles,chooseCallback:s.choose,uploadCallback:s.uploader,clearCallback:s.clear},function(){return[x(C,O({label:s.chooseButtonLabel,class:s.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onClick:s.choose,onKeydown:Ye(s.choose,["enter"]),onFocus:s.onFocus,onBlur:s.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:M(function(T){return[ge(e.$slots,"chooseicon",{},function(){return[(D(),re(Be(e.chooseIcon?"span":"PlusIcon"),O({class:[T.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onClick","onKeydown","onFocus","onBlur","pt"]),e.showUploadButton?(D(),re(C,O({key:0,class:e.cx("pcUploadButton"),label:s.uploadButtonLabel,onClick:s.uploader,disabled:s.uploadDisabled,unstyled:e.unstyled},e.uploadButtonProps,{pt:e.ptm("pcUploadButton")}),{icon:M(function(T){return[ge(e.$slots,"uploadicon",{},function(){return[(D(),re(Be(e.uploadIcon?"span":"UploadIcon"),O({class:[T.class,e.uploadIcon],"aria-hidden":"true"},e.ptm("pcUploadButton").icon,{"data-pc-section":"uploadbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ie("",!0),e.showCancelButton?(D(),re(C,O({key:1,class:e.cx("pcCancelButton"),label:s.cancelButtonLabel,onClick:s.clear,disabled:s.cancelDisabled,unstyled:e.unstyled},e.cancelButtonProps,{pt:e.ptm("pcCancelButton")}),{icon:M(function(T){return[ge(e.$slots,"cancelicon",{},function(){return[(D(),re(Be(e.cancelIcon?"span":"TimesIcon"),O({class:[T.class,e.cancelIcon],"aria-hidden":"true"},e.ptm("pcCancelButton").icon,{"data-pc-section":"cancelbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ie("",!0)]})],16),o("div",O({ref:"content",class:e.cx("content"),onDragenter:i[1]||(i[1]=function(){return s.onDragEnter&&s.onDragEnter.apply(s,arguments)}),onDragover:i[2]||(i[2]=function(){return s.onDragOver&&s.onDragOver.apply(s,arguments)}),onDragleave:i[3]||(i[3]=function(){return s.onDragLeave&&s.onDragLeave.apply(s,arguments)}),onDrop:i[4]||(i[4]=function(){return s.onDrop&&s.onDrop.apply(s,arguments)})},e.ptm("content"),{"data-p-highlight":!1}),[ge(e.$slots,"content",{files:g.files,uploadedFiles:g.uploadedFiles,removeUploadedFileCallback:s.removeUploadedFile,removeFileCallback:s.remove,progress:g.progress,messages:g.messages},function(){return[s.hasFiles?(D(),re(R,{key:0,value:g.progress,showValue:!1,unstyled:e.unstyled,pt:e.ptm("pcProgressbar")},null,8,["value","unstyled","pt"])):ie("",!0),(D(!0),Z(Ne,null,je(g.messages,function(T){return D(),re(ee,{key:T,severity:"error",onClose:s.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:M(function(){return[ae(ce(T),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),s.hasFiles?(D(),Z("div",{key:1,class:Ce(e.cx("fileList"))},[x(p,{files:g.files,onRemove:s.remove,badgeValue:s.pendingLabel,previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ie("",!0),s.hasUploadedFiles?(D(),Z("div",{key:2,class:Ce(e.cx("fileList"))},[x(p,{files:g.uploadedFiles,onRemove:s.removeUploadedFile,badgeValue:s.completedLabel,badgeSeverity:"success",previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ie("",!0)]}),e.$slots.empty&&!s.hasFiles&&!s.hasUploadedFiles?(D(),Z("div",ft(O({key:0},e.ptm("empty"))),[ge(e.$slots,"empty")],16)):ie("",!0)],16)],16)):s.isBasic?(D(),Z("div",O({key:1,class:e.cx("root")},e.ptmi("root")),[(D(!0),Z(Ne,null,je(g.messages,function(T){return D(),re(ee,{key:T,severity:"error",onClose:s.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:M(function(){return[ae(ce(T),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),o("div",O({class:e.cx("basicContent")},e.ptm("basicContent")),[x(C,O({label:s.chooseButtonLabel,class:s.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onMouseup:s.onBasicUploaderClick,onKeydown:Ye(s.choose,["enter"]),onFocus:s.onFocus,onBlur:s.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:M(function(T){return[ge(e.$slots,"chooseicon",{},function(){return[(D(),re(Be(e.chooseIcon?"span":"PlusIcon"),O({class:[T.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onMouseup","onKeydown","onFocus","onBlur","pt"]),e.auto?ie("",!0):ge(e.$slots,"filelabel",{key:0,class:Ce(e.cx("filelabel")),files:g.files},function(){return[o("span",{class:Ce(e.cx("filelabel"))},ce(s.basicFileChosenLabel),3)]}),o("input",O({ref:"fileInput",type:"file",accept:e.accept,disabled:e.disabled,multiple:e.multiple,onChange:i[5]||(i[5]=function(){return s.onFileSelect&&s.onFileSelect.apply(s,arguments)}),onFocus:i[6]||(i[6]=function(){return s.onFocus&&s.onFocus.apply(s,arguments)}),onBlur:i[7]||(i[7]=function(){return s.onBlur&&s.onBlur.apply(s,arguments)})},e.ptm("input")),null,16,ln)],16)],16)):ie("",!0)}lt.render=on;const un={class:"min-h-screen bg-gray-50 p-6"},dn={class:"max-w-5xl mx-auto"},cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pn={class:"md:col-span-2"},fn={class:"md:col-span-2"},hn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},mn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gn={class:"space-y-2"},bn={class:"space-y-4"},vn={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},yn={class:"font-semibold text-gray-900 mb-3"},kn={key:0,class:"text-sm text-gray-600 mt-2 text-center"},wn={class:"flex justify-end gap-3"},Fn={__name:"Campaign",setup(e){const i=gt(),r=he([]),u=he(""),g=he(""),s=he(!1);he("");const C=async(P,a={})=>{const B={ts:new Date().toISOString(),message:P,meta:a};try{const c=`${window.location.origin}/client-log`;await Ie.post(c,B,{timeout:3e3})}catch{try{const b=`${window.location.origin}/client-log`;await Ie.post(b,B,{timeout:3e3})}catch(b){try{console.log("sendServerLog error (both attempts)",b)}catch{}}}try{console.log(`${B.ts} - ${B.message}`)}catch{}};try{window.__sendClientLog=(P="client-log test ping")=>C(P,{test:!0})}catch{}const R=["Immobilier","Tech","Finance","Conseil","Autre"],ee=[{label:"United States",value:"+14752906147"},{label:"Switzerland",value:"+41234567890"}],p=[{label:"Africa/Porto-Novo",value:"Africa/Porto-Novo"},{label:"Africa/Cairo",value:"Africa/Cairo"},{label:"Africa/Johannesburg",value:"Africa/Johannesburg"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"America/Denver",value:"America/Denver"},{label:"America/Chicago",value:"America/Chicago"},{label:"America/New_York",value:"America/New_York"},{label:"America/Phoenix",value:"America/Phoenix"},{label:"America/Anchorage",value:"America/Anchorage"},{label:"America/Halifax",value:"America/Halifax"},{label:"America/Sao_Paulo",value:"America/Sao_Paulo"},{label:"Europe/London",value:"Europe/London"},{label:"Europe/Paris",value:"Europe/Paris"},{label:"Europe/Zurich",value:"Europe/Zurich"},{label:"Europe/Berlin",value:"Europe/Berlin"},{label:"Asia/Dubai",value:"Asia/Dubai"},{label:"Asia/Kolkata",value:"Asia/Kolkata"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"},{label:"Australia/Sydney",value:"Australia/Sydney"},{label:"Pacific/Auckland",value:"Pacific/Auckland"},{label:"UTC",value:"UTC"}],T=[{label:"Prise de rendez-vous",value:"Prise de rendez-vous"},{label:"Qualification de prospects",value:"Qualification de prospects"},{label:"Vente directe",value:"Vente directe"},{label:"Relance clients",value:"Relance clients"},{label:"Sondage",value:"Sondage"},{label:"Demande d'information",value:"Demande d'information"}],h=ht({company_name:"",domain:"",promesse_de_valeur:"",confidence_threshold:.7,agent_name:"Julie",referral_name:"",infos:"",objectifs:"",contact_first_name:"",decision_maker_name:"",processus_metier:"",key_capability:"",call_script_example:"",decision_committee:[],from_number:"+14752906147",pain_point_identifie:"",timezone:"Africa/Porto-Novo"}),pe=he([]),ke=he("starter");he(60),he(null),(async()=>{try{const P=await Ie.get("/api/plans");pe.value=P.data||[],pe.value.length>0&&(ke.value=pe.value[0].slug)}catch{}})();const Re=P=>{if(!P)return"";let a=P.replace(/[\s\-\(\)\.]/g,"");return a.startsWith("+")?a:a.startsWith("00")?"+"+a.substring(2):"+"+a},we=P=>{if(!P)return[];const a=xt.parse(P,{header:!0,skipEmptyLines:!0,transformHeader:c=>(c||"").trim().toLowerCase()}),B=[];return!a||!a.data||a.data.forEach(c=>{const b={};for(const t in c){const n=(c[t]||"").toString().trim();n&&(t.includes("nom")||t.includes("name")?b.nom=n:t.includes("email")||t.includes("mail")?b.email=n:t.includes("tel")||t.includes("phone")||t.includes("telephone")?b.telephone=Re(n):(t.includes("entreprise")||t.includes("company")||t.includes("societe"))&&(b.entreprise=n))}(b.telephone&&b.telephone.trim()||b.email&&b.email.trim())&&B.push(b)}),B},Ee=P=>{const a=P&&P.files&&P.files[0]?P.files[0]:P&&P.target&&P.target.files&&P.target.files[0];if(!a){u.value="Aucun fichier slectionn",r.value=[];return}const B=new FileReader;B.onload=c=>{try{const b=c.target.result,t=we(b);r.value=t,r.value.length===0?u.value="Aucun contact valide trouv dans le fichier CSV":u.value=""}catch(b){console.error("Erreur lecture CSV:",b),u.value="Erreur lors de la lecture du fichier CSV",r.value=[]}},B.readAsText(a,"utf-8")},Ue=async()=>{const a=[{key:"company_name",label:"Nom de l'entreprise"},{key:"domain",label:"Secteur d'activit"},{key:"promesse_de_valeur",label:"Promesse de valeur"},{key:"infos",label:"Description entreprise / service"},{key:"agent_name",label:"Nom de l'agent"},{key:"objectifs",label:"Objectifs de Prospection"}].filter(B=>!(h[B.key]&&String(h[B.key]).trim().length>0)).map(B=>B.label);if(r.value.length===0&&a.push("Fichier de contacts (CSV)"),a.length>0){u.value=`Veuillez renseigner les champs obligatoires : ${a.join(", ")}`;return}u.value="",g.value="",s.value=!0;try{C(`Dmarrage de la cration de campagne, contacts chargs: ${r.value.length}`,{contacts_count:r.value.length});const{data:{user:B}}=await Xe.auth.getUser();if(C(`Rsultat supabase.auth.getUser(): ${B?B.id:"aucun user"}`,{user:B?B.id:null}),!B)throw new Error("Utilisateur non authentifi");const c={...h,confidence_threshold:h.confidence_threshold||.7,contact_first_name:h.contact_first_name||"Monsieur/Madame"},b={agent_name:c.agent_name,company_name:c.company_name,domain:c.domain,objectifs:c.objectifs,promesse_de_valeur:c.promesse_de_valeur,infos:c.infos,contact_first_name:c.contact_first_name,referral_name:c.referral_name||null,decision_maker_name:c.decision_maker_name||null,processus_metier:c.processus_metier||null,key_capability:c.key_capability||null,call_script_example:c.call_script_example||null},t={variables:b,contacts:r.value,user_id:B.id,created_at:new Date().toISOString(),status:"pending"},{data:n,error:l}=await Xe.from("campaigns").insert([{user_id:B.id,company_name:h.company_name,domain:h.domain,value_proposition:h.promesse_de_valeur,confidence_threshold:typeof c.confidence_threshold=="number"?c.confidence_threshold:parseFloat(c.confidence_threshold),agent_name:h.agent_name,referral_name:h.referral_name,infos:h.infos,objectifs:h.objectifs,contacts_count:r.value.length,status:"pending",created_at:new Date().toISOString()}]).select().single();if(l)throw l;C(`Campagne insre en base avec id: ${n.id}`,{campaign_id:n.id});const f=h.from_number||"+14752906147";try{C("Construction des tches pour le serveur create-batch...",{contacts_count:r.value.length});const d=r.value.filter(v=>v.telephone).map(v=>({to_number:v.telephone,ignore_e164_validation:!1,retell_llm_dynamic_variables:{...b,referal_name:b.referral_name||null,pain_point_identifie:h.pain_point_identifie||null,customer_name:v.nom||b.contact_first_name,contact_company:v.entreprise||"",contact_email:v.email||"",campaign_id:n.id}}));if(d.length===0)console.warn("Aucun numro de tlphone valide pour crer des tches Retell."),C("Aucun numro de tlphone valide trouv dans les contacts; aucune tche cre.",{contacts_count:r.value.length});else{const v={name:`Campagne ${h.company_name} - ${new Date().toISOString()}`,from_number:f,tasks:d,send_now:!0,trigger_timestamp:Date.now(),reserved_concurrency:1,call_time_window:{windows:[{start:0,end:1440}],timezone:h.timezone||"Africa/Porto-Novo"}};try{const L=`${window.location.origin}/create-batch`;C(`Envoi du batch au serveur: ${L}`,{tasks_count:d.length}),C(`Batch body keys: ${Object.keys(v)}`,{tasks_sample:d.slice(0,3)});const j=await Ie.post(L,v,{timeout:2e4});C(`Rponse serveur create-batch: status=${j.status}`,{data:j.data});const te=j.data||{};if(te.tasks_url)try{const y=await Ie.get(te.tasks_url,{timeout:1e4}),$=typeof y.data=="string"?JSON.parse(y.data):y.data;C("Tasks file fetched after server create-batch",{sample:($||[]).slice(0,5)})}catch(y){C("Could not fetch tasks file after server create-batch",{error:y&&y.message?y.message:JSON.stringify(y)})}(!j||j.status<200||j.status>=300)&&(u.value=`Erreur serveur create-batch: status ${j?j.status:"no response"}`,C("Erreur: rponse non 2xx reue du serveur create-batch",{status:j?j.status:null}))}catch(L){console.error("Erreur lors de l'envoi au serveur create-batch:",L),C(`Erreur lors de l'appel serveur create-batch: ${L&&L.message?L.message:JSON.stringify(L)}`),u.value=`Erreur lors de l'envoi au service d'appel: ${L&&L.message?L.message:"erreur inconnue"}`}}}catch(d){console.error("Erreur lors de la construction du batch pour le serveur:",d),C(`Erreur inattendue lors de la construction du batch: ${d&&d.message?d.message:JSON.stringify(d)}`)}g.value=`Campagne cre avec succs ! ${r.value.length} contacts seront prospects.`,setTimeout(()=>{i.push("/")},2e3)}catch(B){u.value=B.message||"Erreur lors de la cration de la campagne"}finally{s.value=!1}};return(P,a)=>{const B=ye("router-link");return D(),Z("div",un,[o("div",dn,[x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{content:M(()=>[a[32]||(a[32]=o("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Nouvelle Campagne de Prospection ",-1)),x(I(Te),{severity:"info",closable:!1,class:"mb-0"},{default:M(()=>[a[20]||(a[20]=ae(" Configurez votre agent vocal AI avec les informations de votre entreprise et les objectifs de prospection. L'agent matrise les techniques avances : ",-1)),a[21]||(a[21]=o("strong",null,"Cold Call 2.0",-1)),a[22]||(a[22]=ae(", ",-1)),a[23]||(a[23]=o("strong",null,"SPIN Selling",-1)),a[24]||(a[24]=ae(", ",-1)),a[25]||(a[25]=o("strong",null,"NEPQ",-1)),a[26]||(a[26]=ae(", ",-1)),a[27]||(a[27]=o("strong",null,"BANT",-1)),a[28]||(a[28]=ae(", ",-1)),a[29]||(a[29]=o("strong",null,"Feel-Felt-Found",-1)),a[30]||(a[30]=ae(", ",-1)),a[31]||(a[31]=o("strong",null,"S.A.F.E.",-1)),x(B,{to:"/techniques",class:"ml-2 text-gray-900 font-semibold underline"},{default:M(()=>[...a[19]||(a[19]=[ae(" En savoir plus sur ces techniques ",-1)])]),_:1})]),_:1})]),_:1}),u.value?(D(),re(I(Te),{key:0,severity:"error",closable:!0,onClose:a[0]||(a[0]=c=>u.value=""),class:"mb-6"},{default:M(()=>[ae(ce(u.value),1)]),_:1})):ie("",!0),g.value?(D(),re(I(Te),{key:1,severity:"success",closable:!0,onClose:a[1]||(a[1]=c=>g.value=""),class:"mb-6"},{default:M(()=>[ae(ce(g.value),1)]),_:1})):ie("",!0),o("form",{onSubmit:mt(Ue,["prevent"])},[x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:M(()=>[...a[33]||(a[33]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-building text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Informations Entreprise")],-1)])]),content:M(()=>[o("div",cn,[o("div",pn,[a[34]||(a[34]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'entreprise *",-1)),x(I(me),{modelValue:h.company_name,"onUpdate:modelValue":a[2]||(a[2]=c=>h.company_name=c),placeholder:"Votre Entreprise",class:"w-full",required:""},null,8,["modelValue"])]),o("div",null,[a[35]||(a[35]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Secteur d'activit *",-1)),x(I(De),{modelValue:h.domain,"onUpdate:modelValue":a[3]||(a[3]=c=>h.domain=c),options:R,placeholder:"Slectionnez un secteur",class:"w-full",required:""},null,8,["modelValue"]),a[36]||(a[36]=o("small",{class:"text-gray-500 text-sm mt-1 block"}," Options disponibles : Immobilier, Tech, Finance, Conseil, Autre ",-1))]),o("div",null,[a[37]||(a[37]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Promesse de valeur (bnfice principal) *",-1)),x(I(me),{modelValue:h.promesse_de_valeur,"onUpdate:modelValue":a[4]||(a[4]=c=>h.promesse_de_valeur=c),placeholder:"Bnfice principal en une phrase",class:"w-full",required:""},null,8,["modelValue"])]),o("div",fn,[a[38]||(a[38]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Description entreprise / service *",-1)),x(I(qe),{modelValue:h.infos,"onUpdate:modelValue":a[5]||(a[5]=c=>h.infos=c),placeholder:"Dcrivez votre entreprise, vos services, vos produits (2-3 phrases max)...",rows:"5",class:"w-full",required:""},null,8,["modelValue"])])])]),_:1}),x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:M(()=>[...a[39]||(a[39]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-user text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Configuration Agent")],-1)])]),content:M(()=>[o("div",hn,[o("div",null,[a[40]||(a[40]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'agent *",-1)),x(I(me),{modelValue:h.agent_name,"onUpdate:modelValue":a[6]||(a[6]=c=>h.agent_name=c),placeholder:"Julie",class:"w-full",required:""},null,8,["modelValue"])]),o("div",null,[a[41]||(a[41]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Seuil de confiance (0.0 - 1.0)",-1)),x(I(kt),{modelValue:h.confidence_threshold,"onUpdate:modelValue":a[7]||(a[7]=c=>h.confidence_threshold=c),min:0,max:1,step:.1,minFractionDigits:1,maxFractionDigits:2,placeholder:"0.7",class:"w-full"},null,8,["modelValue"]),a[42]||(a[42]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Plus lev = plus slectif dans les rponses",-1))])])]),_:1}),x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:M(()=>[...a[43]||(a[43]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-comments text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Variables Conversationnelles (optionnel)")],-1)])]),content:M(()=>[o("div",mn,[o("div",null,[a[44]||(a[44]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Prnom du prospect",-1)),x(I(me),{modelValue:h.contact_first_name,"onUpdate:modelValue":a[8]||(a[8]=c=>h.contact_first_name=c),placeholder:"Dfaut : Monsieur / Madame",class:"w-full"},null,8,["modelValue"]),a[45]||(a[45]=o("small",{class:"text-gray-500 text-sm mt-1 block"},' Laissez vide pour utiliser "Monsieur/Madame" automatiquement. ',-1))]),o("div",null,[a[46]||(a[46]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du rfrent (warm calling)",-1)),x(I(me),{modelValue:h.referral_name,"onUpdate:modelValue":a[9]||(a[9]=c=>h.referral_name=c),placeholder:"Nom du rfrent (optionnel)",class:"w-full"},null,8,["modelValue"])]),o("div",null,[a[47]||(a[47]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du dcisionnaire",-1)),x(I(me),{modelValue:h.decision_maker_name,"onUpdate:modelValue":a[10]||(a[10]=c=>h.decision_maker_name=c),placeholder:"Nom du dcisionnaire (si connu)",class:"w-full"},null,8,["modelValue"])]),o("div",null,[a[48]||(a[48]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Processus mtier cibl",-1)),x(I(me),{modelValue:h.processus_metier,"onUpdate:modelValue":a[11]||(a[11]=c=>h.processus_metier=c),placeholder:"Ex : la gestion locative, le recrutement...",class:"w-full"},null,8,["modelValue"])]),o("div",null,[a[49]||(a[49]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Capacit cl  qualifier",-1)),x(I(me),{modelValue:h.key_capability,"onUpdate:modelValue":a[12]||(a[12]=c=>h.key_capability=c),placeholder:"Ex : automatisation, conformit RGPD...",class:"w-full"},null,8,["modelValue"])]),o("div",null,[a[50]||(a[50]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Pain point identifi",-1)),x(I(me),{modelValue:h.pain_point_identifie,"onUpdate:modelValue":a[13]||(a[13]=c=>h.pain_point_identifie=c),placeholder:"Ex : Perte de temps sur les tches manuelles",class:"w-full"},null,8,["modelValue"])]),o("div",null,[a[51]||(a[51]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Numro d'envoi",-1)),x(I(De),{modelValue:h.from_number,"onUpdate:modelValue":a[14]||(a[14]=c=>h.from_number=c),options:ee,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un numro d'envoi",class:"w-full"},null,8,["modelValue"]),a[52]||(a[52]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le numro utilis pour mettre les appels.",-1))]),o("div",null,[a[53]||(a[53]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Fuseau horaire d'appel",-1)),x(I(De),{modelValue:h.timezone,"onUpdate:modelValue":a[15]||(a[15]=c=>h.timezone=c),options:p,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un fuseau horaire",class:"w-full"},null,8,["modelValue"]),a[54]||(a[54]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le fuseau horaire pour la fentre d'appel.",-1))])])]),_:1}),x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:M(()=>[...a[55]||(a[55]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-file-edit text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Script d'appel personnalis (optionnel)")],-1)])]),content:M(()=>[o("div",gn,[a[56]||(a[56]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Script d'exemple",-1)),x(I(qe),{modelValue:h.call_script_example,"onUpdate:modelValue":a[16]||(a[16]=c=>h.call_script_example=c),placeholder:"Collez ici votre script d'appel en suivant le template recommand (ACCROCHE, DCOUVERTE, TRANSITION VALEUR, CLOSING)...",rows:"8",class:"w-full"},null,8,["modelValue"]),a[57]||(a[57]=o("small",{class:"text-gray-500 text-sm mt-1 block"}," Optionnel. Si laiss vide, l'agent utilisera un script gnr automatiquement  partir de vos variables. ",-1))])]),_:1}),x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:M(()=>[...a[58]||(a[58]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-bullseye text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Objectifs de Prospection")],-1)])]),content:M(()=>[o("div",null,[a[59]||(a[59]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Slectionnez les objectifs *",-1)),x(I(De),{modelValue:h.objectifs,"onUpdate:modelValue":a[17]||(a[17]=c=>h.objectifs=c),options:T,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un objectif",class:"w-full",required:""},null,8,["modelValue"])])]),_:1}),x(I(ve),{class:"mb-6 shadow-md border border-gray-200"},{title:M(()=>[...a[60]||(a[60]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-users text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Contacts  Appeler")],-1)])]),content:M(()=>[o("div",bn,[o("div",null,[a[61]||(a[61]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Fichier de contacts (CSV) *",-1)),x(I(lt),{mode:"basic",accept:".csv",maxFileSize:1e7,chooseLabel:"Choisir un fichier CSV",onSelect:Ee,class:"w-full",disabled:s.value},null,8,["disabled"]),a[62]||(a[62]=o("small",{class:"text-gray-500 text-sm mt-1 block"},[ae(" Format CSV attendu : nom, email, tlphone, entreprise (optionnel)"),o("br"),o("span",{class:"text-blue-600"},' Le prfixe "+" sera ajout automatiquement aux numros de tlphone si absent.')],-1))]),r.value.length>0?(D(),Z("div",vn,[o("h3",yn," Contacts chargs ("+ce(r.value.length)+") ",1),x(I(wt),{value:r.value.slice(0,10),paginator:r.value.length>10,rows:5,class:"p-datatable-sm",scrollable:!0,scrollHeight:"200px"},{default:M(()=>[x(I(ze),{field:"nom",header:"Nom"}),x(I(ze),{field:"email",header:"Email"}),x(I(ze),{field:"telephone",header:"Tlphone"}),x(I(ze),{field:"entreprise",header:"Entreprise"})]),_:1},8,["value","paginator"]),r.value.length>10?(D(),Z("p",kn," ... et "+ce(r.value.length-10)+" autres contacts ",1)):ie("",!0)])):ie("",!0)])]),_:1}),x(I(ve),{class:"shadow-md border border-gray-200"},{content:M(()=>[o("div",wn,[x(I(Ve),{label:"Annuler",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:a[18]||(a[18]=c=>P.$router.push("/")),disabled:s.value},null,8,["disabled"]),x(I(Ve),{type:"submit",label:"Lancer la Campagne",icon:"pi pi-send",loading:s.value,disabled:s.value||r.value.length===0},null,8,["loading","disabled"])])]),_:1})],32)])])}}};export{Fn as default};
