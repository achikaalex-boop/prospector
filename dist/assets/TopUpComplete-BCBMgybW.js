import{c}from"./paypal-2c0BkHnn.js";import{c as o,e as i,t as l,J as p,o as r}from"./index-DMcYmbUg.js";import{_ as d}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B9ygI19o.js";const m={name:"TopUpComplete",data(){return{loading:!0,success:!1,message:""}},async created(){try{const e=new URLSearchParams(window.location.search),t=e.get("token")||e.get("orderID")||null,n=e.get("plan_slug")||null;if(!t)throw new Error("No token/order id in query");let a=null;try{const{data:{session:s}}=await p.auth.getSession();a=s?.user?.id||null}catch{}await c(t,a,n),this.success=!0}catch(e){console.error("TopUpComplete error",e),this.message=e?.response?.data?.error||e.message||String(e)}finally{this.loading=!1}}},u={class:"p-6 max-w-md mx-auto"},_={key:0},g={key:1},f={key:2,class:"text-red-600"};function h(e,t,n,a,s,y){return r(),o("div",u,[t[0]||(t[0]=i("h2",{class:"text-2xl font-semibold mb-4"},"Top-up: confirmation",-1)),s.loading?(r(),o("div",_,"Processing payment...")):s.success?(r(),o("div",g,"Paiement capturé ✅")):(r(),o("div",f,"Erreur: "+l(s.message),1))])}const S=d(m,[["render",h]]);export{S as default};
