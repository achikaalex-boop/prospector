import{N as st,B as He,f as Xe,m as L,c as K,o as z,g as lt,e as o,s as Ke,b as ne,r as he,G as ae,t as ve,R as ot,k as et,M as ut,n as Oe,P as Ze,W as dt,w as me,K as je,A as w,E as ye,z as O,a as re,d as _e,F as Ne,O as Ge,Q as pt,H as ce,U as ct,V as ft,J as B,X as ht,Y as mt,L as gt}from"./index-CuYbzFgl.js";import{a as Re}from"./index-B9ygI19o.js";import{s as be}from"./index-MMV-z5iu.js";import{a as bt,s as vt,b as fe}from"./index-B45tFYpl.js";import{b as yt,c as kt,d as wt,a as Ct,s as ze}from"./index-dma64XmT.js";var Pe={exports:{}};var St=Pe.exports,Ye;function xt(){return Ye||(Ye=1,(function(e,i){((a,u)=>{e.exports=u()})(St,function a(){var u=typeof self<"u"?self:typeof window<"u"?window:u!==void 0?u:{},g,l=!u.document&&!!u.postMessage,_=u.IS_PAPA_WORKER||!1,A={},G=0,p={};function T(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var s=R(t);s.chunkSize=parseInt(s.chunkSize),t.step||t.chunk||(s.chunkSize=null),this._handle=new Be(s),(this._handle.streamer=this)._config=s}).call(this,n),this.parseChunk=function(t,s){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let C=this._config.newline;C||(f=this._config.quoteChar||'"',C=this._handle.guessLineEndings(t,f)),t=[...t.split(C).slice(d)].join(C)}this.isFirstChunk&&c(this._config.beforeFirstChunk)&&(f=this._config.beforeFirstChunk(t))!==void 0&&(t=f),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+t,f=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=f.meta.cursor,d=(this._finished||(this._partialLine=d.substring(t-this._baseIndex),this._baseIndex=t),f&&f.data&&(this._rowCount+=f.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_)u.postMessage({results:f,workerId:p.WORKER_ID,finished:d});else if(c(this._config.chunk)&&!s){if(this._config.chunk(f,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=f=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(f.data),this._completeResults.errors=this._completeResults.errors.concat(f.errors),this._completeResults.meta=f.meta),this._completed||!d||!c(this._config.complete)||f&&f.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||f&&f.meta.paused||this._nextChunk(),f}this._halted=!0},this._sendError=function(t){c(this._config.error)?this._config.error(t):_&&this._config.error&&u.postMessage({workerId:p.WORKER_ID,error:t,finished:!1})}}function se(n){var t;(n=n||{}).chunkSize||(n.chunkSize=p.RemoteChunkSize),T.call(this,n),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),l||(t.onload=r(this._chunkLoaded,this),t.onerror=r(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var s,d=this._config.downloadRequestHeaders;for(s in d)t.setRequestHeader(s,d[s])}var f;this._config.chunkSize&&(f=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+f));try{t.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}l&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(s){s=t.statusText||s,this._sendError(new Error(s))}}function m(n){(n=n||{}).chunkSize||(n.chunkSize=p.LocalChunkSize),T.call(this,n);var t,s,d=typeof FileReader<"u";this.stream=function(f){this._input=f,s=f.slice||f.webkitSlice||f.mozSlice,d?((t=new FileReader).onload=r(this._chunkLoaded,this),t.onerror=r(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var f=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),f=s.call(f,this._start,C)),t.readAsText(f,this._config.encoding));d||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(f){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(f.target.result)},this._chunkError=function(){this._sendError(t.error)}}function de(n){var t;T.call(this,n=n||{}),this.stream=function(s){return t=s,this._nextChunk()},this._nextChunk=function(){var s,d;if(!this._finished)return s=this._config.chunkSize,t=s?(d=t.substring(0,s),t.substring(s)):(d=t,""),this._finished=!t,this.parseChunk(d)}}function ke(n){T.call(this,n=n||{});var t=[],s=!0,d=!1;this.pause=function(){T.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){T.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(f){this._input=f,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):s=!0},this._streamData=r(function(f){try{t.push(typeof f=="string"?f:f.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(C){this._streamError(C)}},this),this._streamError=r(function(f){this._streamCleanUp(),this._sendError(f)},this),this._streamEnd=r(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=r(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Be(n){var t,s,d,f,C=Math.pow(2,53),$=-C,X=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ee=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,U=0,b=0,Q=!1,y=!1,x=[],h={data:[],errors:[],meta:{}};function q(E){return n.skipEmptyLines==="greedy"?E.join("").trim()==="":E.length===1&&E[0].length===0}function N(){if(h&&d&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),d=!1),n.skipEmptyLines&&(h.data=h.data.filter(function(v){return!q(v)})),J()){let v=function(j,W){c(n.transformHeader)&&(j=n.transformHeader(j,W)),x.push(j)};if(h)if(Array.isArray(h.data[0])){for(var E=0;J()&&E<h.data.length;E++)h.data[E].forEach(v);h.data.splice(0,1)}else h.data.forEach(v)}function I(v,j){for(var W=n.header?{}:[],D=0;D<v.length;D++){var P=D,F=v[D],F=((ie,k)=>(V=>(n.dynamicTypingFunction&&n.dynamicTyping[V]===void 0&&(n.dynamicTyping[V]=n.dynamicTypingFunction(V)),(n.dynamicTyping[V]||n.dynamicTyping)===!0))(ie)?k==="true"||k==="TRUE"||k!=="false"&&k!=="FALSE"&&((V=>{if(X.test(V)&&(V=parseFloat(V),$<V&&V<C))return 1})(k)?parseFloat(k):ee.test(k)?new Date(k):k===""?null:k):k)(P=n.header?D>=x.length?"__parsed_extra":x[D]:P,F=n.transform?n.transform(F,P):F);P==="__parsed_extra"?(W[P]=W[P]||[],W[P].push(F)):W[P]=F}return n.header&&(D>x.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+x.length+" fields but parsed "+D,b+j):D<x.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+x.length+" fields but parsed "+D,b+j)),W}var M;h&&(n.header||n.dynamicTyping||n.transform)&&(M=1,!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(I),M=h.data.length):h.data=I(h.data,0),n.header&&h.meta&&(h.meta.fields=x),b+=M)}function J(){return n.header&&x.length===0}function te(E,I,M,v){E={type:E,code:I,message:M},v!==void 0&&(E.row=v),h.errors.push(E)}c(n.step)&&(f=n.step,n.step=function(E){h=E,J()?N():(N(),h.data.length!==0&&(U+=E.data.length,n.preview&&U>n.preview?s.abort():(h.data=h.data[0],f(h,S))))}),this.parse=function(E,I,M){var v=n.quoteChar||'"',v=(n.newline||(n.newline=this.guessLineEndings(E,v)),d=!1,n.delimiter?c(n.delimiter)&&(n.delimiter=n.delimiter(E),h.meta.delimiter=n.delimiter):((v=((j,W,D,P,F)=>{var ie,k,V,ge;F=F||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var Ce=0;Ce<F.length;Ce++){for(var le,Ee=F[Ce],Z=0,oe=0,H=0,Y=(V=void 0,new xe({comments:P,delimiter:Ee,newline:W,preview:10}).parse(j)),pe=0;pe<Y.data.length;pe++)D&&q(Y.data[pe])?H++:(le=Y.data[pe].length,oe+=le,V===void 0?V=le:0<le&&(Z+=Math.abs(le-V),V=le));0<Y.data.length&&(oe/=Y.data.length-H),(k===void 0||Z<=k)&&(ge===void 0||ge<oe)&&1.99<oe&&(k=Z,ie=Ee,ge=oe)}return{successful:!!(n.delimiter=ie),bestDelimiter:ie}})(E,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=v.bestDelimiter:(d=!0,n.delimiter=p.DefaultDelimiter),h.meta.delimiter=n.delimiter),R(n));return n.preview&&n.header&&v.preview++,t=E,s=new xe(v),h=s.parse(t,I,M),N(),Q?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,s.abort(),t=c(n.chunk)?"":t.substring(s.getCharIndex())},this.resume=function(){S.streamer._halted?(Q=!1,S.streamer.parseChunk(t,!0)):setTimeout(S.resume,3)},this.aborted=function(){return y},this.abort=function(){y=!0,s.abort(),h.meta.aborted=!0,c(n.complete)&&n.complete(h),t=""},this.guessLineEndings=function(j,v){j=j.substring(0,1048576);var v=new RegExp(we(v)+"([^]*?)"+we(v),"gm"),M=(j=j.replace(v,"")).split("\r"),v=j.split(`
`),j=1<v.length&&v[0].length<M[0].length;if(M.length===1||j)return`
`;for(var W=0,D=0;D<M.length;D++)M[D][0]===`
`&&W++;return W>=M.length/2?`\r
`:"\r"}}function we(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function xe(n){var t=(n=n||{}).delimiter,s=n.newline,d=n.comments,f=n.step,C=n.preview,$=n.fastMode,X=null,ee=!1,S=n.quoteChar==null?'"':n.quoteChar,U=S;if(n.escapeChar!==void 0&&(U=n.escapeChar),(typeof t!="string"||-1<p.BAD_DELIMITERS.indexOf(t))&&(t=","),d===t)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<p.BAD_DELIMITERS.indexOf(d))&&(d=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var b=0,Q=!1;this.parse=function(y,x,h){if(typeof y!="string")throw new Error("Input must be a string");var q=y.length,N=t.length,J=s.length,te=d.length,E=c(f),I=[],M=[],v=[],j=b=0;if(!y)return Z();if($||$!==!1&&y.indexOf(S)===-1){for(var W=y.split(s),D=0;D<W.length;D++){if(v=W[D],b+=v.length,D!==W.length-1)b+=s.length;else if(h)return Z();if(!d||v.substring(0,te)!==d){if(E){if(I=[],ge(v.split(t)),oe(),Q)return Z()}else ge(v.split(t));if(C&&C<=D)return I=I.slice(0,C),Z(!0)}}return Z()}for(var P=y.indexOf(t,b),F=y.indexOf(s,b),ie=new RegExp(we(U)+we(S),"g"),k=y.indexOf(S,b);;)if(y[b]===S)for(k=b,b++;;){if((k=y.indexOf(S,k+1))===-1)return h||M.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:I.length,index:b}),le();if(k===q-1)return le(y.substring(b,k).replace(ie,S));if(S===U&&y[k+1]===U)k++;else if(S===U||k===0||y[k-1]!==U){P!==-1&&P<k+1&&(P=y.indexOf(t,k+1));var V=Ce((F=F!==-1&&F<k+1?y.indexOf(s,k+1):F)===-1?P:Math.min(P,F));if(y.substr(k+1+V,N)===t){v.push(y.substring(b,k).replace(ie,S)),y[b=k+1+V+N]!==S&&(k=y.indexOf(S,b)),P=y.indexOf(t,b),F=y.indexOf(s,b);break}if(V=Ce(F),y.substring(k+1+V,k+1+V+J)===s){if(v.push(y.substring(b,k).replace(ie,S)),Ee(k+1+V+J),P=y.indexOf(t,b),k=y.indexOf(S,b),E&&(oe(),Q))return Z();if(C&&I.length>=C)return Z(!0);break}M.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:I.length,index:b}),k++}}else if(d&&v.length===0&&y.substring(b,b+te)===d){if(F===-1)return Z();b=F+J,F=y.indexOf(s,b),P=y.indexOf(t,b)}else if(P!==-1&&(P<F||F===-1))v.push(y.substring(b,P)),b=P+N,P=y.indexOf(t,b);else{if(F===-1)break;if(v.push(y.substring(b,F)),Ee(F+J),E&&(oe(),Q))return Z();if(C&&I.length>=C)return Z(!0)}return le();function ge(H){I.push(H),j=b}function Ce(H){var Y=0;return Y=H!==-1&&(H=y.substring(k+1,H))&&H.trim()===""?H.length:Y}function le(H){return h||(H===void 0&&(H=y.substring(b)),v.push(H),b=q,ge(v),E&&oe()),Z()}function Ee(H){b=H,ge(v),v=[],F=y.indexOf(s,b)}function Z(H){if(n.header&&!x&&I.length&&!ee){var Y=I[0],pe=Object.create(null),Ue=new Set(Y);let Je=!1;for(let Se=0;Se<Y.length;Se++){let ue=Y[Se];if(pe[ue=c(n.transformHeader)?n.transformHeader(ue,Se):ue]){let Fe,Qe=pe[ue];for(;Fe=ue+"_"+Qe,Qe++,Ue.has(Fe););Ue.add(Fe),Y[Se]=Fe,pe[ue]++,Je=!0,(X=X===null?{}:X)[Fe]=ue}else pe[ue]=1,Y[Se]=ue;Ue.add(ue)}Je&&console.warn("Duplicate headers found and renamed."),ee=!0}return{data:I,errors:M,meta:{delimiter:t,linebreak:s,aborted:Q,truncated:!!H,cursor:j+(x||0),renamedHeaders:X}}}function oe(){f(Z()),I=[],M=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return b}}function Ve(n){var t=n.data,s=A[t.workerId],d=!1;if(t.error)s.userError(t.error,t.file);else if(t.results&&t.results.data){var f={abort:function(){d=!0,Ie(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Le,resume:Le};if(c(s.userStep)){for(var C=0;C<t.results.data.length&&(s.userStep({data:t.results.data[C],errors:t.results.errors,meta:t.results.meta},f),!d);C++);delete t.results}else c(s.userChunk)&&(s.userChunk(t.results,f,t.file),delete t.results)}t.finished&&!d&&Ie(t.workerId,t.results)}function Ie(n,t){var s=A[n];c(s.userComplete)&&s.userComplete(t),s.terminate(),delete A[n]}function Le(){throw new Error("Not implemented.")}function R(n){if(typeof n!="object"||n===null)return n;var t,s=Array.isArray(n)?[]:{};for(t in n)s[t]=R(n[t]);return s}function r(n,t){return function(){n.apply(t,arguments)}}function c(n){return typeof n=="function"}return p.parse=function(n,t){var s=(t=t||{}).dynamicTyping||!1;if(c(s)&&(t.dynamicTypingFunction=s,s={}),t.dynamicTyping=s,t.transform=!!c(t.transform)&&t.transform,!t.worker||!p.WORKERS_SUPPORTED)return s=null,p.NODE_STREAM_INPUT,typeof n=="string"?(n=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(n),s=new(t.download?se:de)(t)):n.readable===!0&&c(n.read)&&c(n.on)?s=new ke(t):(u.File&&n instanceof File||n instanceof Object)&&(s=new m(t)),s.stream(n);(s=(()=>{var d;return!!p.WORKERS_SUPPORTED&&(d=(()=>{var f=u.URL||u.webkitURL||null,C=a.toString();return p.BLOB_URL||(p.BLOB_URL=f.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(d=new u.Worker(d)).onmessage=Ve,d.id=G++,A[d.id]=d)})()).userStep=t.step,s.userChunk=t.chunk,s.userComplete=t.complete,s.userError=t.error,t.step=c(t.step),t.chunk=c(t.chunk),t.complete=c(t.complete),t.error=c(t.error),delete t.worker,s.postMessage({input:n,config:t,workerId:s.id})},p.unparse=function(n,t){var s=!1,d=!0,f=",",C=`\r
`,$='"',X=$+$,ee=!1,S=null,U=!1,b=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||p.BAD_DELIMITERS.filter(function(x){return t.delimiter.indexOf(x)!==-1}).length||(f=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(s=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(ee=t.skipEmptyLines),typeof t.newline=="string"&&(C=t.newline),typeof t.quoteChar=="string"&&($=t.quoteChar),typeof t.header=="boolean"&&(d=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");S=t.columns}t.escapeChar!==void 0&&(X=t.escapeChar+$),t.escapeFormulae instanceof RegExp?U=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(U=/^[=+\-@\t\r].*$/)}})(),new RegExp(we($),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return Q(null,n,ee);if(typeof n[0]=="object")return Q(S||Object.keys(n[0]),n,ee)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||S),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),Q(n.fields||[],n.data||[],ee);throw new Error("Unable to serialize unrecognized input");function Q(x,h,q){var N="",J=(typeof x=="string"&&(x=JSON.parse(x)),typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(x)&&0<x.length),te=!Array.isArray(h[0]);if(J&&d){for(var E=0;E<x.length;E++)0<E&&(N+=f),N+=y(x[E],E);0<h.length&&(N+=C)}for(var I=0;I<h.length;I++){var M=(J?x:h[I]).length,v=!1,j=J?Object.keys(h[I]).length===0:h[I].length===0;if(q&&!J&&(v=q==="greedy"?h[I].join("").trim()==="":h[I].length===1&&h[I][0].length===0),q==="greedy"&&J){for(var W=[],D=0;D<M;D++){var P=te?x[D]:D;W.push(h[I][P])}v=W.join("").trim()===""}if(!v){for(var F=0;F<M;F++){0<F&&!j&&(N+=f);var ie=J&&te?x[F]:F;N+=y(h[I][ie],F)}I<h.length-1&&(!q||0<M&&!j)&&(N+=C)}}return N}function y(x,h){var q,N;return x==null?"":x.constructor===Date?JSON.stringify(x).slice(1,25):(N=!1,U&&typeof x=="string"&&U.test(x)&&(x="'"+x,N=!0),q=x.toString().replace(b,X),(N=N||s===!0||typeof s=="function"&&s(x,h)||Array.isArray(s)&&s[h]||((J,te)=>{for(var E=0;E<te.length;E++)if(-1<J.indexOf(te[E]))return!0;return!1})(q,p.BAD_DELIMITERS)||-1<q.indexOf(f)||q.charAt(0)===" "||q.charAt(q.length-1)===" ")?$+q+$:q)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!l&&!!u.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=xe,p.ParserHandle=Be,p.NetworkStreamer=se,p.FileStreamer=m,p.StringStreamer=de,p.ReadableStreamStreamer=ke,u.jQuery&&((g=u.jQuery).fn.parse=function(n){var t=n.config||{},s=[];return this.each(function(C){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&u.FileReader)||!this.files||this.files.length===0)return!0;for(var $=0;$<this.files.length;$++)s.push({file:this.files[$],inputElem:this,instanceConfig:g.extend({},t)})}),d(),this;function d(){if(s.length===0)c(n.complete)&&n.complete();else{var C,$,X,ee,S=s[0];if(c(n.before)){var U=n.before(S.file,S.inputElem);if(typeof U=="object"){if(U.action==="abort")return C="AbortError",$=S.file,X=S.inputElem,ee=U.reason,void(c(n.error)&&n.error({name:C},$,X,ee));if(U.action==="skip")return void f();typeof U.config=="object"&&(S.instanceConfig=g.extend(S.instanceConfig,U.config))}else if(U==="skip")return void f()}var b=S.instanceConfig.complete;S.instanceConfig.complete=function(Q){c(b)&&b(Q,S.file,S.inputElem),f()},p.parse(S.file,S.instanceConfig)}}function f(){s.splice(0,1),d()}}),_&&(u.onmessage=function(n){n=n.data,p.WORKER_ID===void 0&&n&&(p.WORKER_ID=n.workerId),typeof n.input=="string"?u.postMessage({workerId:p.WORKER_ID,results:p.parse(n.input,n.config),finished:!0}):(u.File&&n.input instanceof File||n.input instanceof Object)&&(n=p.parse(n.input,n.config))&&u.postMessage({workerId:p.WORKER_ID,results:n,finished:!0})}),(se.prototype=Object.create(T.prototype)).constructor=se,(m.prototype=Object.create(T.prototype)).constructor=m,(de.prototype=Object.create(de.prototype)).constructor=de,(ke.prototype=Object.create(T.prototype)).constructor=ke,p})})(Pe)),Pe.exports}var Et=xt();const Ft=st(Et);var _t=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,At={root:function(i){var a=i.instance,u=i.props;return["p-textarea p-component",{"p-filled":a.$filled,"p-textarea-resizable ":u.autoResize,"p-textarea-sm p-inputfield-sm":u.size==="small","p-textarea-lg p-inputfield-lg":u.size==="large","p-invalid":a.$invalid,"p-variant-filled":a.$variant==="filled","p-textarea-fluid":a.$fluid}]}},Bt=He.extend({name:"textarea",style:_t,classes:At}),It={name:"BaseTextarea",extends:bt,props:{autoResize:Boolean},style:Bt,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function Ae(e){"@babel/helpers - typeof";return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ae(e)}function Lt(e,i,a){return(i=Rt(i))in e?Object.defineProperty(e,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[i]=a,e}function Rt(e){var i=zt(e,"string");return Ae(i)=="symbol"?i:i+""}function zt(e,i){if(Ae(e)!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var u=a.call(e,i);if(Ae(u)!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(e)}var $e={name:"Textarea",extends:It,inheritAttrs:!1,observer:null,mounted:function(){var i=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){i.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var i=this.$el.style.height,a=parseInt(i)||0,u=this.$el.scrollHeight,g=!a||u>a,l=a&&u<a;l?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):g&&(this.$el.style.height="".concat(u,"px"))}},onInput:function(i){this.autoResize&&this.resize(),this.writeValue(i.target.value,i)}},computed:{attrs:function(){return L(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return Xe(Lt({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Tt=["value","name","disabled","aria-invalid","data-p"];function Dt(e,i,a,u,g,l){return z(),K("textarea",L({class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.invalid||void 0,"data-p":l.dataP,onInput:i[0]||(i[0]=function(){return l.onInput&&l.onInput.apply(l,arguments)})},l.attrs),null,16,Tt)}$e.render=Dt;var Te={name:"Dropdown",extends:yt,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},tt={name:"UploadIcon",extends:lt};function Pt(e){return Mt(e)||Ut(e)||Vt(e)||Ot()}function Ot(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vt(e,i){if(e){if(typeof e=="string")return qe(e,i);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?qe(e,i):void 0}}function Ut(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Mt(e){if(Array.isArray(e))return qe(e)}function qe(e,i){(i==null||i>e.length)&&(i=e.length);for(var a=0,u=Array(i);a<i;a++)u[a]=e[a];return u}function jt(e,i,a,u,g,l){return z(),K("svg",L({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Pt(i[0]||(i[0]=[o("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z",fill:"currentColor"},null,-1)])),16)}tt.render=jt;var Nt=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,$t={root:function(i){var a=i.instance;return["p-progressbar p-component",{"p-progressbar-determinate":a.determinate,"p-progressbar-indeterminate":a.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},qt=He.extend({name:"progressbar",style:Nt,classes:$t}),Wt={name:"BaseProgressBar",extends:Ke,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:qt,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},nt={name:"ProgressBar",extends:Wt,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return Xe({determinate:this.determinate,indeterminate:this.indeterminate})}}},Ht=["aria-valuenow","data-p"],Kt=["data-p"],Jt=["data-p"],Qt=["data-p"];function Zt(e,i,a,u,g,l){return z(),K("div",L({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":l.dataP},e.ptmi("root")),[l.determinate?(z(),K("div",L({key:0,class:e.cx("value"),style:l.progressStyle,"data-p":l.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(z(),K("div",L({key:0,class:e.cx("label"),"data-p":l.dataP},e.ptm("label")),[he(e.$slots,"default",{},function(){return[ae(ve(e.value+"%"),1)]})],16,Jt)):ne("",!0)],16,Kt)):l.indeterminate?(z(),K("div",L({key:1,class:e.cx("value"),"data-p":l.dataP},e.ptm("value")),null,16,Qt)):ne("",!0)],16,Ht)}nt.render=Zt;var Gt=`
    .p-fileupload input[type='file'] {
        display: none;
    }

    .p-fileupload-advanced {
        border: 1px solid dt('fileupload.border.color');
        border-radius: dt('fileupload.border.radius');
        background: dt('fileupload.background');
        color: dt('fileupload.color');
    }

    .p-fileupload-header {
        display: flex;
        align-items: center;
        padding: dt('fileupload.header.padding');
        background: dt('fileupload.header.background');
        color: dt('fileupload.header.color');
        border-style: solid;
        border-width: dt('fileupload.header.border.width');
        border-color: dt('fileupload.header.border.color');
        border-radius: dt('fileupload.header.border.radius');
        gap: dt('fileupload.header.gap');
    }

    .p-fileupload-content {
        border: 1px solid transparent;
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.content.gap');
        transition: border-color dt('fileupload.transition.duration');
        padding: dt('fileupload.content.padding');
    }

    .p-fileupload-content .p-progressbar {
        width: 100%;
        height: dt('fileupload.progressbar.height');
    }

    .p-fileupload-file-list {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.filelist.gap');
    }

    .p-fileupload-file {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding: dt('fileupload.file.padding');
        border-block-end: 1px solid dt('fileupload.file.border.color');
        gap: dt('fileupload.file.gap');
    }

    .p-fileupload-file:last-child {
        border-block-end: 0;
    }

    .p-fileupload-file-info {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.file.info.gap');
    }

    .p-fileupload-file-thumbnail {
        flex-shrink: 0;
    }

    .p-fileupload-file-actions {
        margin-inline-start: auto;
    }

    .p-fileupload-highlight {
        border: 1px dashed dt('fileupload.content.highlight.border.color');
    }

    .p-fileupload-basic .p-message {
        margin-block-end: dt('fileupload.basic.gap');
    }

    .p-fileupload-basic-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: dt('fileupload.basic.gap');
    }
`,Yt={root:function(i){var a=i.props;return["p-fileupload p-fileupload-".concat(a.mode," p-component")]},header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button",basicContent:"p-fileupload-basic-content"},Xt=He.extend({name:"fileupload",style:Gt,classes:Yt}),en={name:"BaseFileUpload",extends:Ke,props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:void 0},uploadIcon:{type:String,default:void 0},cancelIcon:{type:String,default:void 0},style:null,class:null,chooseButtonProps:{type:null,default:null},uploadButtonProps:{type:Object,default:function(){return{severity:"secondary"}}},cancelButtonProps:{type:Object,default:function(){return{severity:"secondary"}}}},style:Xt,provide:function(){return{$pcFileUpload:this,$parentInstance:this}}},it={name:"FileContent",hostName:"FileUpload",extends:Ke,emits:["remove"],props:{files:{type:Array,default:function(){return[]}},badgeSeverity:{type:String,default:"warn"},badgeValue:{type:String,default:null},previewWidth:{type:Number,default:50},templates:{type:null,default:null}},methods:{formatSize:function(i){var a,u=1024,g=3,l=((a=this.$primevue.config.locale)===null||a===void 0?void 0:a.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(i===0)return"0 ".concat(l[0]);var _=Math.floor(Math.log(i)/Math.log(u)),A=parseFloat((i/Math.pow(u,_)).toFixed(g));return"".concat(A," ").concat(l[_])}},components:{Button:Oe,Badge:ut,TimesIcon:et}},tn=["alt","src","width"];function nn(e,i,a,u,g,l){var _=me("Badge"),A=me("TimesIcon"),G=me("Button");return z(!0),K(Ne,null,je(a.files,function(p,T){return z(),K("div",L({key:p.name+p.type+p.size,class:e.cx("file")},{ref_for:!0},e.ptm("file")),[o("img",L({role:"presentation",class:e.cx("fileThumbnail"),alt:p.name,src:p.objectURL,width:a.previewWidth},{ref_for:!0},e.ptm("fileThumbnail")),null,16,tn),o("div",L({class:e.cx("fileInfo")},{ref_for:!0},e.ptm("fileInfo")),[o("div",L({class:e.cx("fileName")},{ref_for:!0},e.ptm("fileName")),ve(p.name),17),o("span",L({class:e.cx("fileSize")},{ref_for:!0},e.ptm("fileSize")),ve(l.formatSize(p.size)),17)],16),w(_,{value:a.badgeValue,class:ye(e.cx("pcFileBadge")),severity:a.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcFileBadge")},null,8,["value","class","severity","unstyled","pt"]),o("div",L({class:e.cx("fileActions")},{ref_for:!0},e.ptm("fileActions")),[w(G,{onClick:function(m){return e.$emit("remove",T)},text:"",rounded:"",severity:"danger",class:ye(e.cx("pcFileRemoveButton")),unstyled:e.unstyled,pt:e.ptm("pcFileRemoveButton")},{icon:O(function(se){return[a.templates.fileremoveicon?(z(),re(_e(a.templates.fileremoveicon),{key:0,class:ye(se.class),file:p,index:T},null,8,["class","file","index"])):(z(),re(A,L({key:1,class:se.class,"aria-hidden":"true"},{ref_for:!0},e.ptm("pcFileRemoveButton").icon),null,16,["class"]))]}),_:2},1032,["onClick","class","unstyled","pt"])],16)],16)}),128)}it.render=nn;function Me(e){return sn(e)||an(e)||rt(e)||rn()}function rn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function an(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sn(e){if(Array.isArray(e))return We(e)}function De(e,i){var a=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=rt(e))||i){a&&(e=a);var u=0,g=function(){};return{s:g,n:function(){return u>=e.length?{done:!0}:{done:!1,value:e[u++]}},e:function(p){throw p},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,_=!0,A=!1;return{s:function(){a=a.call(e)},n:function(){var p=a.next();return _=p.done,p},e:function(p){A=!0,l=p},f:function(){try{_||a.return==null||a.return()}finally{if(A)throw l}}}}function rt(e,i){if(e){if(typeof e=="string")return We(e,i);var a={}.toString.call(e).slice(8,-1);return a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set"?Array.from(e):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?We(e,i):void 0}}function We(e,i){(i==null||i>e.length)&&(i=e.length);for(var a=0,u=Array(i);a<i;a++)u[a]=e[a];return u}var at={name:"FileUpload",extends:en,inheritAttrs:!1,emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove","remove-uploaded-file"],duplicateIEEvent:!1,data:function(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null,uploadedFiles:[]}},methods:{upload:function(){this.hasFiles&&this.uploader()},onBasicUploaderClick:function(i){i.button===0&&this.$refs.fileInput.click()},onFileSelect:function(i){if(i.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.isBasic&&this.hasFiles&&(this.files=[]),this.messages=[],this.files=this.files||[];var a=i.dataTransfer?i.dataTransfer.files:i.target.files,u=De(a),g;try{for(u.s();!(g=u.n()).done;){var l=g.value;!this.isFileSelected(l)&&!this.isFileLimitExceeded()&&this.validate(l)&&(this.isImage(l)&&(l.objectURL=window.URL.createObjectURL(l)),this.files.push(l))}}catch(_){u.e(_)}finally{u.f()}this.$emit("select",{originalEvent:i,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.uploader(),i.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose:function(){this.$refs.fileInput.click()},uploader:function(){var i=this;if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{var a=new XMLHttpRequest,u=new FormData;this.$emit("before-upload",{xhr:a,formData:u});var g=De(this.files),l;try{for(g.s();!(l=g.n()).done;){var _=l.value;u.append(this.name,_,_.name)}}catch(A){g.e(A)}finally{g.f()}a.upload.addEventListener("progress",function(A){A.lengthComputable&&(i.progress=Math.round(A.loaded*100/A.total)),i.$emit("progress",{originalEvent:A,progress:i.progress})}),a.onreadystatechange=function(){if(a.readyState===4){if(i.progress=0,a.status>=200&&a.status<300){var A;i.fileLimit&&(i.uploadedFileCount+=i.files.length),i.$emit("upload",{xhr:a,files:i.files}),(A=i.uploadedFiles).push.apply(A,Me(i.files))}else i.$emit("error",{xhr:a,files:i.files});i.clear()}},this.url&&(a.open("POST",this.url,!0),this.$emit("before-send",{xhr:a,formData:u}),a.withCredentials=this.withCredentials,a.send(u))}},clear:function(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus:function(){this.focused=!0},onBlur:function(){this.focused=!1},isFileSelected:function(i){if(this.files&&this.files.length){var a=De(this.files),u;try{for(a.s();!(u=a.n()).done;){var g=u.value;if(g.name+g.type+g.size===i.name+i.type+i.size)return!0}}catch(l){a.e(l)}finally{a.f()}}return!1},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},validate:function(i){return this.accept&&!this.isFileTypeValid(i)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",i.name).replace("{1}",this.accept)),!1):this.maxFileSize&&i.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",i.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid:function(i){var a=this.accept.split(",").map(function(A){return A.trim()}),u=De(a),g;try{for(u.s();!(g=u.n()).done;){var l=g.value,_=this.isWildcard(l)?this.getTypeClass(i.type)===this.getTypeClass(l):i.type==l||this.getFileExtension(i).toLowerCase()===l.toLowerCase();if(_)return!0}}catch(A){u.e(A)}finally{u.f()}return!1},getTypeClass:function(i){return i.substring(0,i.indexOf("/"))},isWildcard:function(i){return i.indexOf("*")!==-1},getFileExtension:function(i){return"."+i.name.split(".").pop()},isImage:function(i){return/^image\//.test(i.type)},onDragEnter:function(i){!this.disabled&&(!this.hasFiles||this.multiple)&&(i.stopPropagation(),i.preventDefault())},onDragOver:function(i){!this.disabled&&(!this.hasFiles||this.multiple)&&(!this.isUnstyled&&dt(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!0),i.stopPropagation(),i.preventDefault())},onDragLeave:function(){this.disabled||(!this.isUnstyled&&Ze(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1))},onDrop:function(i){if(!this.disabled){!this.isUnstyled&&Ze(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1),i.stopPropagation(),i.preventDefault();var a=i.dataTransfer?i.dataTransfer.files:i.target.files,u=this.multiple||a&&a.length===1;u&&this.onFileSelect(i)}},remove:function(i){this.clearInputElement();var a=this.files.splice(i,1)[0];this.files=Me(this.files),this.$emit("remove",{file:a,files:this.files})},removeUploadedFile:function(i){var a=this.uploadedFiles.splice(i,1)[0];this.uploadedFiles=Me(this.uploadedFiles),this.$emit("remove-uploaded-file",{file:a,files:this.uploadedFiles})},clearInputElement:function(){this.$refs.fileInput.value=""},clearIEInput:function(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize:function(i){var a,u=1024,g=3,l=((a=this.$primevue.config.locale)===null||a===void 0?void 0:a.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(i===0)return"0 ".concat(l[0]);var _=Math.floor(Math.log(i)/Math.log(u)),A=parseFloat((i/Math.pow(u,_)).toFixed(g));return"".concat(A," ").concat(l[_])},isFileLimitExceeded:function(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit:function(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose:function(){this.messages=null}},computed:{isAdvanced:function(){return this.mode==="advanced"},isBasic:function(){return this.mode==="basic"},chooseButtonClass:function(){return[this.cx("pcChooseButton"),this.class]},basicFileChosenLabel:function(){var i;if(this.auto)return this.chooseButtonLabel;if(this.hasFiles){var a;return this.files&&this.files.length===1?this.files[0].name:(a=this.$primevue.config.locale)===null||a===void 0||(a=a.fileChosenMessage)===null||a===void 0?void 0:a.replace("{0}",this.files.length)}return((i=this.$primevue.config.locale)===null||i===void 0?void 0:i.noFileChosenMessage)||""},hasFiles:function(){return this.files&&this.files.length>0},hasUploadedFiles:function(){return this.uploadedFiles&&this.uploadedFiles.length>0},chooseDisabled:function(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled:function(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled:function(){return this.disabled||!this.hasFiles},chooseButtonLabel:function(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel:function(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel:function(){return this.cancelLabel||this.$primevue.config.locale.cancel},completedLabel:function(){return this.$primevue.config.locale.completed},pendingLabel:function(){return this.$primevue.config.locale.pending}},components:{Button:Oe,ProgressBar:nt,Message:vt,FileContent:it,PlusIcon:kt,UploadIcon:tt,TimesIcon:et},directives:{ripple:ot}},ln=["multiple","accept","disabled"],on=["accept","disabled","multiple"];function un(e,i,a,u,g,l){var _=me("Button"),A=me("ProgressBar"),G=me("Message"),p=me("FileContent");return l.isAdvanced?(z(),K("div",L({key:0,class:e.cx("root")},e.ptmi("root")),[o("input",L({ref:"fileInput",type:"file",onChange:i[0]||(i[0]=function(){return l.onFileSelect&&l.onFileSelect.apply(l,arguments)}),multiple:e.multiple,accept:e.accept,disabled:l.chooseDisabled},e.ptm("input")),null,16,ln),o("div",L({class:e.cx("header")},e.ptm("header")),[he(e.$slots,"header",{files:g.files,uploadedFiles:g.uploadedFiles,chooseCallback:l.choose,uploadCallback:l.uploader,clearCallback:l.clear},function(){return[w(_,L({label:l.chooseButtonLabel,class:l.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onClick:l.choose,onKeydown:Ge(l.choose,["enter"]),onFocus:l.onFocus,onBlur:l.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:O(function(T){return[he(e.$slots,"chooseicon",{},function(){return[(z(),re(_e(e.chooseIcon?"span":"PlusIcon"),L({class:[T.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onClick","onKeydown","onFocus","onBlur","pt"]),e.showUploadButton?(z(),re(_,L({key:0,class:e.cx("pcUploadButton"),label:l.uploadButtonLabel,onClick:l.uploader,disabled:l.uploadDisabled,unstyled:e.unstyled},e.uploadButtonProps,{pt:e.ptm("pcUploadButton")}),{icon:O(function(T){return[he(e.$slots,"uploadicon",{},function(){return[(z(),re(_e(e.uploadIcon?"span":"UploadIcon"),L({class:[T.class,e.uploadIcon],"aria-hidden":"true"},e.ptm("pcUploadButton").icon,{"data-pc-section":"uploadbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ne("",!0),e.showCancelButton?(z(),re(_,L({key:1,class:e.cx("pcCancelButton"),label:l.cancelButtonLabel,onClick:l.clear,disabled:l.cancelDisabled,unstyled:e.unstyled},e.cancelButtonProps,{pt:e.ptm("pcCancelButton")}),{icon:O(function(T){return[he(e.$slots,"cancelicon",{},function(){return[(z(),re(_e(e.cancelIcon?"span":"TimesIcon"),L({class:[T.class,e.cancelIcon],"aria-hidden":"true"},e.ptm("pcCancelButton").icon,{"data-pc-section":"cancelbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):ne("",!0)]})],16),o("div",L({ref:"content",class:e.cx("content"),onDragenter:i[1]||(i[1]=function(){return l.onDragEnter&&l.onDragEnter.apply(l,arguments)}),onDragover:i[2]||(i[2]=function(){return l.onDragOver&&l.onDragOver.apply(l,arguments)}),onDragleave:i[3]||(i[3]=function(){return l.onDragLeave&&l.onDragLeave.apply(l,arguments)}),onDrop:i[4]||(i[4]=function(){return l.onDrop&&l.onDrop.apply(l,arguments)})},e.ptm("content"),{"data-p-highlight":!1}),[he(e.$slots,"content",{files:g.files,uploadedFiles:g.uploadedFiles,removeUploadedFileCallback:l.removeUploadedFile,removeFileCallback:l.remove,progress:g.progress,messages:g.messages},function(){return[l.hasFiles?(z(),re(A,{key:0,value:g.progress,showValue:!1,unstyled:e.unstyled,pt:e.ptm("pcProgressbar")},null,8,["value","unstyled","pt"])):ne("",!0),(z(!0),K(Ne,null,je(g.messages,function(T){return z(),re(G,{key:T,severity:"error",onClose:l.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:O(function(){return[ae(ve(T),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),l.hasFiles?(z(),K("div",{key:1,class:ye(e.cx("fileList"))},[w(p,{files:g.files,onRemove:l.remove,badgeValue:l.pendingLabel,previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ne("",!0),l.hasUploadedFiles?(z(),K("div",{key:2,class:ye(e.cx("fileList"))},[w(p,{files:g.uploadedFiles,onRemove:l.removeUploadedFile,badgeValue:l.completedLabel,badgeSeverity:"success",previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):ne("",!0)]}),e.$slots.empty&&!l.hasFiles&&!l.hasUploadedFiles?(z(),K("div",pt(L({key:0},e.ptm("empty"))),[he(e.$slots,"empty")],16)):ne("",!0)],16)],16)):l.isBasic?(z(),K("div",L({key:1,class:e.cx("root")},e.ptmi("root")),[(z(!0),K(Ne,null,je(g.messages,function(T){return z(),re(G,{key:T,severity:"error",onClose:l.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:O(function(){return[ae(ve(T),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),o("div",L({class:e.cx("basicContent")},e.ptm("basicContent")),[w(_,L({label:l.chooseButtonLabel,class:l.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onMouseup:l.onBasicUploaderClick,onKeydown:Ge(l.choose,["enter"]),onFocus:l.onFocus,onBlur:l.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:O(function(T){return[he(e.$slots,"chooseicon",{},function(){return[(z(),re(_e(e.chooseIcon?"span":"PlusIcon"),L({class:[T.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onMouseup","onKeydown","onFocus","onBlur","pt"]),e.auto?ne("",!0):he(e.$slots,"filelabel",{key:0,class:ye(e.cx("filelabel")),files:g.files},function(){return[o("span",{class:ye(e.cx("filelabel"))},ve(l.basicFileChosenLabel),3)]}),o("input",L({ref:"fileInput",type:"file",accept:e.accept,disabled:e.disabled,multiple:e.multiple,onChange:i[5]||(i[5]=function(){return l.onFileSelect&&l.onFileSelect.apply(l,arguments)}),onFocus:i[6]||(i[6]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:i[7]||(i[7]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)})},e.ptm("input")),null,16,on)],16)],16)):ne("",!0)}at.render=un;const dn={class:"min-h-screen bg-gray-50 p-6"},pn={class:"max-w-5xl mx-auto"},cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fn={class:"md:col-span-2"},hn={class:"md:col-span-2"},mn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},gn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bn={class:"space-y-2"},vn={class:"space-y-4"},yn={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},kn={class:"font-semibold text-gray-900 mb-3"},wn={key:0,class:"text-sm text-gray-600 mt-2 text-center"},Cn={class:"flex justify-end gap-3"},An={__name:"Campaign",setup(e){const i=mt(),a=ce([]),u=ce(""),g=ce(""),l=ce(!1);ce("");const _=ct(),A=async(R,r={})=>{const c={ts:new Date().toISOString(),message:R,meta:r};try{const n=`${window.location.origin}/client-log`;await Re.post(n,c,{timeout:3e3})}catch{try{const t=`${window.location.origin}/client-log`;await Re.post(t,c,{timeout:3e3})}catch(t){try{console.log("sendServerLog error (both attempts)",t)}catch{}}}try{console.log(`${c.ts} - ${c.message}`)}catch{}};try{window.__sendClientLog=(R="client-log test ping")=>A(R,{test:!0})}catch{}const G=["Immobilier","Tech","Finance","Conseil","Autre"],p=[{label:"United States",value:"+14752906147"},{label:"Switzerland",value:"+41234567890"}],T=[{label:"Africa/Porto-Novo",value:"Africa/Porto-Novo"},{label:"Africa/Cairo",value:"Africa/Cairo"},{label:"Africa/Johannesburg",value:"Africa/Johannesburg"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"America/Denver",value:"America/Denver"},{label:"America/Chicago",value:"America/Chicago"},{label:"America/New_York",value:"America/New_York"},{label:"America/Phoenix",value:"America/Phoenix"},{label:"America/Anchorage",value:"America/Anchorage"},{label:"America/Halifax",value:"America/Halifax"},{label:"America/Sao_Paulo",value:"America/Sao_Paulo"},{label:"Europe/London",value:"Europe/London"},{label:"Europe/Paris",value:"Europe/Paris"},{label:"Europe/Zurich",value:"Europe/Zurich"},{label:"Europe/Berlin",value:"Europe/Berlin"},{label:"Asia/Dubai",value:"Asia/Dubai"},{label:"Asia/Kolkata",value:"Asia/Kolkata"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"},{label:"Australia/Sydney",value:"Australia/Sydney"},{label:"Pacific/Auckland",value:"Pacific/Auckland"},{label:"UTC",value:"UTC"}],se=[{label:"Prise de rendez-vous",value:"Prise de rendez-vous"},{label:"Qualification de prospects",value:"Qualification de prospects"},{label:"Vente directe",value:"Vente directe"},{label:"Relance clients",value:"Relance clients"},{label:"Sondage",value:"Sondage"},{label:"Demande d'information",value:"Demande d'information"}],m=ft({company_name:"",domain:"",promesse_de_valeur:"",confidence_threshold:.7,agent_name:"Julie",referral_name:"",infos:"",objectifs:"",contact_first_name:"",decision_maker_name:"",processus_metier:"",key_capability:"",call_script_example:"",decision_committee:[],from_number:"+14752906147",pain_point_identifie:"",timezone:"Africa/Porto-Novo"}),de=ce([]),ke=ce("starter"),Be=ce(60);ce(null),(async()=>{try{const R=await Re.get("/api/plans");de.value=R.data||[],de.value.length>0&&(ke.value=de.value[0].slug)}catch{}})();const xe=R=>{if(!R)return"";let r=R.replace(/[\s\-\(\)\.]/g,"");return r.startsWith("+")?r:r.startsWith("00")?"+"+r.substring(2):"+"+r},Ve=R=>{if(!R)return[];const r=Ft.parse(R,{header:!0,skipEmptyLines:!0,transformHeader:n=>(n||"").trim().toLowerCase()}),c=[];return!r||!r.data||r.data.forEach(n=>{const t={};for(const s in n){const d=(n[s]||"").toString().trim();d&&(s.includes("nom")||s.includes("name")?t.nom=d:s.includes("email")||s.includes("mail")?t.email=d:s.includes("tel")||s.includes("phone")||s.includes("telephone")?t.telephone=xe(d):(s.includes("entreprise")||s.includes("company")||s.includes("societe"))&&(t.entreprise=d))}(t.telephone&&t.telephone.trim()||t.email&&t.email.trim())&&c.push(t)}),c},Ie=R=>{const r=R&&R.files&&R.files[0]?R.files[0]:R&&R.target&&R.target.files&&R.target.files[0];if(!r){u.value="Aucun fichier slectionn",a.value=[];return}const c=new FileReader;c.onload=n=>{try{const t=n.target.result,s=Ve(t);a.value=s,a.value.length===0?u.value="Aucun contact valide trouv dans le fichier CSV":u.value=""}catch(t){console.error("Erreur lecture CSV:",t),u.value="Erreur lors de la lecture du fichier CSV",a.value=[]}},c.readAsText(r,"utf-8")},Le=async()=>{const r=[{key:"company_name",label:"Nom de l'entreprise"},{key:"domain",label:"Secteur d'activit"},{key:"promesse_de_valeur",label:"Promesse de valeur"},{key:"infos",label:"Description entreprise / service"},{key:"agent_name",label:"Nom de l'agent"},{key:"objectifs",label:"Objectifs de Prospection"}].filter(c=>!(m[c.key]&&String(m[c.key]).trim().length>0)).map(c=>c.label);if(a.value.length===0&&r.push("Fichier de contacts (CSV)"),r.length>0){const c=`Veuillez renseigner les champs obligatoires : ${r.join(", ")}`;u.value=c;try{_.add({severity:"warn",summary:"Champs manquants",detail:c,life:6e3})}catch{}return}u.value="",g.value="",l.value=!0;try{A(`Dmarrage de la cration de campagne, contacts chargs: ${a.value.length}`,{contacts_count:a.value.length});const{data:{user:c}}=await gt.auth.getUser();if(A(`Rsultat supabase.auth.getUser(): ${c?c.id:"aucun user"}`,{user:c?c.id:null}),!c)throw new Error("Utilisateur non authentifi");const n={user_id:c.id,company_name:m.company_name,domain:m.domain,promesse_de_valeur:m.promesse_de_valeur,confidence_threshold:m.confidence_threshold||.7,agent_name:m.agent_name,referral_name:m.referral_name,infos:m.infos,objectifs:m.objectifs,contacts:a.value,contacts_count:a.value.length,estimated_avg_call_seconds:Number(Be.value)||60,from_number:m.from_number,timezone:m.timezone};try{const t=await Re.post("/api/create-campaign",n,{timeout:3e4});if(t.status===201||t.status===202){const s=`Campagne cre avec succs ! ${a.value.length} contacts seront prospects.`;g.value=s;try{_.add({severity:"success",summary:"Campagne cre",detail:s,life:6e3})}catch{}setTimeout(()=>i.push("/"),2e3)}else{const s=`Erreur lors de la cration de la campagne: ${t.data&&t.data.error?t.data.error:"erreur inconnue"}`;u.value=s;try{_.add({severity:"error",summary:"Erreur",detail:s,life:8e3})}catch{}}}catch(t){if(t?.response?.status===402){const d=(t.response.data||{}).error||"Solde insuffisant. Veuillez recharger votre compte.";u.value=d;try{_.add({severity:"warn",summary:"Solde insuffisant",detail:d,life:8e3})}catch{}}else if(t?.response?.data&&t.response.data.error){const s=t.response.data.error;u.value=s;try{_.add({severity:"error",summary:"Erreur",detail:s,life:8e3})}catch{}}else{console.error("Erreur lors de la cration de la campagne:",t);const s="Erreur lors de la cration de la campagne (serveur)";u.value=s;try{_.add({severity:"error",summary:"Erreur serveur",detail:s,life:8e3})}catch{}}}}catch(c){console.error("Erreur lors de la construction du batch pour le serveur:",c),A(`Erreur inattendue lors de la construction du batch: ${c&&c.message?c.message:JSON.stringify(c)}`);const n=c.message||"Erreur lors de la cration de la campagne";u.value=n;try{_.add({severity:"error",summary:"Erreur",detail:n,life:8e3})}catch{}}finally{l.value=!1}};return(R,r)=>{const c=me("router-link"),n=me("Message");return z(),K("div",dn,[o("div",pn,[w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{content:O(()=>[r[30]||(r[30]=o("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Nouvelle Campagne de Prospection ",-1)),w(n,{severity:"info",closable:!1,class:"mb-0"},{default:O(()=>[r[18]||(r[18]=ae(" Configurez votre agent vocal AI avec les informations de votre entreprise et les objectifs de prospection. L'agent matrise les techniques avances : ",-1)),r[19]||(r[19]=o("strong",null,"Cold Call 2.0",-1)),r[20]||(r[20]=ae(", ",-1)),r[21]||(r[21]=o("strong",null,"SPIN Selling",-1)),r[22]||(r[22]=ae(", ",-1)),r[23]||(r[23]=o("strong",null,"NEPQ",-1)),r[24]||(r[24]=ae(", ",-1)),r[25]||(r[25]=o("strong",null,"BANT",-1)),r[26]||(r[26]=ae(", ",-1)),r[27]||(r[27]=o("strong",null,"Feel-Felt-Found",-1)),r[28]||(r[28]=ae(", ",-1)),r[29]||(r[29]=o("strong",null,"S.A.F.E.",-1)),w(c,{to:"/techniques",class:"ml-2 text-gray-900 font-semibold underline"},{default:O(()=>[...r[17]||(r[17]=[ae(" En savoir plus sur ces techniques ",-1)])]),_:1})]),_:1})]),_:1}),o("form",{onSubmit:ht(Le,["prevent"])},[w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{title:O(()=>[...r[31]||(r[31]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-building text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Informations Entreprise")],-1)])]),content:O(()=>[o("div",cn,[o("div",fn,[r[32]||(r[32]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'entreprise *",-1)),w(B(fe),{modelValue:m.company_name,"onUpdate:modelValue":r[0]||(r[0]=t=>m.company_name=t),placeholder:"Votre Entreprise",class:"w-full",required:""},null,8,["modelValue"])]),o("div",null,[r[33]||(r[33]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Secteur d'activit *",-1)),w(B(Te),{modelValue:m.domain,"onUpdate:modelValue":r[1]||(r[1]=t=>m.domain=t),options:G,placeholder:"Slectionnez un secteur",class:"w-full",required:""},null,8,["modelValue"]),r[34]||(r[34]=o("small",{class:"text-gray-500 text-sm mt-1 block"}," Options disponibles : Immobilier, Tech, Finance, Conseil, Autre ",-1))]),o("div",null,[r[35]||(r[35]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Promesse de valeur (bnfice principal) *",-1)),w(B(fe),{modelValue:m.promesse_de_valeur,"onUpdate:modelValue":r[2]||(r[2]=t=>m.promesse_de_valeur=t),placeholder:"Bnfice principal en une phrase",class:"w-full",required:""},null,8,["modelValue"])]),o("div",hn,[r[36]||(r[36]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Description entreprise / service *",-1)),w(B($e),{modelValue:m.infos,"onUpdate:modelValue":r[3]||(r[3]=t=>m.infos=t),placeholder:"Dcrivez votre entreprise, vos services, vos produits (2-3 phrases max)...",rows:"5",class:"w-full",required:""},null,8,["modelValue"])])])]),_:1}),w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{title:O(()=>[...r[37]||(r[37]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-user text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Configuration Agent")],-1)])]),content:O(()=>[o("div",mn,[o("div",null,[r[38]||(r[38]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'agent *",-1)),w(B(fe),{modelValue:m.agent_name,"onUpdate:modelValue":r[4]||(r[4]=t=>m.agent_name=t),placeholder:"Julie",class:"w-full",required:""},null,8,["modelValue"])]),o("div",null,[r[39]||(r[39]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Seuil de confiance (0.0 - 1.0)",-1)),w(B(wt),{modelValue:m.confidence_threshold,"onUpdate:modelValue":r[5]||(r[5]=t=>m.confidence_threshold=t),min:0,max:1,step:.1,minFractionDigits:1,maxFractionDigits:2,placeholder:"0.7",class:"w-full"},null,8,["modelValue"]),r[40]||(r[40]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Plus lev = plus slectif dans les rponses",-1))])])]),_:1}),w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{title:O(()=>[...r[41]||(r[41]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-comments text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Variables Conversationnelles (optionnel)")],-1)])]),content:O(()=>[o("div",gn,[o("div",null,[r[42]||(r[42]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Prnom du prospect",-1)),w(B(fe),{modelValue:m.contact_first_name,"onUpdate:modelValue":r[6]||(r[6]=t=>m.contact_first_name=t),placeholder:"Dfaut : Monsieur / Madame",class:"w-full"},null,8,["modelValue"]),r[43]||(r[43]=o("small",{class:"text-gray-500 text-sm mt-1 block"},' Laissez vide pour utiliser "Monsieur/Madame" automatiquement. ',-1))]),o("div",null,[r[44]||(r[44]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du rfrent (warm calling)",-1)),w(B(fe),{modelValue:m.referral_name,"onUpdate:modelValue":r[7]||(r[7]=t=>m.referral_name=t),placeholder:"Nom du rfrent (optionnel)",class:"w-full"},null,8,["modelValue"])]),o("div",null,[r[45]||(r[45]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du dcisionnaire",-1)),w(B(fe),{modelValue:m.decision_maker_name,"onUpdate:modelValue":r[8]||(r[8]=t=>m.decision_maker_name=t),placeholder:"Nom du dcisionnaire (si connu)",class:"w-full"},null,8,["modelValue"])]),o("div",null,[r[46]||(r[46]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Processus mtier cibl",-1)),w(B(fe),{modelValue:m.processus_metier,"onUpdate:modelValue":r[9]||(r[9]=t=>m.processus_metier=t),placeholder:"Ex : la gestion locative, le recrutement...",class:"w-full"},null,8,["modelValue"])]),o("div",null,[r[47]||(r[47]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Capacit cl  qualifier",-1)),w(B(fe),{modelValue:m.key_capability,"onUpdate:modelValue":r[10]||(r[10]=t=>m.key_capability=t),placeholder:"Ex : automatisation, conformit RGPD...",class:"w-full"},null,8,["modelValue"])]),o("div",null,[r[48]||(r[48]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Pain point identifi",-1)),w(B(fe),{modelValue:m.pain_point_identifie,"onUpdate:modelValue":r[11]||(r[11]=t=>m.pain_point_identifie=t),placeholder:"Ex : Perte de temps sur les tches manuelles",class:"w-full"},null,8,["modelValue"])]),o("div",null,[r[49]||(r[49]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Numro d'envoi",-1)),w(B(Te),{modelValue:m.from_number,"onUpdate:modelValue":r[12]||(r[12]=t=>m.from_number=t),options:p,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un numro d'envoi",class:"w-full"},null,8,["modelValue"]),r[50]||(r[50]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le numro utilis pour mettre les appels.",-1))]),o("div",null,[r[51]||(r[51]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Fuseau horaire d'appel",-1)),w(B(Te),{modelValue:m.timezone,"onUpdate:modelValue":r[13]||(r[13]=t=>m.timezone=t),options:T,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un fuseau horaire",class:"w-full"},null,8,["modelValue"]),r[52]||(r[52]=o("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le fuseau horaire pour la fentre d'appel.",-1))])])]),_:1}),w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{title:O(()=>[...r[53]||(r[53]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-file-edit text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Script d'appel personnalis (optionnel)")],-1)])]),content:O(()=>[o("div",bn,[r[54]||(r[54]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Script d'exemple",-1)),w(B($e),{modelValue:m.call_script_example,"onUpdate:modelValue":r[14]||(r[14]=t=>m.call_script_example=t),placeholder:"Collez ici votre script d'appel en suivant le template recommand (ACCROCHE, DCOUVERTE, TRANSITION VALEUR, CLOSING)...",rows:"8",class:"w-full"},null,8,["modelValue"]),r[55]||(r[55]=o("small",{class:"text-gray-500 text-sm mt-1 block"}," Optionnel. Si laiss vide, l'agent utilisera un script gnr automatiquement  partir de vos variables. ",-1))])]),_:1}),w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{title:O(()=>[...r[56]||(r[56]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-bullseye text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Objectifs de Prospection")],-1)])]),content:O(()=>[o("div",null,[r[57]||(r[57]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Slectionnez les objectifs *",-1)),w(B(Te),{modelValue:m.objectifs,"onUpdate:modelValue":r[15]||(r[15]=t=>m.objectifs=t),options:se,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un objectif",class:"w-full",required:""},null,8,["modelValue"])])]),_:1}),w(B(be),{class:"mb-6 shadow-md border border-gray-200"},{title:O(()=>[...r[58]||(r[58]=[o("div",{class:"flex items-center gap-2"},[o("i",{class:"pi pi-users text-gray-700"}),o("span",{class:"text-gray-900 font-semibold"},"Contacts  Appeler")],-1)])]),content:O(()=>[o("div",vn,[o("div",null,[r[59]||(r[59]=o("label",{class:"block mb-2 font-semibold text-gray-700"},"Fichier de contacts (CSV) *",-1)),w(B(at),{mode:"basic",accept:".csv",maxFileSize:1e7,chooseLabel:"Choisir un fichier CSV",onSelect:Ie,class:"w-full",disabled:l.value},null,8,["disabled"]),r[60]||(r[60]=o("small",{class:"text-gray-500 text-sm mt-1 block"},[ae(" Format CSV attendu : nom, email, tlphone, entreprise (optionnel)"),o("br"),o("span",{class:"text-blue-600"},' Le prfixe "+" sera ajout automatiquement aux numros de tlphone si absent.')],-1))]),a.value.length>0?(z(),K("div",yn,[o("h3",kn," Contacts chargs ("+ve(a.value.length)+") ",1),w(B(Ct),{value:a.value.slice(0,10),paginator:a.value.length>10,rows:5,class:"p-datatable-sm",scrollable:!0,scrollHeight:"200px"},{default:O(()=>[w(B(ze),{field:"nom",header:"Nom"}),w(B(ze),{field:"email",header:"Email"}),w(B(ze),{field:"telephone",header:"Tlphone"}),w(B(ze),{field:"entreprise",header:"Entreprise"})]),_:1},8,["value","paginator"]),a.value.length>10?(z(),K("p",wn," ... et "+ve(a.value.length-10)+" autres contacts ",1)):ne("",!0)])):ne("",!0)])]),_:1}),w(B(be),{class:"shadow-md border border-gray-200"},{content:O(()=>[o("div",Cn,[w(B(Oe),{label:"Annuler",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:r[16]||(r[16]=t=>R.$router.push("/")),disabled:l.value},null,8,["disabled"]),w(B(Oe),{type:"submit",label:"Lancer la Campagne",icon:"pi pi-send",loading:l.value,disabled:l.value||a.value.length===0},null,8,["loading","disabled"])])]),_:1})],32)])])}}};export{An as default};
