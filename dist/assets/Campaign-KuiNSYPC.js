import{z as ot,B as Je,f as tt,m as z,c as $,o as B,A as ut,e as u,s as Qe,b as X,r as ge,l as ae,t as ee,R as dt,C as nt,y as pt,k as Ve,P as Ye,W as ct,D as be,n as $e,j as C,E as Ce,w as V,a as ie,d as Ie,F as qe,G as Xe,H as ft,g as pe,I as ht,J as mt,K as Me,h as gt,L as bt,u as I,M as vt,q as je,N as yt}from"./index-Dsp5A8uu.js";import{a as Re}from"./index-B9ygI19o.js";import{s as ke}from"./index-HGkCMLRg.js";import{a as kt,s as wt,b as me}from"./index-CSzfrpg_.js";import{b as Ct,c as St,d as xt,a as Et,s as Te}from"./index-DdZGQ2_O.js";var Oe={exports:{}};var Ft=Oe.exports,et;function _t(){return et||(et=1,(function(e,a){((s,d)=>{e.exports=d()})(Ft,function s(){var d=typeof self<"u"?self:typeof window<"u"?window:d!==void 0?d:{},g,l=!d.document&&!!d.postMessage,_=d.IS_PAPA_WORKER||!1,A={},G=0,c={};function R(n){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(i){var r=ze(i);r.chunkSize=parseInt(r.chunkSize),i.step||i.chunk||(r.chunkSize=null),this._handle=new Le(r),(this._handle.streamer=this)._config=r}).call(this,n),this.parseChunk=function(i,r){var t=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<t){let f=this._config.newline;f||(o=this._config.quoteChar||'"',f=this._handle.guessLineEndings(i,o)),i=[...i.split(f).slice(t)].join(f)}this.isFirstChunk&&T(this._config.beforeFirstChunk)&&(o=this._config.beforeFirstChunk(i))!==void 0&&(i=o),this.isFirstChunk=!1,this._halted=!1;var t=this._partialLine+i,o=(this._partialLine="",this._handle.parse(t,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(i=o.meta.cursor,t=(this._finished||(this._partialLine=t.substring(i-this._baseIndex),this._baseIndex=i),o&&o.data&&(this._rowCount+=o.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),_)d.postMessage({results:o,workerId:c.WORKER_ID,finished:t});else if(T(this._config.chunk)&&!r){if(this._config.chunk(o,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=o=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(o.data),this._completeResults.errors=this._completeResults.errors.concat(o.errors),this._completeResults.meta=o.meta),this._completed||!t||!T(this._config.complete)||o&&o.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),t||o&&o.meta.paused||this._nextChunk(),o}this._halted=!0},this._sendError=function(i){T(this._config.error)?this._config.error(i):_&&this._config.error&&d.postMessage({workerId:c.WORKER_ID,error:i,finished:!1})}}function re(n){var i;(n=n||{}).chunkSize||(n.chunkSize=c.RemoteChunkSize),R.call(this,n),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(i=new XMLHttpRequest,this._config.withCredentials&&(i.withCredentials=this._config.withCredentials),l||(i.onload=le(this._chunkLoaded,this),i.onerror=le(this._chunkError,this)),i.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var r,t=this._config.downloadRequestHeaders;for(r in t)i.setRequestHeader(r,t[r])}var o;this._config.chunkSize&&(o=this._start+this._config.chunkSize-1,i.setRequestHeader("Range","bytes="+this._start+"-"+o));try{i.send(this._config.downloadRequestBody)}catch(f){this._chunkError(f.message)}l&&i.status===0&&this._chunkError()}},this._chunkLoaded=function(){i.readyState===4&&(i.status<200||400<=i.status?this._chunkError():(this._start+=this._config.chunkSize||i.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(i),this.parseChunk(i.responseText)))},this._chunkError=function(r){r=i.statusText||r,this._sendError(new Error(r))}}function m(n){(n=n||{}).chunkSize||(n.chunkSize=c.LocalChunkSize),R.call(this,n);var i,r,t=typeof FileReader<"u";this.stream=function(o){this._input=o,r=o.slice||o.webkitSlice||o.mozSlice,t?((i=new FileReader).onload=le(this._chunkLoaded,this),i.onerror=le(this._chunkError,this)):i=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var o=this._input,f=(this._config.chunkSize&&(f=Math.min(this._start+this._config.chunkSize,this._input.size),o=r.call(o,this._start,f)),i.readAsText(o,this._config.encoding));t||this._chunkLoaded({target:{result:f}})},this._chunkLoaded=function(o){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(o.target.result)},this._chunkError=function(){this._sendError(i.error)}}function se(n){var i;R.call(this,n=n||{}),this.stream=function(r){return i=r,this._nextChunk()},this._nextChunk=function(){var r,t;if(!this._finished)return r=this._config.chunkSize,i=r?(t=i.substring(0,r),i.substring(r)):(t=i,""),this._finished=!i,this.parseChunk(t)}}function ce(n){R.call(this,n=n||{});var i=[],r=!0,t=!1;this.pause=function(){R.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){R.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(o){this._input=o,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){t&&i.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),i.length?this.parseChunk(i.shift()):r=!0},this._streamData=le(function(o){try{i.push(typeof o=="string"?o:o.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(i.shift()))}catch(f){this._streamError(f)}},this),this._streamError=le(function(o){this._streamCleanUp(),this._sendError(o)},this),this._streamEnd=le(function(){this._streamCleanUp(),t=!0,this._streamData("")},this),this._streamCleanUp=le(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Le(n){var i,r,t,o,f=Math.pow(2,53),p=-f,y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,O=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,S=this,M=0,b=0,Q=!1,k=!1,x=[],h={data:[],errors:[],meta:{}};function H(E){return n.skipEmptyLines==="greedy"?E.join("").trim()==="":E.length===1&&E[0].length===0}function q(){if(h&&t&&(te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+c.DefaultDelimiter+"'"),t=!1),n.skipEmptyLines&&(h.data=h.data.filter(function(v){return!H(v)})),J()){let v=function(N,W){T(n.transformHeader)&&(N=n.transformHeader(N,W)),x.push(N)};if(h)if(Array.isArray(h.data[0])){for(var E=0;J()&&E<h.data.length;E++)h.data[E].forEach(v);h.data.splice(0,1)}else h.data.forEach(v)}function L(v,N){for(var W=n.header?{}:[],D=0;D<v.length;D++){var P=D,F=v[D],F=((ne,w)=>(U=>(n.dynamicTypingFunction&&n.dynamicTyping[U]===void 0&&(n.dynamicTyping[U]=n.dynamicTypingFunction(U)),(n.dynamicTyping[U]||n.dynamicTyping)===!0))(ne)?w==="true"||w==="TRUE"||w!=="false"&&w!=="FALSE"&&((U=>{if(y.test(U)&&(U=parseFloat(U),p<U&&U<f))return 1})(w)?parseFloat(w):O.test(w)?new Date(w):w===""?null:w):w)(P=n.header?D>=x.length?"__parsed_extra":x[D]:P,F=n.transform?n.transform(F,P):F);P==="__parsed_extra"?(W[P]=W[P]||[],W[P].push(F)):W[P]=F}return n.header&&(D>x.length?te("FieldMismatch","TooManyFields","Too many fields: expected "+x.length+" fields but parsed "+D,b+N):D<x.length&&te("FieldMismatch","TooFewFields","Too few fields: expected "+x.length+" fields but parsed "+D,b+N)),W}var j;h&&(n.header||n.dynamicTyping||n.transform)&&(j=1,!h.data.length||Array.isArray(h.data[0])?(h.data=h.data.map(L),j=h.data.length):h.data=L(h.data,0),n.header&&h.meta&&(h.meta.fields=x),b+=j)}function J(){return n.header&&x.length===0}function te(E,L,j,v){E={type:E,code:L,message:j},v!==void 0&&(E.row=v),h.errors.push(E)}T(n.step)&&(o=n.step,n.step=function(E){h=E,J()?q():(q(),h.data.length!==0&&(M+=E.data.length,n.preview&&M>n.preview?r.abort():(h.data=h.data[0],o(h,S))))}),this.parse=function(E,L,j){var v=n.quoteChar||'"',v=(n.newline||(n.newline=this.guessLineEndings(E,v)),t=!1,n.delimiter?T(n.delimiter)&&(n.delimiter=n.delimiter(E),h.meta.delimiter=n.delimiter):((v=((N,W,D,P,F)=>{var ne,w,U,ye;F=F||[",","	","|",";",c.RECORD_SEP,c.UNIT_SEP];for(var Se=0;Se<F.length;Se++){for(var oe,_e=F[Se],Z=0,ue=0,K=0,Y=(U=void 0,new Ee({comments:P,delimiter:_e,newline:W,preview:10}).parse(N)),he=0;he<Y.data.length;he++)D&&H(Y.data[he])?K++:(oe=Y.data[he].length,ue+=oe,U===void 0?U=oe:0<oe&&(Z+=Math.abs(oe-U),U=oe));0<Y.data.length&&(ue/=Y.data.length-K),(w===void 0||Z<=w)&&(ye===void 0||ye<ue)&&1.99<ue&&(w=Z,ne=_e,ye=ue)}return{successful:!!(n.delimiter=ne),bestDelimiter:ne}})(E,n.newline,n.skipEmptyLines,n.comments,n.delimitersToGuess)).successful?n.delimiter=v.bestDelimiter:(t=!0,n.delimiter=c.DefaultDelimiter),h.meta.delimiter=n.delimiter),ze(n));return n.preview&&n.header&&v.preview++,i=E,r=new Ee(v),h=r.parse(i,L,j),q(),Q?{meta:{paused:!0}}:h||{meta:{paused:!1}}},this.paused=function(){return Q},this.pause=function(){Q=!0,r.abort(),i=T(n.chunk)?"":i.substring(r.getCharIndex())},this.resume=function(){S.streamer._halted?(Q=!1,S.streamer.parseChunk(i,!0)):setTimeout(S.resume,3)},this.aborted=function(){return k},this.abort=function(){k=!0,r.abort(),h.meta.aborted=!0,T(n.complete)&&n.complete(h),i=""},this.guessLineEndings=function(N,v){N=N.substring(0,1048576);var v=new RegExp(fe(v)+"([^]*?)"+fe(v),"gm"),j=(N=N.replace(v,"")).split("\r"),v=N.split(`
`),N=1<v.length&&v[0].length<j[0].length;if(j.length===1||N)return`
`;for(var W=0,D=0;D<j.length;D++)j[D][0]===`
`&&W++;return W>=j.length/2?`\r
`:"\r"}}function fe(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ee(n){var i=(n=n||{}).delimiter,r=n.newline,t=n.comments,o=n.step,f=n.preview,p=n.fastMode,y=null,O=!1,S=n.quoteChar==null?'"':n.quoteChar,M=S;if(n.escapeChar!==void 0&&(M=n.escapeChar),(typeof i!="string"||-1<c.BAD_DELIMITERS.indexOf(i))&&(i=","),t===i)throw new Error("Comment character same as delimiter");t===!0?t="#":(typeof t!="string"||-1<c.BAD_DELIMITERS.indexOf(t))&&(t=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var b=0,Q=!1;this.parse=function(k,x,h){if(typeof k!="string")throw new Error("Input must be a string");var H=k.length,q=i.length,J=r.length,te=t.length,E=T(o),L=[],j=[],v=[],N=b=0;if(!k)return Z();if(p||p!==!1&&k.indexOf(S)===-1){for(var W=k.split(r),D=0;D<W.length;D++){if(v=W[D],b+=v.length,D!==W.length-1)b+=r.length;else if(h)return Z();if(!t||v.substring(0,te)!==t){if(E){if(L=[],ye(v.split(i)),ue(),Q)return Z()}else ye(v.split(i));if(f&&f<=D)return L=L.slice(0,f),Z(!0)}}return Z()}for(var P=k.indexOf(i,b),F=k.indexOf(r,b),ne=new RegExp(fe(M)+fe(S),"g"),w=k.indexOf(S,b);;)if(k[b]===S)for(w=b,b++;;){if((w=k.indexOf(S,w+1))===-1)return h||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:L.length,index:b}),oe();if(w===H-1)return oe(k.substring(b,w).replace(ne,S));if(S===M&&k[w+1]===M)w++;else if(S===M||w===0||k[w-1]!==M){P!==-1&&P<w+1&&(P=k.indexOf(i,w+1));var U=Se((F=F!==-1&&F<w+1?k.indexOf(r,w+1):F)===-1?P:Math.min(P,F));if(k.substr(w+1+U,q)===i){v.push(k.substring(b,w).replace(ne,S)),k[b=w+1+U+q]!==S&&(w=k.indexOf(S,b)),P=k.indexOf(i,b),F=k.indexOf(r,b);break}if(U=Se(F),k.substring(w+1+U,w+1+U+J)===r){if(v.push(k.substring(b,w).replace(ne,S)),_e(w+1+U+J),P=k.indexOf(i,b),w=k.indexOf(S,b),E&&(ue(),Q))return Z();if(f&&L.length>=f)return Z(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:L.length,index:b}),w++}}else if(t&&v.length===0&&k.substring(b,b+te)===t){if(F===-1)return Z();b=F+J,F=k.indexOf(r,b),P=k.indexOf(i,b)}else if(P!==-1&&(P<F||F===-1))v.push(k.substring(b,P)),b=P+q,P=k.indexOf(i,b);else{if(F===-1)break;if(v.push(k.substring(b,F)),_e(F+J),E&&(ue(),Q))return Z();if(f&&L.length>=f)return Z(!0)}return oe();function ye(K){L.push(K),N=b}function Se(K){var Y=0;return Y=K!==-1&&(K=k.substring(w+1,K))&&K.trim()===""?K.length:Y}function oe(K){return h||(K===void 0&&(K=k.substring(b)),v.push(K),b=H,ye(v),E&&ue()),Z()}function _e(K){b=K,ye(v),v=[],F=k.indexOf(r,b)}function Z(K){if(n.header&&!x&&L.length&&!O){var Y=L[0],he=Object.create(null),Ue=new Set(Y);let Ze=!1;for(let xe=0;xe<Y.length;xe++){let de=Y[xe];if(he[de=T(n.transformHeader)?n.transformHeader(de,xe):de]){let Ae,Ge=he[de];for(;Ae=de+"_"+Ge,Ge++,Ue.has(Ae););Ue.add(Ae),Y[xe]=Ae,he[de]++,Ze=!0,(y=y===null?{}:y)[Ae]=de}else he[de]=1,Y[xe]=de;Ue.add(de)}Ze&&console.warn("Duplicate headers found and renamed."),O=!0}return{data:L,errors:j,meta:{delimiter:i,linebreak:r,aborted:Q,truncated:!!K,cursor:N+(x||0),renamedHeaders:y}}}function ue(){o(Z()),L=[],j=[]}},this.abort=function(){Q=!0},this.getCharIndex=function(){return b}}function ve(n){var i=n.data,r=A[i.workerId],t=!1;if(i.error)r.userError(i.error,i.file);else if(i.results&&i.results.data){var o={abort:function(){t=!0,we(i.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Fe,resume:Fe};if(T(r.userStep)){for(var f=0;f<i.results.data.length&&(r.userStep({data:i.results.data[f],errors:i.results.errors,meta:i.results.meta},o),!t);f++);delete i.results}else T(r.userChunk)&&(r.userChunk(i.results,o,i.file),delete i.results)}i.finished&&!t&&we(i.workerId,i.results)}function we(n,i){var r=A[n];T(r.userComplete)&&r.userComplete(i),r.terminate(),delete A[n]}function Fe(){throw new Error("Not implemented.")}function ze(n){if(typeof n!="object"||n===null)return n;var i,r=Array.isArray(n)?[]:{};for(i in n)r[i]=ze(n[i]);return r}function le(n,i){return function(){n.apply(i,arguments)}}function T(n){return typeof n=="function"}return c.parse=function(n,i){var r=(i=i||{}).dynamicTyping||!1;if(T(r)&&(i.dynamicTypingFunction=r,r={}),i.dynamicTyping=r,i.transform=!!T(i.transform)&&i.transform,!i.worker||!c.WORKERS_SUPPORTED)return r=null,c.NODE_STREAM_INPUT,typeof n=="string"?(n=(t=>t.charCodeAt(0)!==65279?t:t.slice(1))(n),r=new(i.download?re:se)(i)):n.readable===!0&&T(n.read)&&T(n.on)?r=new ce(i):(d.File&&n instanceof File||n instanceof Object)&&(r=new m(i)),r.stream(n);(r=(()=>{var t;return!!c.WORKERS_SUPPORTED&&(t=(()=>{var o=d.URL||d.webkitURL||null,f=s.toString();return c.BLOB_URL||(c.BLOB_URL=o.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",f,")();"],{type:"text/javascript"})))})(),(t=new d.Worker(t)).onmessage=ve,t.id=G++,A[t.id]=t)})()).userStep=i.step,r.userChunk=i.chunk,r.userComplete=i.complete,r.userError=i.error,i.step=T(i.step),i.chunk=T(i.chunk),i.complete=T(i.complete),i.error=T(i.error),delete i.worker,r.postMessage({input:n,config:i,workerId:r.id})},c.unparse=function(n,i){var r=!1,t=!0,o=",",f=`\r
`,p='"',y=p+p,O=!1,S=null,M=!1,b=((()=>{if(typeof i=="object"){if(typeof i.delimiter!="string"||c.BAD_DELIMITERS.filter(function(x){return i.delimiter.indexOf(x)!==-1}).length||(o=i.delimiter),typeof i.quotes!="boolean"&&typeof i.quotes!="function"&&!Array.isArray(i.quotes)||(r=i.quotes),typeof i.skipEmptyLines!="boolean"&&typeof i.skipEmptyLines!="string"||(O=i.skipEmptyLines),typeof i.newline=="string"&&(f=i.newline),typeof i.quoteChar=="string"&&(p=i.quoteChar),typeof i.header=="boolean"&&(t=i.header),Array.isArray(i.columns)){if(i.columns.length===0)throw new Error("Option columns is empty");S=i.columns}i.escapeChar!==void 0&&(y=i.escapeChar+p),i.escapeFormulae instanceof RegExp?M=i.escapeFormulae:typeof i.escapeFormulae=="boolean"&&i.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(fe(p),"g"));if(typeof n=="string"&&(n=JSON.parse(n)),Array.isArray(n)){if(!n.length||Array.isArray(n[0]))return Q(null,n,O);if(typeof n[0]=="object")return Q(S||Object.keys(n[0]),n,O)}else if(typeof n=="object")return typeof n.data=="string"&&(n.data=JSON.parse(n.data)),Array.isArray(n.data)&&(n.fields||(n.fields=n.meta&&n.meta.fields||S),n.fields||(n.fields=Array.isArray(n.data[0])?n.fields:typeof n.data[0]=="object"?Object.keys(n.data[0]):[]),Array.isArray(n.data[0])||typeof n.data[0]=="object"||(n.data=[n.data])),Q(n.fields||[],n.data||[],O);throw new Error("Unable to serialize unrecognized input");function Q(x,h,H){var q="",J=(typeof x=="string"&&(x=JSON.parse(x)),typeof h=="string"&&(h=JSON.parse(h)),Array.isArray(x)&&0<x.length),te=!Array.isArray(h[0]);if(J&&t){for(var E=0;E<x.length;E++)0<E&&(q+=o),q+=k(x[E],E);0<h.length&&(q+=f)}for(var L=0;L<h.length;L++){var j=(J?x:h[L]).length,v=!1,N=J?Object.keys(h[L]).length===0:h[L].length===0;if(H&&!J&&(v=H==="greedy"?h[L].join("").trim()==="":h[L].length===1&&h[L][0].length===0),H==="greedy"&&J){for(var W=[],D=0;D<j;D++){var P=te?x[D]:D;W.push(h[L][P])}v=W.join("").trim()===""}if(!v){for(var F=0;F<j;F++){0<F&&!N&&(q+=o);var ne=J&&te?x[F]:F;q+=k(h[L][ne],F)}L<h.length-1&&(!H||0<j&&!N)&&(q+=f)}}return q}function k(x,h){var H,q;return x==null?"":x.constructor===Date?JSON.stringify(x).slice(1,25):(q=!1,M&&typeof x=="string"&&M.test(x)&&(x="'"+x,q=!0),H=x.toString().replace(b,y),(q=q||r===!0||typeof r=="function"&&r(x,h)||Array.isArray(r)&&r[h]||((J,te)=>{for(var E=0;E<te.length;E++)if(-1<J.indexOf(te[E]))return!0;return!1})(H,c.BAD_DELIMITERS)||-1<H.indexOf(o)||H.charAt(0)===" "||H.charAt(H.length-1)===" ")?p+H+p:H)}},c.RECORD_SEP="",c.UNIT_SEP="",c.BYTE_ORDER_MARK="\uFEFF",c.BAD_DELIMITERS=["\r",`
`,'"',c.BYTE_ORDER_MARK],c.WORKERS_SUPPORTED=!l&&!!d.Worker,c.NODE_STREAM_INPUT=1,c.LocalChunkSize=10485760,c.RemoteChunkSize=5242880,c.DefaultDelimiter=",",c.Parser=Ee,c.ParserHandle=Le,c.NetworkStreamer=re,c.FileStreamer=m,c.StringStreamer=se,c.ReadableStreamStreamer=ce,d.jQuery&&((g=d.jQuery).fn.parse=function(n){var i=n.config||{},r=[];return this.each(function(f){if(!(g(this).prop("tagName").toUpperCase()==="INPUT"&&g(this).attr("type").toLowerCase()==="file"&&d.FileReader)||!this.files||this.files.length===0)return!0;for(var p=0;p<this.files.length;p++)r.push({file:this.files[p],inputElem:this,instanceConfig:g.extend({},i)})}),t(),this;function t(){if(r.length===0)T(n.complete)&&n.complete();else{var f,p,y,O,S=r[0];if(T(n.before)){var M=n.before(S.file,S.inputElem);if(typeof M=="object"){if(M.action==="abort")return f="AbortError",p=S.file,y=S.inputElem,O=M.reason,void(T(n.error)&&n.error({name:f},p,y,O));if(M.action==="skip")return void o();typeof M.config=="object"&&(S.instanceConfig=g.extend(S.instanceConfig,M.config))}else if(M==="skip")return void o()}var b=S.instanceConfig.complete;S.instanceConfig.complete=function(Q){T(b)&&b(Q,S.file,S.inputElem),o()},c.parse(S.file,S.instanceConfig)}}function o(){r.splice(0,1),t()}}),_&&(d.onmessage=function(n){n=n.data,c.WORKER_ID===void 0&&n&&(c.WORKER_ID=n.workerId),typeof n.input=="string"?d.postMessage({workerId:c.WORKER_ID,results:c.parse(n.input,n.config),finished:!0}):(d.File&&n.input instanceof File||n.input instanceof Object)&&(n=c.parse(n.input,n.config))&&d.postMessage({workerId:c.WORKER_ID,results:n,finished:!0})}),(re.prototype=Object.create(R.prototype)).constructor=re,(m.prototype=Object.create(R.prototype)).constructor=m,(se.prototype=Object.create(se.prototype)).constructor=se,(ce.prototype=Object.create(R.prototype)).constructor=ce,c})})(Oe)),Oe.exports}var At=_t();const It=ot(At);var Bt=`
    .p-textarea {
        font-family: inherit;
        font-feature-settings: inherit;
        font-size: 1rem;
        color: dt('textarea.color');
        background: dt('textarea.background');
        padding-block: dt('textarea.padding.y');
        padding-inline: dt('textarea.padding.x');
        border: 1px solid dt('textarea.border.color');
        transition:
            background dt('textarea.transition.duration'),
            color dt('textarea.transition.duration'),
            border-color dt('textarea.transition.duration'),
            outline-color dt('textarea.transition.duration'),
            box-shadow dt('textarea.transition.duration');
        appearance: none;
        border-radius: dt('textarea.border.radius');
        outline-color: transparent;
        box-shadow: dt('textarea.shadow');
    }

    .p-textarea:enabled:hover {
        border-color: dt('textarea.hover.border.color');
    }

    .p-textarea:enabled:focus {
        border-color: dt('textarea.focus.border.color');
        box-shadow: dt('textarea.focus.ring.shadow');
        outline: dt('textarea.focus.ring.width') dt('textarea.focus.ring.style') dt('textarea.focus.ring.color');
        outline-offset: dt('textarea.focus.ring.offset');
    }

    .p-textarea.p-invalid {
        border-color: dt('textarea.invalid.border.color');
    }

    .p-textarea.p-variant-filled {
        background: dt('textarea.filled.background');
    }

    .p-textarea.p-variant-filled:enabled:hover {
        background: dt('textarea.filled.hover.background');
    }

    .p-textarea.p-variant-filled:enabled:focus {
        background: dt('textarea.filled.focus.background');
    }

    .p-textarea:disabled {
        opacity: 1;
        background: dt('textarea.disabled.background');
        color: dt('textarea.disabled.color');
    }

    .p-textarea::placeholder {
        color: dt('textarea.placeholder.color');
    }

    .p-textarea.p-invalid::placeholder {
        color: dt('textarea.invalid.placeholder.color');
    }

    .p-textarea-fluid {
        width: 100%;
    }

    .p-textarea-resizable {
        overflow: hidden;
        resize: none;
    }

    .p-textarea-sm {
        font-size: dt('textarea.sm.font.size');
        padding-block: dt('textarea.sm.padding.y');
        padding-inline: dt('textarea.sm.padding.x');
    }

    .p-textarea-lg {
        font-size: dt('textarea.lg.font.size');
        padding-block: dt('textarea.lg.padding.y');
        padding-inline: dt('textarea.lg.padding.x');
    }
`,Lt={root:function(a){var s=a.instance,d=a.props;return["p-textarea p-component",{"p-filled":s.$filled,"p-textarea-resizable ":d.autoResize,"p-textarea-sm p-inputfield-sm":d.size==="small","p-textarea-lg p-inputfield-lg":d.size==="large","p-invalid":s.$invalid,"p-variant-filled":s.$variant==="filled","p-textarea-fluid":s.$fluid}]}},zt=Je.extend({name:"textarea",style:Bt,classes:Lt}),Rt={name:"BaseTextarea",extends:kt,props:{autoResize:Boolean},style:zt,provide:function(){return{$pcTextarea:this,$parentInstance:this}}};function Be(e){"@babel/helpers - typeof";return Be=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Be(e)}function Tt(e,a,s){return(a=Dt(a))in e?Object.defineProperty(e,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[a]=s,e}function Dt(e){var a=Pt(e,"string");return Be(a)=="symbol"?a:a+""}function Pt(e,a){if(Be(e)!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var d=s.call(e,a);if(Be(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}var He={name:"Textarea",extends:Rt,inheritAttrs:!1,observer:null,mounted:function(){var a=this;this.autoResize&&(this.observer=new ResizeObserver(function(){requestAnimationFrame(function(){a.resize()})}),this.observer.observe(this.$el))},updated:function(){this.autoResize&&this.resize()},beforeUnmount:function(){this.observer&&this.observer.disconnect()},methods:{resize:function(){if(this.$el.offsetParent){var a=this.$el.style.height,s=parseInt(a)||0,d=this.$el.scrollHeight,g=!s||d>s,l=s&&d<s;l?(this.$el.style.height="auto",this.$el.style.height="".concat(this.$el.scrollHeight,"px")):g&&(this.$el.style.height="".concat(d,"px"))}},onInput:function(a){this.autoResize&&this.resize(),this.writeValue(a.target.value,a)}},computed:{attrs:function(){return z(this.ptmi("root",{context:{filled:this.$filled,disabled:this.disabled}}),this.formField)},dataP:function(){return tt(Tt({invalid:this.$invalid,fluid:this.$fluid,filled:this.$variant==="filled"},this.size,this.size))}}},Ot=["value","name","disabled","aria-invalid","data-p"];function Vt(e,a,s,d,g,l){return B(),$("textarea",z({class:e.cx("root"),value:e.d_value,name:e.name,disabled:e.disabled,"aria-invalid":e.invalid||void 0,"data-p":l.dataP,onInput:a[0]||(a[0]=function(){return l.onInput&&l.onInput.apply(l,arguments)})},l.attrs),null,16,Ot)}He.render=Vt;var De={name:"Dropdown",extends:Ct,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},it={name:"UploadIcon",extends:ut};function Ut(e){return $t(e)||Nt(e)||jt(e)||Mt()}function Mt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(e,a){if(e){if(typeof e=="string")return We(e,a);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?We(e,a):void 0}}function Nt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $t(e){if(Array.isArray(e))return We(e)}function We(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,d=Array(a);s<a;s++)d[s]=e[s];return d}function qt(e,a,s,d,g,l){return B(),$("svg",z({width:"14",height:"14",viewBox:"0 0 14 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e.pti()),Ut(a[0]||(a[0]=[u("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.58942 9.82197C6.70165 9.93405 6.85328 9.99793 7.012 10C7.17071 9.99793 7.32234 9.93405 7.43458 9.82197C7.54681 9.7099 7.61079 9.55849 7.61286 9.4V2.04798L9.79204 4.22402C9.84752 4.28011 9.91365 4.32457 9.98657 4.35479C10.0595 4.38502 10.1377 4.40039 10.2167 4.40002C10.2956 4.40039 10.3738 4.38502 10.4467 4.35479C10.5197 4.32457 10.5858 4.28011 10.6413 4.22402C10.7538 4.11152 10.817 3.95902 10.817 3.80002C10.817 3.64102 10.7538 3.48852 10.6413 3.37602L7.45127 0.190618C7.44656 0.185584 7.44176 0.180622 7.43687 0.175736C7.32419 0.063214 7.17136 0 7.012 0C6.85264 0 6.69981 0.063214 6.58712 0.175736C6.58181 0.181045 6.5766 0.186443 6.5715 0.191927L3.38282 3.37602C3.27669 3.48976 3.2189 3.6402 3.22165 3.79564C3.2244 3.95108 3.28746 4.09939 3.39755 4.20932C3.50764 4.31925 3.65616 4.38222 3.81182 4.38496C3.96749 4.3877 4.11814 4.33001 4.23204 4.22402L6.41113 2.04807V9.4C6.41321 9.55849 6.47718 9.7099 6.58942 9.82197ZM11.9952 14H2.02883C1.751 13.9887 1.47813 13.9228 1.22584 13.8061C0.973545 13.6894 0.746779 13.5241 0.558517 13.3197C0.370254 13.1154 0.22419 12.876 0.128681 12.6152C0.0331723 12.3545 -0.00990605 12.0775 0.0019109 11.8V9.40005C0.0019109 9.24092 0.065216 9.08831 0.1779 8.97579C0.290584 8.86326 0.443416 8.80005 0.602775 8.80005C0.762134 8.80005 0.914966 8.86326 1.02765 8.97579C1.14033 9.08831 1.20364 9.24092 1.20364 9.40005V11.8C1.18295 12.0376 1.25463 12.274 1.40379 12.4602C1.55296 12.6463 1.76817 12.7681 2.00479 12.8H11.9952C12.2318 12.7681 12.447 12.6463 12.5962 12.4602C12.7453 12.274 12.817 12.0376 12.7963 11.8V9.40005C12.7963 9.24092 12.8596 9.08831 12.9723 8.97579C13.085 8.86326 13.2378 8.80005 13.3972 8.80005C13.5565 8.80005 13.7094 8.86326 13.8221 8.97579C13.9347 9.08831 13.998 9.24092 13.998 9.40005V11.8C14.022 12.3563 13.8251 12.8996 13.45 13.3116C13.0749 13.7236 12.552 13.971 11.9952 14Z",fill:"currentColor"},null,-1)])),16)}it.render=qt;var Ht=`
    .p-progressbar {
        display: block;
        position: relative;
        overflow: hidden;
        height: dt('progressbar.height');
        background: dt('progressbar.background');
        border-radius: dt('progressbar.border.radius');
    }

    .p-progressbar-value {
        margin: 0;
        background: dt('progressbar.value.background');
    }

    .p-progressbar-label {
        color: dt('progressbar.label.color');
        font-size: dt('progressbar.label.font.size');
        font-weight: dt('progressbar.label.font.weight');
    }

    .p-progressbar-determinate .p-progressbar-value {
        height: 100%;
        width: 0%;
        position: absolute;
        display: none;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        transition: width 1s ease-in-out;
    }

    .p-progressbar-determinate .p-progressbar-label {
        display: inline-flex;
    }

    .p-progressbar-indeterminate .p-progressbar-value::before {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    }

    .p-progressbar-indeterminate .p-progressbar-value::after {
        content: '';
        position: absolute;
        background: inherit;
        inset-block-start: 0;
        inset-inline-start: 0;
        inset-block-end: 0;
        will-change: inset-inline-start, inset-inline-end;
        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;
        animation-delay: 1.15s;
    }

    @keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim {
        0% {
            inset-inline-start: -35%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
        100% {
            inset-inline-start: 100%;
            inset-inline-end: -90%;
        }
    }

    @keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
    @-webkit-keyframes p-progressbar-indeterminate-anim-short {
        0% {
            inset-inline-start: -200%;
            inset-inline-end: 100%;
        }
        60% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
        100% {
            inset-inline-start: 107%;
            inset-inline-end: -8%;
        }
    }
`,Wt={root:function(a){var s=a.instance;return["p-progressbar p-component",{"p-progressbar-determinate":s.determinate,"p-progressbar-indeterminate":s.indeterminate}]},value:"p-progressbar-value",label:"p-progressbar-label"},Kt=Je.extend({name:"progressbar",style:Ht,classes:Wt}),Jt={name:"BaseProgressBar",extends:Qe,props:{value:{type:Number,default:null},mode:{type:String,default:"determinate"},showValue:{type:Boolean,default:!0}},style:Kt,provide:function(){return{$pcProgressBar:this,$parentInstance:this}}},at={name:"ProgressBar",extends:Jt,inheritAttrs:!1,computed:{progressStyle:function(){return{width:this.value+"%",display:"flex"}},indeterminate:function(){return this.mode==="indeterminate"},determinate:function(){return this.mode==="determinate"},dataP:function(){return tt({determinate:this.determinate,indeterminate:this.indeterminate})}}},Qt=["aria-valuenow","data-p"],Zt=["data-p"],Gt=["data-p"],Yt=["data-p"];function Xt(e,a,s,d,g,l){return B(),$("div",z({role:"progressbar",class:e.cx("root"),"aria-valuemin":"0","aria-valuenow":e.value,"aria-valuemax":"100","data-p":l.dataP},e.ptmi("root")),[l.determinate?(B(),$("div",z({key:0,class:e.cx("value"),style:l.progressStyle,"data-p":l.dataP},e.ptm("value")),[e.value!=null&&e.value!==0&&e.showValue?(B(),$("div",z({key:0,class:e.cx("label"),"data-p":l.dataP},e.ptm("label")),[ge(e.$slots,"default",{},function(){return[ae(ee(e.value+"%"),1)]})],16,Gt)):X("",!0)],16,Zt)):l.indeterminate?(B(),$("div",z({key:1,class:e.cx("value"),"data-p":l.dataP},e.ptm("value")),null,16,Yt)):X("",!0)],16,Qt)}at.render=Xt;var en=`
    .p-fileupload input[type='file'] {
        display: none;
    }

    .p-fileupload-advanced {
        border: 1px solid dt('fileupload.border.color');
        border-radius: dt('fileupload.border.radius');
        background: dt('fileupload.background');
        color: dt('fileupload.color');
    }

    .p-fileupload-header {
        display: flex;
        align-items: center;
        padding: dt('fileupload.header.padding');
        background: dt('fileupload.header.background');
        color: dt('fileupload.header.color');
        border-style: solid;
        border-width: dt('fileupload.header.border.width');
        border-color: dt('fileupload.header.border.color');
        border-radius: dt('fileupload.header.border.radius');
        gap: dt('fileupload.header.gap');
    }

    .p-fileupload-content {
        border: 1px solid transparent;
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.content.gap');
        transition: border-color dt('fileupload.transition.duration');
        padding: dt('fileupload.content.padding');
    }

    .p-fileupload-content .p-progressbar {
        width: 100%;
        height: dt('fileupload.progressbar.height');
    }

    .p-fileupload-file-list {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.filelist.gap');
    }

    .p-fileupload-file {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        padding: dt('fileupload.file.padding');
        border-block-end: 1px solid dt('fileupload.file.border.color');
        gap: dt('fileupload.file.gap');
    }

    .p-fileupload-file:last-child {
        border-block-end: 0;
    }

    .p-fileupload-file-info {
        display: flex;
        flex-direction: column;
        gap: dt('fileupload.file.info.gap');
    }

    .p-fileupload-file-thumbnail {
        flex-shrink: 0;
    }

    .p-fileupload-file-actions {
        margin-inline-start: auto;
    }

    .p-fileupload-highlight {
        border: 1px dashed dt('fileupload.content.highlight.border.color');
    }

    .p-fileupload-basic .p-message {
        margin-block-end: dt('fileupload.basic.gap');
    }

    .p-fileupload-basic-content {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: dt('fileupload.basic.gap');
    }
`,tn={root:function(a){var s=a.props;return["p-fileupload p-fileupload-".concat(s.mode," p-component")]},header:"p-fileupload-header",pcChooseButton:"p-fileupload-choose-button",pcUploadButton:"p-fileupload-upload-button",pcCancelButton:"p-fileupload-cancel-button",content:"p-fileupload-content",fileList:"p-fileupload-file-list",file:"p-fileupload-file",fileThumbnail:"p-fileupload-file-thumbnail",fileInfo:"p-fileupload-file-info",fileName:"p-fileupload-file-name",fileSize:"p-fileupload-file-size",pcFileBadge:"p-fileupload-file-badge",fileActions:"p-fileupload-file-actions",pcFileRemoveButton:"p-fileupload-file-remove-button",basicContent:"p-fileupload-basic-content"},nn=Je.extend({name:"fileupload",style:en,classes:tn}),an={name:"BaseFileUpload",extends:Qe,props:{name:{type:String,default:null},url:{type:String,default:null},mode:{type:String,default:"advanced"},multiple:{type:Boolean,default:!1},accept:{type:String,default:null},disabled:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},maxFileSize:{type:Number,default:null},invalidFileSizeMessage:{type:String,default:"{0}: Invalid file size, file size should be smaller than {1}."},invalidFileTypeMessage:{type:String,default:"{0}: Invalid file type, allowed file types: {1}."},fileLimit:{type:Number,default:null},invalidFileLimitMessage:{type:String,default:"Maximum number of files exceeded, limit is {0} at most."},withCredentials:{type:Boolean,default:!1},previewWidth:{type:Number,default:50},chooseLabel:{type:String,default:null},uploadLabel:{type:String,default:null},cancelLabel:{type:String,default:null},customUpload:{type:Boolean,default:!1},showUploadButton:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},chooseIcon:{type:String,default:void 0},uploadIcon:{type:String,default:void 0},cancelIcon:{type:String,default:void 0},style:null,class:null,chooseButtonProps:{type:null,default:null},uploadButtonProps:{type:Object,default:function(){return{severity:"secondary"}}},cancelButtonProps:{type:Object,default:function(){return{severity:"secondary"}}}},style:nn,provide:function(){return{$pcFileUpload:this,$parentInstance:this}}},rt={name:"FileContent",hostName:"FileUpload",extends:Qe,emits:["remove"],props:{files:{type:Array,default:function(){return[]}},badgeSeverity:{type:String,default:"warn"},badgeValue:{type:String,default:null},previewWidth:{type:Number,default:50},templates:{type:null,default:null}},methods:{formatSize:function(a){var s,d=1024,g=3,l=((s=this.$primevue.config.locale)===null||s===void 0?void 0:s.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(l[0]);var _=Math.floor(Math.log(a)/Math.log(d)),A=parseFloat((a/Math.pow(d,_)).toFixed(g));return"".concat(A," ").concat(l[_])}},components:{Button:Ve,Badge:pt,TimesIcon:nt}},rn=["alt","src","width"];function sn(e,a,s,d,g,l){var _=be("Badge"),A=be("TimesIcon"),G=be("Button");return B(!0),$(qe,null,$e(s.files,function(c,R){return B(),$("div",z({key:c.name+c.type+c.size,class:e.cx("file")},{ref_for:!0},e.ptm("file")),[u("img",z({role:"presentation",class:e.cx("fileThumbnail"),alt:c.name,src:c.objectURL,width:s.previewWidth},{ref_for:!0},e.ptm("fileThumbnail")),null,16,rn),u("div",z({class:e.cx("fileInfo")},{ref_for:!0},e.ptm("fileInfo")),[u("div",z({class:e.cx("fileName")},{ref_for:!0},e.ptm("fileName")),ee(c.name),17),u("span",z({class:e.cx("fileSize")},{ref_for:!0},e.ptm("fileSize")),ee(l.formatSize(c.size)),17)],16),C(_,{value:s.badgeValue,class:Ce(e.cx("pcFileBadge")),severity:s.badgeSeverity,unstyled:e.unstyled,pt:e.ptm("pcFileBadge")},null,8,["value","class","severity","unstyled","pt"]),u("div",z({class:e.cx("fileActions")},{ref_for:!0},e.ptm("fileActions")),[C(G,{onClick:function(m){return e.$emit("remove",R)},text:"",rounded:"",severity:"danger",class:Ce(e.cx("pcFileRemoveButton")),unstyled:e.unstyled,pt:e.ptm("pcFileRemoveButton")},{icon:V(function(re){return[s.templates.fileremoveicon?(B(),ie(Ie(s.templates.fileremoveicon),{key:0,class:Ce(re.class),file:c,index:R},null,8,["class","file","index"])):(B(),ie(A,z({key:1,class:re.class,"aria-hidden":"true"},{ref_for:!0},e.ptm("pcFileRemoveButton").icon),null,16,["class"]))]}),_:2},1032,["onClick","class","unstyled","pt"])],16)],16)}),128)}rt.render=sn;function Ne(e){return un(e)||on(e)||st(e)||ln()}function ln(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function on(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function un(e){if(Array.isArray(e))return Ke(e)}function Pe(e,a){var s=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!s){if(Array.isArray(e)||(s=st(e))||a){s&&(e=s);var d=0,g=function(){};return{s:g,n:function(){return d>=e.length?{done:!0}:{done:!1,value:e[d++]}},e:function(c){throw c},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,_=!0,A=!1;return{s:function(){s=s.call(e)},n:function(){var c=s.next();return _=c.done,c},e:function(c){A=!0,l=c},f:function(){try{_||s.return==null||s.return()}finally{if(A)throw l}}}}function st(e,a){if(e){if(typeof e=="string")return Ke(e,a);var s={}.toString.call(e).slice(8,-1);return s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set"?Array.from(e):s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?Ke(e,a):void 0}}function Ke(e,a){(a==null||a>e.length)&&(a=e.length);for(var s=0,d=Array(a);s<a;s++)d[s]=e[s];return d}var lt={name:"FileUpload",extends:an,inheritAttrs:!1,emits:["select","uploader","before-upload","progress","upload","error","before-send","clear","remove","remove-uploaded-file"],duplicateIEEvent:!1,data:function(){return{uploadedFileCount:0,files:[],messages:[],focused:!1,progress:null,uploadedFiles:[]}},methods:{upload:function(){this.hasFiles&&this.uploader()},onBasicUploaderClick:function(a){a.button===0&&this.$refs.fileInput.click()},onFileSelect:function(a){if(a.type!=="drop"&&this.isIE11()&&this.duplicateIEEvent){this.duplicateIEEvent=!1;return}this.isBasic&&this.hasFiles&&(this.files=[]),this.messages=[],this.files=this.files||[];var s=a.dataTransfer?a.dataTransfer.files:a.target.files,d=Pe(s),g;try{for(d.s();!(g=d.n()).done;){var l=g.value;!this.isFileSelected(l)&&!this.isFileLimitExceeded()&&this.validate(l)&&(this.isImage(l)&&(l.objectURL=window.URL.createObjectURL(l)),this.files.push(l))}}catch(_){d.e(_)}finally{d.f()}this.$emit("select",{originalEvent:a,files:this.files}),this.fileLimit&&this.checkFileLimit(),this.auto&&this.hasFiles&&!this.isFileLimitExceeded()&&this.uploader(),a.type!=="drop"&&this.isIE11()?this.clearIEInput():this.clearInputElement()},choose:function(){this.$refs.fileInput.click()},uploader:function(){var a=this;if(this.customUpload)this.fileLimit&&(this.uploadedFileCount+=this.files.length),this.$emit("uploader",{files:this.files});else{var s=new XMLHttpRequest,d=new FormData;this.$emit("before-upload",{xhr:s,formData:d});var g=Pe(this.files),l;try{for(g.s();!(l=g.n()).done;){var _=l.value;d.append(this.name,_,_.name)}}catch(A){g.e(A)}finally{g.f()}s.upload.addEventListener("progress",function(A){A.lengthComputable&&(a.progress=Math.round(A.loaded*100/A.total)),a.$emit("progress",{originalEvent:A,progress:a.progress})}),s.onreadystatechange=function(){if(s.readyState===4){if(a.progress=0,s.status>=200&&s.status<300){var A;a.fileLimit&&(a.uploadedFileCount+=a.files.length),a.$emit("upload",{xhr:s,files:a.files}),(A=a.uploadedFiles).push.apply(A,Ne(a.files))}else a.$emit("error",{xhr:s,files:a.files});a.clear()}},this.url&&(s.open("POST",this.url,!0),this.$emit("before-send",{xhr:s,formData:d}),s.withCredentials=this.withCredentials,s.send(d))}},clear:function(){this.files=[],this.messages=null,this.$emit("clear"),this.isAdvanced&&this.clearInputElement()},onFocus:function(){this.focused=!0},onBlur:function(){this.focused=!1},isFileSelected:function(a){if(this.files&&this.files.length){var s=Pe(this.files),d;try{for(s.s();!(d=s.n()).done;){var g=d.value;if(g.name+g.type+g.size===a.name+a.type+a.size)return!0}}catch(l){s.e(l)}finally{s.f()}}return!1},isIE11:function(){return!!window.MSInputMethodContext&&!!document.documentMode},validate:function(a){return this.accept&&!this.isFileTypeValid(a)?(this.messages.push(this.invalidFileTypeMessage.replace("{0}",a.name).replace("{1}",this.accept)),!1):this.maxFileSize&&a.size>this.maxFileSize?(this.messages.push(this.invalidFileSizeMessage.replace("{0}",a.name).replace("{1}",this.formatSize(this.maxFileSize))),!1):!0},isFileTypeValid:function(a){var s=this.accept.split(",").map(function(A){return A.trim()}),d=Pe(s),g;try{for(d.s();!(g=d.n()).done;){var l=g.value,_=this.isWildcard(l)?this.getTypeClass(a.type)===this.getTypeClass(l):a.type==l||this.getFileExtension(a).toLowerCase()===l.toLowerCase();if(_)return!0}}catch(A){d.e(A)}finally{d.f()}return!1},getTypeClass:function(a){return a.substring(0,a.indexOf("/"))},isWildcard:function(a){return a.indexOf("*")!==-1},getFileExtension:function(a){return"."+a.name.split(".").pop()},isImage:function(a){return/^image\//.test(a.type)},onDragEnter:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(a.stopPropagation(),a.preventDefault())},onDragOver:function(a){!this.disabled&&(!this.hasFiles||this.multiple)&&(!this.isUnstyled&&ct(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!0),a.stopPropagation(),a.preventDefault())},onDragLeave:function(){this.disabled||(!this.isUnstyled&&Ye(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1))},onDrop:function(a){if(!this.disabled){!this.isUnstyled&&Ye(this.$refs.content,"p-fileupload-highlight"),this.$refs.content.setAttribute("data-p-highlight",!1),a.stopPropagation(),a.preventDefault();var s=a.dataTransfer?a.dataTransfer.files:a.target.files,d=this.multiple||s&&s.length===1;d&&this.onFileSelect(a)}},remove:function(a){this.clearInputElement();var s=this.files.splice(a,1)[0];this.files=Ne(this.files),this.$emit("remove",{file:s,files:this.files})},removeUploadedFile:function(a){var s=this.uploadedFiles.splice(a,1)[0];this.uploadedFiles=Ne(this.uploadedFiles),this.$emit("remove-uploaded-file",{file:s,files:this.uploadedFiles})},clearInputElement:function(){this.$refs.fileInput.value=""},clearIEInput:function(){this.$refs.fileInput&&(this.duplicateIEEvent=!0,this.$refs.fileInput.value="")},formatSize:function(a){var s,d=1024,g=3,l=((s=this.$primevue.config.locale)===null||s===void 0?void 0:s.fileSizeTypes)||["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(a===0)return"0 ".concat(l[0]);var _=Math.floor(Math.log(a)/Math.log(d)),A=parseFloat((a/Math.pow(d,_)).toFixed(g));return"".concat(A," ").concat(l[_])},isFileLimitExceeded:function(){return this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount&&this.focused&&(this.focused=!1),this.fileLimit&&this.fileLimit<this.files.length+this.uploadedFileCount},checkFileLimit:function(){this.isFileLimitExceeded()&&this.messages.push(this.invalidFileLimitMessage.replace("{0}",this.fileLimit.toString()))},onMessageClose:function(){this.messages=null}},computed:{isAdvanced:function(){return this.mode==="advanced"},isBasic:function(){return this.mode==="basic"},chooseButtonClass:function(){return[this.cx("pcChooseButton"),this.class]},basicFileChosenLabel:function(){var a;if(this.auto)return this.chooseButtonLabel;if(this.hasFiles){var s;return this.files&&this.files.length===1?this.files[0].name:(s=this.$primevue.config.locale)===null||s===void 0||(s=s.fileChosenMessage)===null||s===void 0?void 0:s.replace("{0}",this.files.length)}return((a=this.$primevue.config.locale)===null||a===void 0?void 0:a.noFileChosenMessage)||""},hasFiles:function(){return this.files&&this.files.length>0},hasUploadedFiles:function(){return this.uploadedFiles&&this.uploadedFiles.length>0},chooseDisabled:function(){return this.disabled||this.fileLimit&&this.fileLimit<=this.files.length+this.uploadedFileCount},uploadDisabled:function(){return this.disabled||!this.hasFiles||this.fileLimit&&this.fileLimit<this.files.length},cancelDisabled:function(){return this.disabled||!this.hasFiles},chooseButtonLabel:function(){return this.chooseLabel||this.$primevue.config.locale.choose},uploadButtonLabel:function(){return this.uploadLabel||this.$primevue.config.locale.upload},cancelButtonLabel:function(){return this.cancelLabel||this.$primevue.config.locale.cancel},completedLabel:function(){return this.$primevue.config.locale.completed},pendingLabel:function(){return this.$primevue.config.locale.pending}},components:{Button:Ve,ProgressBar:at,Message:wt,FileContent:rt,PlusIcon:St,UploadIcon:it,TimesIcon:nt},directives:{ripple:dt}},dn=["multiple","accept","disabled"],pn=["accept","disabled","multiple"];function cn(e,a,s,d,g,l){var _=be("Button"),A=be("ProgressBar"),G=be("Message"),c=be("FileContent");return l.isAdvanced?(B(),$("div",z({key:0,class:e.cx("root")},e.ptmi("root")),[u("input",z({ref:"fileInput",type:"file",onChange:a[0]||(a[0]=function(){return l.onFileSelect&&l.onFileSelect.apply(l,arguments)}),multiple:e.multiple,accept:e.accept,disabled:l.chooseDisabled},e.ptm("input")),null,16,dn),u("div",z({class:e.cx("header")},e.ptm("header")),[ge(e.$slots,"header",{files:g.files,uploadedFiles:g.uploadedFiles,chooseCallback:l.choose,uploadCallback:l.uploader,clearCallback:l.clear},function(){return[C(_,z({label:l.chooseButtonLabel,class:l.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onClick:l.choose,onKeydown:Xe(l.choose,["enter"]),onFocus:l.onFocus,onBlur:l.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:V(function(R){return[ge(e.$slots,"chooseicon",{},function(){return[(B(),ie(Ie(e.chooseIcon?"span":"PlusIcon"),z({class:[R.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onClick","onKeydown","onFocus","onBlur","pt"]),e.showUploadButton?(B(),ie(_,z({key:0,class:e.cx("pcUploadButton"),label:l.uploadButtonLabel,onClick:l.uploader,disabled:l.uploadDisabled,unstyled:e.unstyled},e.uploadButtonProps,{pt:e.ptm("pcUploadButton")}),{icon:V(function(R){return[ge(e.$slots,"uploadicon",{},function(){return[(B(),ie(Ie(e.uploadIcon?"span":"UploadIcon"),z({class:[R.class,e.uploadIcon],"aria-hidden":"true"},e.ptm("pcUploadButton").icon,{"data-pc-section":"uploadbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):X("",!0),e.showCancelButton?(B(),ie(_,z({key:1,class:e.cx("pcCancelButton"),label:l.cancelButtonLabel,onClick:l.clear,disabled:l.cancelDisabled,unstyled:e.unstyled},e.cancelButtonProps,{pt:e.ptm("pcCancelButton")}),{icon:V(function(R){return[ge(e.$slots,"cancelicon",{},function(){return[(B(),ie(Ie(e.cancelIcon?"span":"TimesIcon"),z({class:[R.class,e.cancelIcon],"aria-hidden":"true"},e.ptm("pcCancelButton").icon,{"data-pc-section":"cancelbuttonicon"}),null,16,["class"]))]})]}),_:3},16,["class","label","onClick","disabled","unstyled","pt"])):X("",!0)]})],16),u("div",z({ref:"content",class:e.cx("content"),onDragenter:a[1]||(a[1]=function(){return l.onDragEnter&&l.onDragEnter.apply(l,arguments)}),onDragover:a[2]||(a[2]=function(){return l.onDragOver&&l.onDragOver.apply(l,arguments)}),onDragleave:a[3]||(a[3]=function(){return l.onDragLeave&&l.onDragLeave.apply(l,arguments)}),onDrop:a[4]||(a[4]=function(){return l.onDrop&&l.onDrop.apply(l,arguments)})},e.ptm("content"),{"data-p-highlight":!1}),[ge(e.$slots,"content",{files:g.files,uploadedFiles:g.uploadedFiles,removeUploadedFileCallback:l.removeUploadedFile,removeFileCallback:l.remove,progress:g.progress,messages:g.messages},function(){return[l.hasFiles?(B(),ie(A,{key:0,value:g.progress,showValue:!1,unstyled:e.unstyled,pt:e.ptm("pcProgressbar")},null,8,["value","unstyled","pt"])):X("",!0),(B(!0),$(qe,null,$e(g.messages,function(R){return B(),ie(G,{key:R,severity:"error",onClose:l.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:V(function(){return[ae(ee(R),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),l.hasFiles?(B(),$("div",{key:1,class:Ce(e.cx("fileList"))},[C(c,{files:g.files,onRemove:l.remove,badgeValue:l.pendingLabel,previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):X("",!0),l.hasUploadedFiles?(B(),$("div",{key:2,class:Ce(e.cx("fileList"))},[C(c,{files:g.uploadedFiles,onRemove:l.removeUploadedFile,badgeValue:l.completedLabel,badgeSeverity:"success",previewWidth:e.previewWidth,templates:e.$slots,unstyled:e.unstyled,pt:e.pt},null,8,["files","onRemove","badgeValue","previewWidth","templates","unstyled","pt"])],2)):X("",!0)]}),e.$slots.empty&&!l.hasFiles&&!l.hasUploadedFiles?(B(),$("div",ft(z({key:0},e.ptm("empty"))),[ge(e.$slots,"empty")],16)):X("",!0)],16)],16)):l.isBasic?(B(),$("div",z({key:1,class:e.cx("root")},e.ptmi("root")),[(B(!0),$(qe,null,$e(g.messages,function(R){return B(),ie(G,{key:R,severity:"error",onClose:l.onMessageClose,unstyled:e.unstyled,pt:e.ptm("pcMessage")},{default:V(function(){return[ae(ee(R),1)]}),_:2},1032,["onClose","unstyled","pt"])}),128)),u("div",z({class:e.cx("basicContent")},e.ptm("basicContent")),[C(_,z({label:l.chooseButtonLabel,class:l.chooseButtonClass,style:e.style,disabled:e.disabled,unstyled:e.unstyled,onMouseup:l.onBasicUploaderClick,onKeydown:Xe(l.choose,["enter"]),onFocus:l.onFocus,onBlur:l.onBlur},e.chooseButtonProps,{pt:e.ptm("pcChooseButton")}),{icon:V(function(R){return[ge(e.$slots,"chooseicon",{},function(){return[(B(),ie(Ie(e.chooseIcon?"span":"PlusIcon"),z({class:[R.class,e.chooseIcon],"aria-hidden":"true"},e.ptm("pcChooseButton").icon),null,16,["class"]))]})]}),_:3},16,["label","class","style","disabled","unstyled","onMouseup","onKeydown","onFocus","onBlur","pt"]),e.auto?X("",!0):ge(e.$slots,"filelabel",{key:0,class:Ce(e.cx("filelabel")),files:g.files},function(){return[u("span",{class:Ce(e.cx("filelabel"))},ee(l.basicFileChosenLabel),3)]}),u("input",z({ref:"fileInput",type:"file",accept:e.accept,disabled:e.disabled,multiple:e.multiple,onChange:a[5]||(a[5]=function(){return l.onFileSelect&&l.onFileSelect.apply(l,arguments)}),onFocus:a[6]||(a[6]=function(){return l.onFocus&&l.onFocus.apply(l,arguments)}),onBlur:a[7]||(a[7]=function(){return l.onBlur&&l.onBlur.apply(l,arguments)})},e.ptm("input")),null,16,pn)],16)],16)):X("",!0)}lt.render=cn;const fn={class:"min-h-screen bg-gray-50 p-6"},hn={class:"max-w-5xl mx-auto"},mn={class:"mb-4"},gn={key:0},bn={key:0,class:"text-sm text-red-600"},vn={key:1,class:"text-sm text-gray-700"},yn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},kn={class:"md:col-span-2"},wn={class:"md:col-span-2"},Cn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Sn={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xn={class:"space-y-2"},En={class:"space-y-4"},Fn={key:0,class:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},_n={class:"font-semibold text-gray-900 mb-3"},An={key:0,class:"text-sm text-gray-600 mt-2 text-center"},In={class:"flex justify-end gap-3"},Dn={__name:"Campaign",setup(e){const a=yt(),s=pe([]),d=pe(""),g=pe(""),l=pe(!1);pe("");const _=ht(),A=async(r,t={})=>{const o={ts:new Date().toISOString(),message:r,meta:t};try{const f=`${window.location.origin}/client-log`;await Re.post(f,o,{timeout:3e3})}catch{try{const p=`${window.location.origin}/client-log`;await Re.post(p,o,{timeout:3e3})}catch(p){try{console.log("sendServerLog error (both attempts)",p)}catch{}}}try{console.log(`${o.ts} - ${o.message}`)}catch{}};try{window.__sendClientLog=(r="client-log test ping")=>A(r,{test:!0})}catch{}const G=["Immobilier","Tech","Finance","Conseil","Autre"],c=[{label:"United States",value:"+14752906147"},{label:"Switzerland",value:"+41234567890"}],R=[{label:"Africa/Porto-Novo",value:"Africa/Porto-Novo"},{label:"Africa/Cairo",value:"Africa/Cairo"},{label:"Africa/Johannesburg",value:"Africa/Johannesburg"},{label:"America/Los_Angeles",value:"America/Los_Angeles"},{label:"America/Denver",value:"America/Denver"},{label:"America/Chicago",value:"America/Chicago"},{label:"America/New_York",value:"America/New_York"},{label:"America/Phoenix",value:"America/Phoenix"},{label:"America/Anchorage",value:"America/Anchorage"},{label:"America/Halifax",value:"America/Halifax"},{label:"America/Sao_Paulo",value:"America/Sao_Paulo"},{label:"Europe/London",value:"Europe/London"},{label:"Europe/Paris",value:"Europe/Paris"},{label:"Europe/Zurich",value:"Europe/Zurich"},{label:"Europe/Berlin",value:"Europe/Berlin"},{label:"Asia/Dubai",value:"Asia/Dubai"},{label:"Asia/Kolkata",value:"Asia/Kolkata"},{label:"Asia/Shanghai",value:"Asia/Shanghai"},{label:"Asia/Tokyo",value:"Asia/Tokyo"},{label:"Australia/Sydney",value:"Australia/Sydney"},{label:"Pacific/Auckland",value:"Pacific/Auckland"},{label:"UTC",value:"UTC"}],re=[{label:"Prise de rendez-vous",value:"Prise de rendez-vous"},{label:"Qualification de prospects",value:"Qualification de prospects"},{label:"Vente directe",value:"Vente directe"},{label:"Relance clients",value:"Relance clients"},{label:"Sondage",value:"Sondage"},{label:"Demande d'information",value:"Demande d'information"}],m=mt({company_name:"",domain:"",promesse_de_valeur:"",confidence_threshold:.7,agent_name:"Julie",referral_name:"",infos:"",objectifs:"",contact_first_name:"",decision_maker_name:"",processus_metier:"",key_capability:"",call_script_example:"",decision_committee:[],from_number:"+14752906147",pain_point_identifie:"",timezone:"Africa/Porto-Novo"}),se=pe([]),ce=pe("starter"),Le=pe(60);pe(null);const fe=pe(0),Ee=Me(()=>se.value.find(r=>r.slug===ce.value)||null),ve=Me(()=>Number(Ee.value?.monthly_campaign_limit||0)),we=Me(()=>Math.max(0,ve.value-(fe.value||0))),Fe=async()=>{try{const{data:{user:r}}=await je.auth.getUser();if(!r)return;const t=new Date;t.setUTCDate(1),t.setUTCHours(0,0,0,0);const{data:o,error:f}=await je.from("campaigns").select("id").eq("user_id",r.id).gte("created_at",t.toISOString());!f&&Array.isArray(o)&&(fe.value=o.length)}catch{}};gt(()=>{Fe()}),bt(ce,()=>{Fe()}),(async()=>{try{const r=await Re.get("/api/plans");se.value=r.data||[],se.value.length>0&&(ce.value=se.value[0].slug)}catch{}})();const le=r=>{if(!r)return"";let t=r.replace(/[\s\-\(\)\.]/g,"");return t.startsWith("+")?t:t.startsWith("00")?"+"+t.substring(2):"+"+t},T=r=>{if(!r)return[];const t=It.parse(r,{header:!0,skipEmptyLines:!0,transformHeader:f=>(f||"").trim().toLowerCase()}),o=[];return!t||!t.data||t.data.forEach(f=>{const p={};for(const y in f){const O=(f[y]||"").toString().trim();O&&(y.includes("nom")||y.includes("name")?p.nom=O:y.includes("email")||y.includes("mail")?p.email=O:y.includes("tel")||y.includes("phone")||y.includes("telephone")?p.telephone=le(O):(y.includes("entreprise")||y.includes("company")||y.includes("societe"))&&(p.entreprise=O))}(p.telephone&&p.telephone.trim()||p.email&&p.email.trim())&&o.push(p)}),o},n=r=>{const t=r&&r.files&&r.files[0]?r.files[0]:r&&r.target&&r.target.files&&r.target.files[0];if(!t){d.value="Aucun fichier slectionn",s.value=[];return}const o=new FileReader;o.onload=f=>{try{const p=f.target.result,y=T(p);s.value=y,s.value.length===0?d.value="Aucun contact valide trouv dans le fichier CSV":d.value=""}catch(p){console.error("Erreur lecture CSV:",p),d.value="Erreur lors de la lecture du fichier CSV",s.value=[]}},o.readAsText(t,"utf-8")},i=async()=>{const t=[{key:"company_name",label:"Nom de l'entreprise"},{key:"domain",label:"Secteur d'activit"},{key:"promesse_de_valeur",label:"Promesse de valeur"},{key:"infos",label:"Description entreprise / service"},{key:"agent_name",label:"Nom de l'agent"},{key:"objectifs",label:"Objectifs de Prospection"}].filter(o=>!(m[o.key]&&String(m[o.key]).trim().length>0)).map(o=>o.label);if(s.value.length===0&&t.push("Fichier de contacts (CSV)"),t.length>0){const o=`Veuillez renseigner les champs obligatoires : ${t.join(", ")}`;d.value=o;try{_.add({severity:"warn",summary:"Champs manquants",detail:o,life:6e3})}catch{}return}d.value="",g.value="",l.value=!0;try{A(`Dmarrage de la cration de campagne, contacts chargs: ${s.value.length}`,{contacts_count:s.value.length});const{data:{user:o}}=await je.auth.getUser();if(A(`Rsultat supabase.auth.getUser(): ${o?o.id:"aucun user"}`,{user:o?o.id:null}),!o)throw new Error("Utilisateur non authentifi");const f={user_id:o.id,company_name:m.company_name,domain:m.domain,promesse_de_valeur:m.promesse_de_valeur,confidence_threshold:m.confidence_threshold||.7,agent_name:m.agent_name,referral_name:m.referral_name,infos:m.infos,objectifs:m.objectifs,contacts:s.value,contacts_count:s.value.length,estimated_avg_call_seconds:Number(Le.value)||60,from_number:m.from_number,timezone:m.timezone};try{const p=await Re.post("/api/create-campaign",f,{timeout:3e4});if(p.status===201||p.status===202){const y=`Campagne cre avec succs ! ${s.value.length} contacts seront prospects.`;g.value=y;try{_.add({severity:"success",summary:"Campagne cre",detail:y,life:6e3})}catch{}setTimeout(()=>a.push("/"),2e3)}else{const y=`Erreur lors de la cration de la campagne: ${p.data&&p.data.error?p.data.error:"erreur inconnue"}`;d.value=y;try{_.add({severity:"error",summary:"Erreur",detail:y,life:8e3})}catch{}}}catch(p){if(p?.response?.status===402){const O=(p.response.data||{}).error||"Solde insuffisant. Veuillez recharger votre compte.";d.value=O;try{_.add({severity:"warn",summary:"Solde insuffisant",detail:O,life:8e3})}catch{}}else if(p?.response?.data&&p.response.data.error){const y=p.response.data.error;d.value=y;try{_.add({severity:"error",summary:"Erreur",detail:y,life:8e3})}catch{}}else{console.error("Erreur lors de la cration de la campagne:",p);const y="Erreur lors de la cration de la campagne (serveur)";d.value=y;try{_.add({severity:"error",summary:"Erreur serveur",detail:y,life:8e3})}catch{}}}}catch(o){console.error("Erreur lors de la construction du batch pour le serveur:",o),A(`Erreur inattendue lors de la construction du batch: ${o&&o.message?o.message:JSON.stringify(o)}`);const f=o.message||"Erreur lors de la cration de la campagne";d.value=f;try{_.add({severity:"error",summary:"Erreur",detail:f,life:8e3})}catch{}}finally{l.value=!1}};return(r,t)=>{const o=be("router-link"),f=be("Message");return B(),$("div",fn,[u("div",hn,[C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{content:V(()=>[t[30]||(t[30]=u("h1",{class:"text-4xl font-bold text-gray-900 mb-4"}," Nouvelle Campagne de Prospection ",-1)),C(f,{severity:"info",closable:!1,class:"mb-0"},{default:V(()=>[t[18]||(t[18]=ae(" Configurez votre agent vocal AI avec les informations de votre entreprise et les objectifs de prospection. L'agent matrise les techniques avances : ",-1)),t[19]||(t[19]=u("strong",null,"Cold Call 2.0",-1)),t[20]||(t[20]=ae(", ",-1)),t[21]||(t[21]=u("strong",null,"SPIN Selling",-1)),t[22]||(t[22]=ae(", ",-1)),t[23]||(t[23]=u("strong",null,"NEPQ",-1)),t[24]||(t[24]=ae(", ",-1)),t[25]||(t[25]=u("strong",null,"BANT",-1)),t[26]||(t[26]=ae(", ",-1)),t[27]||(t[27]=u("strong",null,"Feel-Felt-Found",-1)),t[28]||(t[28]=ae(", ",-1)),t[29]||(t[29]=u("strong",null,"S.A.F.E.",-1)),C(o,{to:"/techniques",class:"ml-2 text-gray-900 font-semibold underline"},{default:V(()=>[...t[17]||(t[17]=[ae(" En savoir plus sur ces techniques ",-1)])]),_:1})]),_:1})]),_:1}),u("div",mn,[ve.value>0?(B(),$("div",gn,[we.value===0?(B(),$("div",bn,"Vous avez atteint votre limite de "+ee(ve.value)+" campagnes ce mois (plan: "+ee(ce.value)+"). Passez  un plan payant pour lancer davantage de campagnes.",1)):(B(),$("div",vn,"Campagnes ce mois: "+ee(fe.value)+" / "+ee(ve.value)+"  il vous reste "+ee(we.value)+".",1))])):X("",!0)]),u("form",{onSubmit:vt(i,["prevent"])},[C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[31]||(t[31]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-building text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Informations Entreprise")],-1)])]),content:V(()=>[u("div",yn,[u("div",kn,[t[32]||(t[32]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'entreprise *",-1)),C(I(me),{modelValue:m.company_name,"onUpdate:modelValue":t[0]||(t[0]=p=>m.company_name=p),placeholder:"Votre Entreprise",class:"w-full",required:""},null,8,["modelValue"])]),u("div",null,[t[33]||(t[33]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Secteur d'activit *",-1)),C(I(De),{modelValue:m.domain,"onUpdate:modelValue":t[1]||(t[1]=p=>m.domain=p),options:G,placeholder:"Slectionnez un secteur",class:"w-full",required:""},null,8,["modelValue"]),t[34]||(t[34]=u("small",{class:"text-gray-500 text-sm mt-1 block"}," Options disponibles : Immobilier, Tech, Finance, Conseil, Autre ",-1))]),u("div",null,[t[35]||(t[35]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Promesse de valeur (bnfice principal) *",-1)),C(I(me),{modelValue:m.promesse_de_valeur,"onUpdate:modelValue":t[2]||(t[2]=p=>m.promesse_de_valeur=p),placeholder:"Bnfice principal en une phrase",class:"w-full",required:""},null,8,["modelValue"])]),u("div",wn,[t[36]||(t[36]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Description entreprise / service *",-1)),C(I(He),{modelValue:m.infos,"onUpdate:modelValue":t[3]||(t[3]=p=>m.infos=p),placeholder:"Dcrivez votre entreprise, vos services, vos produits (2-3 phrases max)...",rows:"5",class:"w-full",required:""},null,8,["modelValue"])])])]),_:1}),C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[37]||(t[37]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-user text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Configuration Agent")],-1)])]),content:V(()=>[u("div",Cn,[u("div",null,[t[38]||(t[38]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom de l'agent *",-1)),C(I(me),{modelValue:m.agent_name,"onUpdate:modelValue":t[4]||(t[4]=p=>m.agent_name=p),placeholder:"Julie",class:"w-full",required:""},null,8,["modelValue"])]),u("div",null,[t[39]||(t[39]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Seuil de confiance (0.0 - 1.0)",-1)),C(I(xt),{modelValue:m.confidence_threshold,"onUpdate:modelValue":t[5]||(t[5]=p=>m.confidence_threshold=p),min:0,max:1,step:.1,minFractionDigits:1,maxFractionDigits:2,placeholder:"0.7",class:"w-full"},null,8,["modelValue"]),t[40]||(t[40]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Plus lev = plus slectif dans les rponses",-1))])])]),_:1}),C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[41]||(t[41]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-comments text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Variables Conversationnelles (optionnel)")],-1)])]),content:V(()=>[u("div",Sn,[u("div",null,[t[42]||(t[42]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Prnom du prospect",-1)),C(I(me),{modelValue:m.contact_first_name,"onUpdate:modelValue":t[6]||(t[6]=p=>m.contact_first_name=p),placeholder:"Dfaut : Monsieur / Madame",class:"w-full"},null,8,["modelValue"]),t[43]||(t[43]=u("small",{class:"text-gray-500 text-sm mt-1 block"},' Laissez vide pour utiliser "Monsieur/Madame" automatiquement. ',-1))]),u("div",null,[t[44]||(t[44]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du rfrent (warm calling)",-1)),C(I(me),{modelValue:m.referral_name,"onUpdate:modelValue":t[7]||(t[7]=p=>m.referral_name=p),placeholder:"Nom du rfrent (optionnel)",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[45]||(t[45]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Nom du dcisionnaire",-1)),C(I(me),{modelValue:m.decision_maker_name,"onUpdate:modelValue":t[8]||(t[8]=p=>m.decision_maker_name=p),placeholder:"Nom du dcisionnaire (si connu)",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[46]||(t[46]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Processus mtier cibl",-1)),C(I(me),{modelValue:m.processus_metier,"onUpdate:modelValue":t[9]||(t[9]=p=>m.processus_metier=p),placeholder:"Ex : la gestion locative, le recrutement...",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[47]||(t[47]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Capacit cl  qualifier",-1)),C(I(me),{modelValue:m.key_capability,"onUpdate:modelValue":t[10]||(t[10]=p=>m.key_capability=p),placeholder:"Ex : automatisation, conformit RGPD...",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[48]||(t[48]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Pain point identifi",-1)),C(I(me),{modelValue:m.pain_point_identifie,"onUpdate:modelValue":t[11]||(t[11]=p=>m.pain_point_identifie=p),placeholder:"Ex : Perte de temps sur les tches manuelles",class:"w-full"},null,8,["modelValue"])]),u("div",null,[t[49]||(t[49]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Numro d'envoi",-1)),C(I(De),{modelValue:m.from_number,"onUpdate:modelValue":t[12]||(t[12]=p=>m.from_number=p),options:c,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un numro d'envoi",class:"w-full"},null,8,["modelValue"]),t[50]||(t[50]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le numro utilis pour mettre les appels.",-1))]),u("div",null,[t[51]||(t[51]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Fuseau horaire d'appel",-1)),C(I(De),{modelValue:m.timezone,"onUpdate:modelValue":t[13]||(t[13]=p=>m.timezone=p),options:R,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un fuseau horaire",class:"w-full"},null,8,["modelValue"]),t[52]||(t[52]=u("small",{class:"text-gray-500 text-sm mt-1 block"},"Slectionnez le fuseau horaire pour la fentre d'appel.",-1))])])]),_:1}),C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[53]||(t[53]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-file-edit text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Script d'appel personnalis (optionnel)")],-1)])]),content:V(()=>[u("div",xn,[t[54]||(t[54]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Script d'exemple",-1)),C(I(He),{modelValue:m.call_script_example,"onUpdate:modelValue":t[14]||(t[14]=p=>m.call_script_example=p),placeholder:"Collez ici votre script d'appel en suivant le template recommand (ACCROCHE, DCOUVERTE, TRANSITION VALEUR, CLOSING)...",rows:"8",class:"w-full"},null,8,["modelValue"]),t[55]||(t[55]=u("small",{class:"text-gray-500 text-sm mt-1 block"}," Optionnel. Si laiss vide, l'agent utilisera un script gnr automatiquement  partir de vos variables. ",-1))])]),_:1}),C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[56]||(t[56]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-bullseye text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Objectifs de Prospection")],-1)])]),content:V(()=>[u("div",null,[t[57]||(t[57]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Slectionnez les objectifs *",-1)),C(I(De),{modelValue:m.objectifs,"onUpdate:modelValue":t[15]||(t[15]=p=>m.objectifs=p),options:re,optionLabel:"label",optionValue:"value",placeholder:"Slectionnez un objectif",class:"w-full",required:""},null,8,["modelValue"])])]),_:1}),C(I(ke),{class:"mb-6 shadow-md border border-gray-200"},{title:V(()=>[...t[58]||(t[58]=[u("div",{class:"flex items-center gap-2"},[u("i",{class:"pi pi-users text-gray-700"}),u("span",{class:"text-gray-900 font-semibold"},"Contacts  Appeler")],-1)])]),content:V(()=>[u("div",En,[u("div",null,[t[59]||(t[59]=u("label",{class:"block mb-2 font-semibold text-gray-700"},"Fichier de contacts (CSV) *",-1)),C(I(lt),{mode:"basic",accept:".csv",maxFileSize:1e7,chooseLabel:"Choisir un fichier CSV",onSelect:n,class:"w-full",disabled:l.value},null,8,["disabled"]),t[60]||(t[60]=u("small",{class:"text-gray-500 text-sm mt-1 block"},[ae(" Format CSV attendu : nom, email, tlphone, entreprise (optionnel)"),u("br"),u("span",{class:"text-blue-600"},' Le prfixe "+" sera ajout automatiquement aux numros de tlphone si absent.')],-1))]),s.value.length>0?(B(),$("div",Fn,[u("h3",_n," Contacts chargs ("+ee(s.value.length)+") ",1),C(I(Et),{value:s.value.slice(0,10),paginator:s.value.length>10,rows:5,class:"p-datatable-sm",scrollable:!0,scrollHeight:"200px"},{default:V(()=>[C(I(Te),{field:"nom",header:"Nom"}),C(I(Te),{field:"email",header:"Email"}),C(I(Te),{field:"telephone",header:"Tlphone"}),C(I(Te),{field:"entreprise",header:"Entreprise"})]),_:1},8,["value","paginator"]),s.value.length>10?(B(),$("p",An," ... et "+ee(s.value.length-10)+" autres contacts ",1)):X("",!0)])):X("",!0)])]),_:1}),C(I(ke),{class:"shadow-md border border-gray-200"},{content:V(()=>[u("div",In,[C(I(Ve),{label:"Annuler",icon:"pi pi-times",severity:"secondary",outlined:"",onClick:t[16]||(t[16]=p=>r.$router.push("/")),disabled:l.value},null,8,["disabled"]),C(I(Ve),{type:"submit",label:"Lancer la Campagne",icon:"pi pi-send",loading:l.value,disabled:l.value||s.value.length===0||ve.value>0&&we.value===0,title:ve.value>0&&we.value===0?"Quota mensuel atteint  passez  un plan payant pour lancer plus de campagnes":""},null,8,["loading","disabled","title"])])]),_:1})],32)])])}}};export{Dn as default};
